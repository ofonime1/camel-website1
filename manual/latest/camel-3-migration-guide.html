<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Apache Camel 2.x to 3.0 Migration Guide - Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/manual/latest/camel-3-migration-guide.html"> <meta name="generator" content="Antora 2.1.0"> <link rel="stylesheet" href="../../_/css/site-f36f640c63.css"> <meta name="application-name" content="Apache Camel"> <link rel="manifest" href="../../site.webmanifest"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../favicon-128.png" sizes="128x128"> </head> <body class="article"> <header class="header"> <nav class="navbar"> <div class="navbar-brand"> <a class="nav-logo" href="../.."><span>Apache Camel</span></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item" href="../../blog/">Blog</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Projects</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../projects/camel-k/">Camel K</a> <a class="navbar-item" href="../../projects/camel-quarkus/">Camel Quarkus</a> <a class="navbar-item" href="../../projects/camel-kafka-connector/">Camel Kafka Connector</a> <a class="navbar-item" href="../../camel-spring-boot/latest/">Camel Spring Boot</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Documentation</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../manual/latest/getting-started.html">Getting started</a> <a class="navbar-item" href="../../manual/latest/">User manual</a> <a class="navbar-item" href="../../components/latest/">Component reference</a> <a class="navbar-item" href="../../camel-k/latest/">Camel K</a> <a class="navbar-item" href="../../camel-quarkus/latest/">Camel Quarkus</a> <a class="navbar-item" href="../../camel-kafka-connector/latest/">Camel Kafka Connector</a> <a class="navbar-item" href="../../manual/latest/enterprise-integration-patterns.html">Enterprise Integration Patterns</a> <a class="navbar-item" href="../../manual/latest/camel-3-migration-guide.html">Camel 2.x to 3.0 Migration Guide</a> <a class="navbar-item" href="../../manual/latest/camel-3x-upgrade-guide.html">Camel 3.x Upgrade Guide</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Community</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../community/support/">Support</a> <a class="navbar-item" href="../../manual/latest/contributing.html">Contributing</a> <a class="navbar-item" href="../../community/user-stories/">User stories</a> <a class="navbar-item" href="../../community/articles/">Articles</a> <a class="navbar-item" href="../../community/books/">Books</a> <a class="navbar-item" href="../../community/team/">Team</a> </div> </div> <a class="navbar-item" href="../../download/">Download</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">About</a> <div class="navbar-dropdown"> <a class="navbar-item" href="https://www.apache.org/events/current-event.html">Apache events</a> <a class="navbar-item" href="https://www.apache.org/licenses/">License</a> <a class="navbar-item" href="../../security/">Security</a> <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a> <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a> </div> </div> </div> </div> <div class="navbar-tools"> <a href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#github"/></svg></a> <a href="https://gitter.im/apache/apache-camel" title="Chat on Gitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#gitter"/></svg></a> <a href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#twitter"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <div class="body"> <div class="nav-container" data-component="manual" data-version="latest"> <aside class="nav"> <div class="panels"> <div class="nav-panel-menu is-active" data-panel="menu"> <nav class="nav-menu"> <h3 class="title"><a href="index.html">User manual</a></h3> <ul class="nav-list"> <li class="nav-item" data-depth="0"> <ul class="nav-list"> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="getting-started.html">Getting started</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="book-getting-started.html">Getting Started with Apache Camel</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="what-are-the-dependencies.html">What are the dependencies?</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="architecture.html">Architecture</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="async.html">Async</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="asynchronous-routing-engine.html">Asynchronous Routing Engine</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="backlogdebugger.html">Backlog debugger</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="bam.html">Business Activity Monitoring</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="batch-consumer.html">Batch Consumer</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="browsable-endpoint.html">BrowsableEndpoint</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="camel-core.html">Core</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="camelcontext.html">Context</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="endpoint.html">Endpoints</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="cep.html">Complex Event Processing</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="component.html">Component</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="debugger.html">Debugger</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="delay-interceptor.html">Delay interceptor</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="dependency-injection.html">Dependency Injection</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="dozer-type-conversion.html">Dozer Type Conversion</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="bean-integration.html">Bean Integration</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="bean-binding.html">Bean Binding</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="parameter-binding-annotations.html">Parameter Binding Annotations</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="pojo-producing.html">POJO Producing</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="pojo-consuming.html">POJO Consuming</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="error-handler.html">Error Handler</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="exchange.html">Message Exchange</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="exchange-pattern.html">Exchange Pattern</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="using-exchange-pattern-annotations.html">Using Exchange pattern annotations</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="expression.html">Expressions</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="content-enricher.html">Content Enrichment</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="injector.html">Injector</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="intercept.html">Intercept</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="inversion-of-control-with-smart-defaults.html">Inversion Of Control With Smart Defaults</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="jmx.html">JMX</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="lifecycle.html">Camel Lifecycle</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="oncompletion.html">OnCompletion</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="predicate.html">Predicates</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="registry.html">Registry</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="route-builder.html">RouteBuilder</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="routes.html">Routes</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="transformer.html">Transformer</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="validator.html">Validator</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="spring-remoting.html">Spring Remoting</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="hiding-middleware.html">Hiding Middleware</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="health-check.html">Health Checks</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <span class="nav-text">Domain Specific Languages</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="dsl.html">Camel Domain Specific Language</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="java-dsl.html">Java DSL</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="spring.html">Spring support</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="using-osgi-blueprint-with-camel.html">Using OSGi blueprint with Camel</a> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <span class="nav-text">Supported expression languages</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="constant-language.html">Constant Language</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="exchangeProperty-language.html">ExchangeProperty Language</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="file-language.html">File Language</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="header-language.html">Header Language</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="properties-component.html">Properties Component</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="ref-language.html">Ref Language</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="simple-language.html">Simple Language</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="tokenize-language.html">Tokenize Language</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="enterprise-integration-patterns.html">Enterprise Integration Patterns</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="aggregate-eip.html">Aggregate EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="batch-config-eip.html">Batch-config EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="bean-eip.html">Bean EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="choice-eip.html">Choice EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="circuitBreaker-eip.html">CircuitBreaker EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="claimCheck-eip.html">Claim Check EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="content-based-router-eip.html">Content Based Router</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="content-filter-eip.html">Content Filter</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="convertBodyTo-eip.html">Convert Body To EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="customLoadBalancer-eip.html">Custom Load Balancer EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="delay-eip.html">Delay EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="dynamic-router.html">Dynamic Router</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="dynamicRouter-eip.html">Dynamic Router EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="enrich-eip.html">Enrich EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="eventDrivenConsumer-eip.html">Event Driven Consumer</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="failover-eip.html">Failover EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="filter-eip.html">Filter EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="from-eip.html">From EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="hystrix-eip.html">Hystrix EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="hystrixConfiguration-eip.html">Hystrix Configuration EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="idempotentConsumer-eip.html">Idempotent Consumer EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="inOnly-eip.html">In Only EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="inOut-eip.html">In Out EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="loadBalance-eip.html">Load Balance EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="log-eip.html">Log EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="loop-eip.html">Loop EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="marshal-eip.html">Marshal EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="multicast-eip.html">Multicast EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="onFallback-eip.html">On Fallback EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="otherwise-eip.html">Otherwise EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="pipeline-eip.html">Pipeline EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="pollEnrich-eip.html">Poll Enrich EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="process-eip.html">Process EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="random-eip.html">Random EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="recipientList-eip.html">Recipient List EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="removeHeader-eip.html">Remove Header EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="removeHeaders-eip.html">Remove Headers EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="removeProperties-eip.html">Remove Properties EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="removeProperty-eip.html">Remove Property EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="requestReply-eip.html">Request Reply</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="resequence-eip.html">Resequence EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="resilience4j-eip.html">Resilience4j EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="resilience4jConfiguration-eip.html">Resilience4j Configuration EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="rollback-eip.html">Rollback EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="roundRobin-eip.html">Round Robin EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="routingSlip-eip.html">Routing Slip EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="saga-eip.html">Saga EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="sample-eip.html">Sample EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="script-eip.html">Script EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="serviceCall-eip.html">Service Call EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="setBody-eip.html">Set Body EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="setHeader-eip.html">Set Header EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="setOutHeader-eip.html">Set Out Header EIP (deprecated)</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="setProperty-eip.html">Set Property EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="sort-eip.html">Sort EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="split-eip.html">Split EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="step-eip.html">Step EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="sticky-eip.html">Sticky EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="stop-eip.html">Stop EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="stream-config-eip.html">Stream-config EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="threads-eip.html">Threads EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="throttle-eip.html">Throttle EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="to-eip.html">To EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="toD-eip.html">To D EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="topic-eip.html">Topic EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="transform-eip.html">Transform EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="unmarshal-eip.html">Unmarshal EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="validate-eip.html">Validate EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="weighted-eip.html">Weighted EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="when-eip.html">When EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="wireTap-eip.html">Wire Tap EIP</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <span class="nav-text">Frequently asked questions</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/can-i-get-commercial-support.html">Can I get commercial support?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/does-camel-work-on-ibms-jdk.html">Does Camel work on IBM&#8217;s JDK?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="support.html">How can I get help?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-i-get-the-source-code.html">How can I get the source code?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-compare-to-mule.html">How does Camel compare to Mule?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-compare-to-servicemix.html">How does Camel compare to ServiceMix?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-compare-to-servicemix-eip.html">How does Camel compare to ServiceMix EIP?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-compare-to-synapse.html">How does Camel compare to Synapse?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-work.html">How does Camel work?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-work-with-activemq.html">How does Camel work with ActiveMQ?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-work-with-servicemix.html">How does Camel work with ServiceMix?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-the-camel-api-compare-to.html">How does the Camel API compare to?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-the-website-work.html">How does the website work?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-become-a-committer.html">How do I become a committer?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-compile-the-code.html">How do I compile the code?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-edit-the-website.html">How do I edit the website?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-run-camel-using-java-webstart.html">How do I run Camel using Java WebStart?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/if-i-use-servicemix-when-should-i-use-camel.html">If I use ServiceMix when should I use Camel?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/is-camel-an-esb.html">Is Camel an ESB?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/is-camel-ioc-friendly.html">Is Camel IoC friendly?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/running-camel-standalone.html">Running Camel standalone</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-are-the-dependencies.html">What are the dependencies?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-is-a-router.html">What is a router?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-is-camel.html">What is Camel?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-is-the-license.html">What is the license?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-jars-do-i-need.html">What jars do I need?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="languages.html">What languages are supported?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-platforms-are-supported.html">What platforms are supported?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-the-name-camel.html">Why the name Camel?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/classloader-issue-of-servicemix-camel-component.html">Classloader issue of servicemix-camel component</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-specify-which-method-to-use-when-using-beans-in-routes.html">How do I specify which method to use when using beans in routes?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-i-create-a-custom-component-or-endpoint.html">How can I create a custom component or endpoint?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-i-get-the-remote-connection-ip-address-from-the-camel-cxf-consumer-.html">How can I get the remote connection IP address from the camel-cxf consumer ?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-i-stop-a-route-from-a-route.html">How can I stop a route from a route?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-webservice-clients-see-remote-faults-with-stacktraces-when-using-camel-cxf.html">How can webservice clients see remote faults with stacktraces when using camel-cxf?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-look-up-beans-and-endpoints.html">How does Camel look up beans and endpoints?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="configuring-camel.html">How do I add a component?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-change-the-logging.html">How do I change the logging?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-configure-endpoints.html">How do I configure endpoints?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-configure-password-options-on-camel-endpoints-without-the-value-being-encoded.html">How do I configure password options on Camel endpoints without the value being encoded?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-configure-the-default-maximum-cache-size-for-producercache-or-producertemplate.html">How do I configure the default maximum cache size for ProducerCache or ProducerTemplate?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-configure-the-maximum-endpoint-cache-size-for-camelcontext.html">How do I configure the maximum endpoint cache size for CamelContext?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-debug-my-route.html">How do I debug my route?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-disable-jmx.html">How do I disable JMX?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-enable-streams-when-debug-logging-messages-in-camel.html">How do I enable streams when debug logging messages in Camel?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-handle-failures-when-consuming-for-example-from-a-ftp-server.html">How do I handle failures when consuming for example from a FTP server?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-import-rests-from-other-xml-files.html">How do I import rests from other XML files?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-import-routes-from-other-xml-files.html">How do I import routes from other XML files?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-let-jetty-match-wildcards.html">How do I let Jetty match wildcards?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-name-my-routes.html">How do I name my routes?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-restart-camelcontext.html">How do I restart CamelContext?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-retrieve-the-thrown-exception-during-processing-an-exchange.html">How do I retrieve the thrown Exception during processing an Exchange?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-retry-failed-messages-forever.html">How do I retry failed messages forever?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-retry-processing-a-message-from-a-certain-point-back-or-an-entire-route.html">How do I retry processing a message from a certain point back or an entire route?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-reuse-the-contexttestsupport-class-in-my-unit-tests.html">How do I reuse the ContextTestSupport class in my unit tests?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-run-activemq-and-camel-in-jboss.html">How do I run ActiveMQ and Camel in JBoss?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-set-the-max-chars-when-debug-logging-messages-in-camel.html">How do I set the max chars when debug logging messages in Camel?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-specify-time-period-in-a-human-friendly-syntax.html">How do I specify time period in a human friendly syntax?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-a-big-uber-jar.html">How do I use a big (uber) JAR?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-camel-inside-servicemix.html">How do I use Camel inside ServiceMix?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-spring-property-placeholder-with-camel-xml.html">How do I use Spring Property Placeholder with Camel XML?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-uris-with-parameters-in-xml.html">How do I use URIs with parameters in XML?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-write-a-custom-processor-which-sends-multiple-messages.html">How do I write a custom Processor which sends multiple messages?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-should-i-invoke-my-pojos-or-spring-services.html">How should I invoke my POJOs or Spring Services?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-should-i-package-applications-using-camel-and-activemq.html">How should I package applications using Camel and ActiveMQ?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-avoid-importing-bunch-of-cxf-packages-when-start-up-the-camel-cxf-endpoint-from-osgi-platform-.html">How to avoid importing bunch of cxf packages when start up the camel-cxf endpoint from OSGi platform?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-avoid-sending-some-or-all-message-headers.html">How to avoid sending some or all message headers?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-define-a-static-camel-converter-method-in-scala.html">How to define a static Camel converter method in Scala?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-remove-the-http-protocol-headers-in-the-camel-message.html">How to remove the http protocol headers in the camel message?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-send-the-same-message-to-multiple-endpoints.html">How to send the same message to multiple endpoints?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-switch-the-cxf-consumer-between-http-and-https-without-touching-the-spring-configuration.html">How to switch the CXF consumer between HTTP and HTTPS without touching the Spring configuration?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-use-a-dynamic-uri-in-to.html">How to use a dynamic URI in to()?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/is-there-an-ide.html">Is there an IDE?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/should-i-deploy-camel-inside-the-activemq-broker-or-in-another-application.html">Should I deploy Camel inside the ActiveMQ broker or in another application?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/using-camel-core-testsjar.html">Using camel-core-tests.jar</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/using-getin-or-getout-methods-on-exchange.html">Using getIn or getOut methods on Exchange</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-cant-i-use-sign-in-my-password.html">Why can&#8217;t I use + sign in my password?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-can-i-not-use-when-or-otherwise-in-a-java-camel-route.html">Why can I not use when or otherwise in a Java Camel route?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-ftp-component-not-download-any-files.html">Why does FTP component not download any files?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-my-file-consumer-not-pick-up-the-file-and-how-do-i-let-the-file-consumer-use-the-camel-error-handler.html">Why does my file consumer not pick up the file, and how do I let the file consumer use the Camel error handler?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-useoriginalmessage-with-error-handler-not-work-as-expected.html">Why does useOriginalMessage with error handler not work as expected?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-do-my-message-lose-its-headers-during-routing.html">Why do my message lose its headers during routing?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-is-my-message-body-empty.html">Why is my message body empty?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-is-my-processor-not-showing-up-in-jconsole.html">Why is my processor not showing up in JConsole?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-is-the-exception-null-when-i-use-onexception.html">Why is the exception null when I use onException?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-use-multiple-camelcontext.html">Why use multiple CamelContext?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-enable-debug-logging.html">How do I enable debug logging?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-java-14-logging.html">How do I use Java 1.4 logging?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-log4j.html">How do I use log4j?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-invoke-camel-routes-from-jbi.html">How do I invoke Camel routes from JBI?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-make-my-jms-endpoint-transactional.html">How Do I Make My JMS Endpoint Transactional?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-set-the-mep-when-interacting-with-jbi.html">How do I set the MEP when interacting with JBI?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-the-direct-event-seda-and-vm-endpoints-compare.html">How do the direct, event, seda and vm endpoints compare?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-the-timer-and-quartz-endpoints-compare.html">How do the Timer and Quartz endpoints compare?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-my-jms-route-only-consume-one-message-at-once.html">Why does my JMS route only consume one message at once?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/exception-beandefinitionstoreexception.html">Exception - BeanDefinitionStoreException</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/exception-javaxnamingnoinitialcontextexception.html">Exception - javax.naming.NoInitialContextException</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/exception-orgapachecamelnosuchendpointexception.html">Exception - org.apache.camel.NoSuchEndpointException</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/exception-orgxmlsaxsaxparseexception.html">Exception - org.xml.sax.SAXParseException</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/memory-leak-when-adding-and-removing-routes-at-runtime.html">Memory leak when adding and removing routes at runtime</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-do-camel-throw-so-many-noclassdeffoundexception-on-startup.html">Why do Camel throw so many NoClassDefFoundException on startup?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-camel-use-too-many-threads-with-producertemplate.html">Why does Camel use too many threads with ProducerTemplate?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-maven-not-download-dependencies.html">Why does maven not download dependencies?</a> </li> </ul> </li> <li class="nav-item is-current-page" data-depth="1"> <a class="nav-link" href="camel-3-migration-guide.html">Camel 2.x to 3.0 Migration Guide</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="camel-3x-upgrade-guide.html">Camel 3.x Upgrade Guide</a> </li> </ul> </li> </ul> </nav> </div> <div class="nav-panel-explore" data-panel="explore"> <div class="context"> <span class="title">User manual</span> <span class="version">latest</span> </div> <ul class="components"> <li class="component"> <span class="title">Apache Camel extensions for Quarkus</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-quarkus/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Apache Camel K</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-k/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Apache Camel Kafka Connector</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-kafka-connector/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Camel Spring Boot Starters</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-spring-boot/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Component reference</span> <ul class="versions"> <li class="version is-latest"> <a href="../../components/latest/index.html">latest</a> </li> <li class="version"> <a href="../../components/3.0.x/index.html">3.0.x</a> </li> <li class="version"> <a href="../../components/2.x/index.html">2.x</a> </li> </ul> </li> <li class="component is-current"> <span class="title">User manual</span> <ul class="versions"> <li class="version is-current is-latest"> <a href="index.html">latest</a> </li> </ul> </li> </ul> </div> </div> </aside> </div> <main role="main"> <div class="toolbar" role="navigation"> <button class="nav-toggle"></button> <a href="index.html" class="home-link"></a> <nav class="breadcrumbs" aria-label="breadcrumbs"> <ul> <li><a href="index.html">User manual</a></li> <li><a href="camel-3-migration-guide.html">Camel 2.x to 3.0 Migration Guide</a></li> </ul> </nav> <div> <label id="toggle-width-label" for="toggle-width">Wide / Narrow</label> </div> <div class="edit-this-page"><a href="https://github.com/apache/camel/edit/master/docs/user-manual/modules/ROOT/pages/camel-3-migration-guide.adoc">Edit this Page</a></div> </div> <input type="checkbox" id="toggle-width"> <article class="doc"> <h1 class="page">Apache Camel 2.x to 3.0 Migration Guide</h1> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>This document is intended to help you migrate your Apache Camel applications from version 2.x to 3.0.</p> </div> <div class="admonitionblock important"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> <td class="content"> If you are upgrading Camel 3.x to 3.y then use the <a href="camel-3x-upgrade-guide.html" class="page">Camel 3.x Upgrade Guide</a>. </td> </tr> </table></div> </div> </div> </div> <div class="sect1"> <h2 id="_java_versions"><a class="anchor" href="#_java_versions"></a>Java versions</h2> <div class="sectionbody"> <div class="paragraph"> <p>Camel 3 supports Java 11. Support for Java 8 is best effort for early versions of Camel 3. However at some time in the 3.x lifeline we will drop support for Java 8.</p> </div> <div class="paragraph"> <p>In Java 11 the JAXB modules have been <strong>removed</strong> from the JDK, therefore you will need to add them as Maven dependencies (if you use JAXB such as when using XML DSL or the camel-jaxb component):</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;
    &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;
    &lt;version&gt;2.3.1&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;
    &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;
    &lt;version&gt;2.3.0.1&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;
    &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;
    &lt;version&gt;2.3.2&lt;/version&gt;
&lt;/dependency&gt;</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_modularization_of_camel_core"><a class="anchor" href="#_modularization_of_camel_core"></a>Modularization of camel-core</h2> <div class="sectionbody"> <div class="paragraph"> <p>One of the biggest changes is the modularization of camel-core. In Camel 2.x camel-core was one JAR file, it has now been split up into many JARs as follows:</p> </div> <div class="ulist"> <ul> <li> <p>camel-api</p> </li> <li> <p>camel-base</p> </li> <li> <p>camel-caffeine-lrucache</p> </li> <li> <p>camel-cloud</p> </li> <li> <p>camel-core</p> </li> <li> <p>camel-jaxp</p> </li> <li> <p>camel-main</p> </li> <li> <p>camel-management-api</p> </li> <li> <p>camel-management</p> </li> <li> <p>camel-support</p> </li> <li> <p>camel-util</p> </li> <li> <p>camel-util-json</p> </li> </ul> </div> <div class="paragraph"> <p>Maven users of Apache Camel can keep using the dependency <code>camel-core</code> which has transitive dependencies on all of its modules, and therefore no migration is needed. However, users who want to trim the size of the classes on the classpath, can use fine grained Maven dependencies on only the modules needed. You may find how to do that in the examples.</p> </div> <div class="paragraph"> <p>We have also modularized many of the core components and moved them out of <code>camel-core</code> to individual components:</p> </div> <div class="ulist"> <ul> <li> <p>camel-attachments</p> </li> <li> <p>camel-bean</p> </li> <li> <p>camel-browse</p> </li> <li> <p>camel-controlbus</p> </li> <li> <p>camel-dataformat</p> </li> <li> <p>camel-dataset</p> </li> <li> <p>camel-direct</p> </li> <li> <p>camel-directvm</p> </li> <li> <p>camel-file</p> </li> <li> <p>camel-language</p> </li> <li> <p>camel-log</p> </li> <li> <p>camel-mock</p> </li> <li> <p>camel-ref</p> </li> <li> <p>camel-rest</p> </li> <li> <p>camel-saga</p> </li> <li> <p>camel-scheduler</p> </li> <li> <p>camel-seda</p> </li> <li> <p>camel-stub</p> </li> <li> <p>camel-timer</p> </li> <li> <p>camel-validator</p> </li> <li> <p>camel-vm</p> </li> <li> <p>camel-xpath</p> </li> <li> <p>camel-xslt</p> </li> <li> <p>camel-xslt-saxon</p> </li> <li> <p>camel-zip-deflater</p> </li> </ul> </div> </div> </div> <div class="sect1"> <h2 id="_spring_boot_starters_maven_coordinate_change"><a class="anchor" href="#_spring_boot_starters_maven_coordinate_change"></a>Spring Boot starters Maven coordinate change</h2> <div class="sectionbody"> <div class="paragraph"> <p>The Maven <code>groupId</code> for the Spring Boot starters changed to: <code>org.apache.camel.springboot</code>.</p> </div> <div class="paragraph"> <p>Instead of:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-component-starter&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre> </div> </div> <div class="paragraph"> <p>Use:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;
  &lt;artifactId&gt;camel-component-starter&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_multiple_camelcontexts_per_application_not_supported"><a class="anchor" href="#_multiple_camelcontexts_per_application_not_supported"></a>Multiple CamelContexts per application not supported</h2> <div class="sectionbody"> <div class="paragraph"> <p>Support for multiple CamelContexts has been removed and only 1 CamelContext per deployment is supported. The latter was not recommended anyway and was also not 100% implemented (for example in camel-cdi). For Camel 3 only 1 CamelContext per deployment is recommended and supported.</p> </div> <div class="paragraph"> <p>The <code>context</code> attribute on the various Camel annotations such as <code>@EndpointInject</code>, <code>@Produce</code>, <code>@Consume</code> etc. has therefore been removed.</p> </div> </div> </div> <div class="sect1"> <h2 id="_migrating_custom_components"><a class="anchor" href="#_migrating_custom_components"></a>Migrating custom components</h2> <div class="sectionbody"> <div class="paragraph"> <p>You should depend on <code>camel-support</code> and not <code>camel-core</code> directly.</p> </div> <div class="paragraph"> <p>The classes from <code>org.apache.camel.impl</code> that are intended to support Camel developers building custom components have been moved out of <code>camel-core</code> into <code>camel-support</code> into the <code>org.apache.camel.support</code> package. For example classes such as <code>DefaultComponent</code>, <code>DefaultEndpoint</code> etc. have been moved and migration is necessary.</p> </div> </div> </div> <div class="sect1"> <h2 id="_migrating_custom_languages"><a class="anchor" href="#_migrating_custom_languages"></a>Migrating custom languages</h2> <div class="sectionbody"> <div class="paragraph"> <p>The <code>LanguageAnnotation</code> annotation class has been moved from package <code>org.apache.camel.language</code> to <code>org.apache.camel.support.language</code>.</p> </div> </div> </div> <div class="sect1"> <h2 id="_deprecated_apis_and_components"><a class="anchor" href="#_deprecated_apis_and_components"></a>Deprecated APIs and Components</h2> <div class="sectionbody"> <div class="paragraph"> <p>All deprecated APIs and components from Camel 2.x have been removed in Camel 3.</p> </div> </div> </div> <div class="sect1"> <h2 id="_migrating_camel_applications"><a class="anchor" href="#_migrating_camel_applications"></a>Migrating Camel applications</h2> <div class="sectionbody"> <div class="sect2"> <h3 id="_main_class"><a class="anchor" href="#_main_class"></a>Main class</h3> <div class="paragraph"> <p>The Camel <code>Main</code> class has been moved out of <code>camel-core</code> into <code>camel-main</code> so you should add that as dependency if you use Main.</p> </div> </div> <div class="sect2"> <h3 id="_properties_component"><a class="anchor" href="#_properties_component"></a>Properties component</h3> <div class="paragraph"> <p>The <code>properties</code> component has configuring custom prefix and suffix tokens removed as if in use, they had potential issues with clashing with simple languages and elsewhere. The default tokens are now hardcoded and always in use.</p> </div> <div class="paragraph"> <p>The <code>properties</code> component has some advanced options removed: <code>propertyPrefix</code>, <code>propertySuffix</code>, and <code>fallbackToUnaugmented</code>; these options was never really useable for end users anyway. The option <code>propertiesResolver</code> has also been removed as you should use <code>PropertiesSource</code> instead.</p> </div> <div class="paragraph"> <p>The properties component will now use OS environment variables as preferred value. This means you can set an OS environment variable which will override any property values that has been set in property files, JVM system properties etc. You can configure this with the <code>environmentVariableMode</code> option on the properties component.</p> </div> <div class="paragraph"> <p>The <code>properties</code> component no longer support using endpoints, such as <code>properties:myKey</code>. The properties component is now only a property placeholder service. You can therefore no longer lookup the properties component via <code>camelContext.getComponent("properties")</code>. Instead you can use <code>camelContext.getPropertiesComponent()</code>, which also returns an interface of the properties component as <code>org.apache.camel.spi.PropertiesComponent</code>. The implementation is still named <code>org.apache.camel.component.properties.PropertiesComponent</code>, however it should rarely be used, as you should favour using the interface instead.</p> </div> </div> <div class="sect2"> <h3 id="_removed_components"><a class="anchor" href="#_removed_components"></a>Removed components</h3> <div class="paragraph"> <p>We have removed all deprecated components from Camel 2.x, including the old <code>camel-http</code>, <code>camel-hdfs</code>, <code>camel-mina</code>, <code>camel-mongodb</code>, <code>camel-netty</code>, <code>camel-netty-http</code>, <code>camel-quartz</code> and <code>camel-rx</code> components.</p> </div> <div class="paragraph"> <p>We removed <code>camel-jibx</code> component which wasn&#8217;t working on JDK 8.</p> </div> <div class="paragraph"> <p>We removed <code>camel-boon</code> dataformat which wasn&#8217;t working on JDK 9 and later.</p> </div> <div class="paragraph"> <p>We removed the <code>camel-linkedin</code> component as the Linkedin API 1.0 is no longer <a href="https://engineering.linkedin.com/blog/2018/12/developer-program-updates">supported</a>. Support for the new 2.0 API is tracked by <a href="https://issues.apache.org/jira/browse/CAMEL-13813">CAMEL-13813</a>.</p> </div> <div class="paragraph"> <p>The <code>camel-zookeeper</code> has its route policy functionality removed, instead use <code>ZooKeeperClusterService</code> or the <code>camel-zookeeper-master</code> component.</p> </div> <div class="paragraph"> <p>The <code>camel-jetty</code> component no longer supports producer (eg to) which has been removed, use <code>camel-http</code> component instead.</p> </div> <div class="paragraph"> <p>The <code>twitter-streaming</code> component has been removed as it relied on the deprecated Twitter Streaming API and is no longer functional.</p> </div> </div> <div class="sect2"> <h3 id="_renamed_components"><a class="anchor" href="#_renamed_components"></a>Renamed components</h3> <div class="paragraph"> <p>The <code>test</code> component has been renamed to <code>dataset-test</code> and moved out of <code>camel-core</code> into <code>camel-dataset</code> JAR.</p> </div> <div class="paragraph"> <p>The <code>http4</code> component has been renamed to <code>http</code>, and it&#8217;s corresponding component package from <code>org.apache.camel.component.http4</code> to <code>org.apache.camel.component.http</code>. The supported schemes are now only <code>http</code> and <code>https</code>.</p> </div> <div class="paragraph"> <p>The <code>hdfs2</code> component has been renamed to <code>hdfs</code>, and it&#8217;s corresponding component package from <code>org.apache.camel.component.hdfs2</code> to <code>org.apache.camel.component.hdfs</code>. The supported scheme is now <code>hdfs</code>.</p> </div> <div class="paragraph"> <p>The <code>mina2</code> component has been renamed to <code>mina</code>, and it&#8217;s corresponding component package from <code>org.apache.camel.component.mina2</code> to <code>org.apache.camel.component.mina</code>. The supported scheme is now <code>mina</code>.</p> </div> <div class="paragraph"> <p>The <code>mongodb3</code> component has been renamed to <code>mongodb</code>, and it&#8217;s corresponding component package from <code>org.apache.camel.component.mongodb3</code> to <code>org.apache.camel.component.mongodb</code>. The supported scheme is now <code>mongodb</code>.</p> </div> <div class="paragraph"> <p>The <code>netty4-http</code> component has been renamed to <code>netty-http</code>, and it&#8217;s corresponding component package from <code>org.apache.camel.component.netty4.http</code> to <code>org.apache.camel.component.netty.http</code>. The supported scheme is now <code>netty-http</code>.</p> </div> <div class="paragraph"> <p>The <code>netty4</code> component has been renamed to <code>netty</code>, and it&#8217;s corresponding component package from <code>org.apache.camel.component.netty4</code> to <code>org.apache.camel.component.netty</code>. The supported scheme is now <code>netty</code>.</p> </div> <div class="paragraph"> <p>The <code>quartz2</code> component has been renamed to <code>quartz</code>, and it&#8217;s corresponding component package from <code>org.apache.camel.component.quartz2</code> to <code>org.apache.camel.component.quartz</code>. The supported scheme is now <code>quartz</code>.</p> </div> <div class="paragraph"> <p>The <code>rxjava2</code> component has been renamed to <code>rxjava</code>, and it&#8217;s corresponding component package from <code>org.apache.camel.component.rxjava2</code> to <code>org.apache.camel.component.rxjava</code>.</p> </div> <div class="paragraph"> <p>We have also renamed <code>camel-jetty9</code> to <code>camel-jetty</code>. The supported scheme is now <code>jetty</code>.</p> </div> </div> <div class="sect2"> <h3 id="_hystrix_eip"><a class="anchor" href="#_hystrix_eip"></a>Hystrix EIP</h3> <div class="paragraph"> <p>The Hystrix EIP has been generalized as circuit breaker to allow to plugin other implementations.</p> </div> <div class="paragraph"> <p>In the Java DSL you need to migrate from <code>.hystrix()</code> to <code>.circuitBreaker()</code>. And in XML DSL <code>&lt;hystrix&gt;</code> should be <code>&lt;circuitBreaker&gt;</code>.</p> </div> </div> <div class="sect2"> <h3 id="_using_endpoint_options_with_consumer_prefix"><a class="anchor" href="#_using_endpoint_options_with_consumer_prefix"></a>Using endpoint options with consumer. prefix</h3> <div class="paragraph"> <p>Endpoints with <code>consumer.</code> prefix such as <code>consumer.delay=5000</code> are no longer supported (deprecated in latest Camel 2.x) and you should just use the option without the <code>consumer.</code> prefix, eg <code>delay=5000</code>.</p> </div> </div> <div class="sect2"> <h3 id="_tracing"><a class="anchor" href="#_tracing"></a>Tracing</h3> <div class="paragraph"> <p>A new tracer has been implemented and the old tracer has been removed. The new tracer logs messages at the <code>org.apache.camel.Tracing</code> logger name which is hardcoded. The format of the output is also updated to make it better. The tracer can be customized.</p> </div> <div class="paragraph"> <p>In JMX the <code>BacklogTracer</code> is no longer enabled by default, which you need to enable by setting <code>backlogTracing=true</code> on CamelContext. The backlog tracer and tracer are not the same. The former is used for capturing a backlog of traced messages which you can poll via JMX (needed for 3rd party tooling), where as tracer is writing to the log. Neither of them are enabled by default, and they must be enabled to be in use.</p> </div> </div> <div class="sect2"> <h3 id="_setheader_and_setproperty_in_xml_dsl"><a class="anchor" href="#_setheader_and_setproperty_in_xml_dsl"></a>&lt;setHeader&gt; and &lt;setProperty&gt; in XML DSL</h3> <div class="paragraph"> <p>We have renamed the attribute <code>headerName</code> and <code>propertyName</code> in the XML DSL for the <code>&lt;setHeader&gt;</code> and <code>&lt;setProperty</code>&gt; EIPs, to be just <code>name</code>.</p> </div> <div class="paragraph"> <p>So migrate</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;setHeader headerName="foo"&gt;&lt;simple&gt;Hello ${body}&lt;/simple&gt;&lt;/setHeader&gt;</code></pre> </div> </div> <div class="paragraph"> <p>To</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;setHeader name="foo"&gt;&lt;simple&gt;Hello ${body}&lt;/simple&gt;&lt;/setHeader&gt;</code></pre> </div> </div> <div class="paragraph"> <p>And the same for <code>&lt;setProperty&gt;</code>.</p> </div> </div> <div class="sect2"> <h3 id="_aggregate_eip_in_xml_dsl"><a class="anchor" href="#_aggregate_eip_in_xml_dsl"></a>&lt;aggregate&gt; EIP in XML DSL</h3> <div class="paragraph"> <p>The aggregte EIP have renamed the expressions (not the attributes) for setting correlation size/timeout to avoid a name clash, so migrate:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;completionSize&gt;
  &lt;header&gt;mySize&lt;/header&gt;
&lt;/completionSize&gt;</code></pre> </div> </div> <div class="paragraph"> <p>To</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;completionSizeExpression&gt;
  &lt;header&gt;mySize&lt;/header&gt;
&lt;/completionSizeExpression&gt;</code></pre> </div> </div> <div class="paragraph"> <p>And the same for <code>&lt;completionTimeout&gt;</code>.</p> </div> <div class="sect3"> <h4 id="_camel_cdi"><a class="anchor" href="#_camel_cdi"></a>camel-cdi</h4> <div class="paragraph"> <p>Support for multiple CamelContexts has been removed, and therefore <code>@ContextName</code> has been removed. Instead use standard CDI annotations such as <code>@Named</code> and <code>@ApplicationScoped</code>.</p> </div> </div> </div> <div class="sect2"> <h3 id="_javax_script"><a class="anchor" href="#_javax_script"></a>javax.script</h3> <div class="paragraph"> <p>The <code>camel-script</code> component has been removed and there is no support for javax.script, which is also deprecated in the JDK and to be removed from Java 11 onwards.</p> </div> </div> <div class="sect2"> <h3 id="_attachments_api_on_message"><a class="anchor" href="#_attachments_api_on_message"></a>Attachments API on Message</h3> <div class="paragraph"> <p>The attachments API (javax.activation) has been moved out of <code>org.apache.camel.message</code> into an extension <code>org.apache.camel.attachment.AttachmentMessage</code> from the <code>camel-attachments</code> JAR.</p> </div> <div class="paragraph"> <p>To use this API you can get it via the <code>getMessage</code> method on <code>Exchange</code>:</p> </div> <div class="literalblock"> <div class="content"> <pre>AttachmentMessage am = exchange.getMessage(AttachmentMessage.class);
am.addAttachment("myAtt", new DataHandler(...));</pre> </div> </div> </div> <div class="sect2"> <h3 id="_fault_api_on_message"><a class="anchor" href="#_fault_api_on_message"></a>Fault API on Message</h3> <div class="paragraph"> <p>The fault API has been removed from <code>org.apache.camel.Message</code> as it was only used for SOAP-WS fault message. The <code>camel-cxf</code> and <code>camel-spring-ws</code> components for SOAP-WS has been modified to support fault messages from their components. The option <code>handleFault</code> has also been removed and you now need to turn this on as endpoint or component option on <code>camel-cxf</code> or <code>camel-spring-ws</code>.</p> </div> </div> <div class="sect2"> <h3 id="_getout_on_message"><a class="anchor" href="#_getout_on_message"></a>getOut on Message</h3> <div class="paragraph"> <p>The <code>hasOut</code> and <code>getOut</code> methods on <code>Message</code> has been deprecated in favour of using <code>getMessage</code> instead. (sidenote: The camel-core are still using these methods in a few places to be backwards compatible and rely on this logic as Camel was initially designed with the concepts of IN and OUT message inspired from the JBI and SOAP-WS specifications).</p> </div> </div> <div class="sect2"> <h3 id="_out_message_removed_from_simple_language_and_mock_component"><a class="anchor" href="#_out_message_removed_from_simple_language_and_mock_component"></a>OUT message removed from Simple language and Mock component</h3> <div class="paragraph"> <p>The simple language has removed the OUT message concepts eg <code>${out.body}</code>. Also the mock component has removed OUT message from its assertion API, eg</p> </div> <div class="literalblock"> <div class="content"> <pre>mock.message(0).outBody()...</pre> </div> </div> <div class="paragraph"> <p>Also the <code>@OutHeaders</code> annotation for bean parameter binding has been removed, instead use <code>@Headers</code> instead.</p> </div> </div> <div class="sect2"> <h3 id="_mock_component"><a class="anchor" href="#_mock_component"></a>Mock component</h3> <div class="paragraph"> <p>The <code>mock</code> component has been moved out of <code>camel-core</code> and as part of this work, we had to remove a number of methods on its <em>assertion clause builder</em> that were seldom in use.</p> </div> </div> <div class="sect2"> <h3 id="_activemq"><a class="anchor" href="#_activemq"></a>ActiveMQ</h3> <div class="paragraph"> <p>If you are using the <code>activemq-camel</code> component, then you should migrate to use <code>camel-activemq</code> component, where the component name has changed from <code>org.apache.activemq.camel.component.ActiveMQComponent</code> to <code>org.apache.camel.component.activemq.ActiveMQComponent</code>.</p> </div> </div> <div class="sect2"> <h3 id="_aws"><a class="anchor" href="#_aws"></a>AWS</h3> <div class="paragraph"> <p>The component <code>camel-aws</code> has been split into multiple components:</p> </div> <div class="ulist"> <ul> <li> <p>camel-aws-cw</p> </li> <li> <p>camel-aws-ddb (which contains both ddb and ddbstreams components)</p> </li> <li> <p>camel-aws-ec2</p> </li> <li> <p>camel-aws-ecs</p> </li> <li> <p>camel-aws-eks</p> </li> <li> <p>camel-aws-iam</p> </li> <li> <p>camel-aws-kinesis (which contains both kinesis and kinesis-firehose components)</p> </li> <li> <p>camel-aws-kms</p> </li> <li> <p>camel-aws-lambda</p> </li> <li> <p>camel-aws-mq</p> </li> <li> <p>camel-aws-s3</p> </li> <li> <p>camel-aws-sdb</p> </li> <li> <p>camel-aws-ses</p> </li> <li> <p>camel-aws-sns</p> </li> <li> <p>camel-aws-sqs</p> </li> <li> <p>camel-aws-swf</p> </li> </ul> </div> <div class="paragraph"> <p>So you&#8217;ll have to add explicitly the dependencies for these components. From the OSGi perspective, there is still a <code>camel-aws</code> Karaf feature, which includes all the components features.</p> </div> </div> <div class="sect2"> <h3 id="_fhir"><a class="anchor" href="#_fhir"></a>FHIR</h3> <div class="paragraph"> <p>The camel-fhir component has upgraded it&#8217;s hapi-fhir dependency to 4.1.0; Karaf support has been dropped until the hapi-fhir Karaf features are fixed and released. The default FHIR version has been changed to R4. Therefore if DSTU3 is desired it has to be explicitly set.</p> </div> </div> <div class="sect2"> <h3 id="_kafka"><a class="anchor" href="#_kafka"></a>Kafka</h3> <div class="paragraph"> <p>The <code>camel-kafka</code> component has removed the options <code>bridgeEndpoint</code> and <code>circularEndpointDetection</code> as this is no longer needed as the component is acting as briding would work on Camel 2.x. In other words <code>camel-kafka</code> will send messages to the topic from the endpoint uri. To override this use the <code>KafkaConstants.OVERRIDE_TOPIC</code> header with the new topic. See more details in the <code>camel-kafka</code> component documentation.</p> </div> </div> <div class="sect2"> <h3 id="_telegram"><a class="anchor" href="#_telegram"></a>Telegram</h3> <div class="paragraph"> <p>The <code>camel-telegram</code> component has moved the authorization token from uri-path to a query parameter instead, eg migrate</p> </div> <div class="literalblock"> <div class="content"> <pre>telegram:bots/myTokenHere</pre> </div> </div> <div class="paragraph"> <p>to</p> </div> <div class="literalblock"> <div class="content"> <pre>telegram:bots?authorizationToken=myTokenHere</pre> </div> </div> </div> <div class="sect2"> <h3 id="_jmx"><a class="anchor" href="#_jmx"></a>JMX</h3> <div class="paragraph"> <p>If you run Camel standalone with just <code>camel-core</code> as a dependency, and you want JMX enabled out of the box, then you need to add <code>camel-management</code> as a dependency.</p> </div> <div class="paragraph"> <p>For using <code>ManagedCamelContext</code> you now need to get this an extension from <code>CamelContext</code> as follows:</p> </div> <div class="literalblock"> <div class="content"> <pre>ManagedCamelContext managed = camelContext.getExtension(ManagedCamelContext.class);</pre> </div> </div> </div> <div class="sect2"> <h3 id="_xslt"><a class="anchor" href="#_xslt"></a>XSLT</h3> <div class="paragraph"> <p>The XSLT component has moved out of camel-core into <code>camel-xslt</code> and <code>camel-xslt-saxon</code>. The component is separated so <code>camel-xslt</code> is for using the JDK XSTL engine (Xalan), and <code>camel-xslt-saxon</code> is when you use Saxon. This means that you should use <code>xslt</code> and <code>xslt-saxon</code> as component name in your Camel endpoint URIs. If you are using XSLT aggregation strategy, then use <code>org.apache.camel.component.xslt.saxon.XsltSaxonAggregationStrategy</code> for Saxon support. And use <code>org.apache.camel.component.xslt.saxon.XsltSaxonBuilder</code> for Saxon support if using xslt builder. Also notice that <code>allowStax</code> is also only supported in <code>camel-xslt-saxon</code> as this is not supported by the JDK XSLT.</p> </div> </div> <div class="sect2"> <h3 id="_configuring_global_options_on_camelcontext"><a class="anchor" href="#_configuring_global_options_on_camelcontext"></a>Configuring global options on CamelContext</h3> <div class="paragraph"> <p>In Camel 2.x we have deprecated <code>getProperties</code> on <code>CamelContext</code> in favour of <code>getGlobalOptions</code>, so you should migrate to:</p> </div> <div class="literalblock"> <div class="content"> <pre>context.getGlobalOptions().put("CamelJacksonEnableTypeConverter", "true");
context.getGlobalOptions().put("CamelJacksonTypeConverterToPojo", "true");</pre> </div> </div> <div class="paragraph"> <p>and in XML:</p> </div> <div class="literalblock"> <div class="content"> <pre>&lt;globalOptions&gt;
  &lt;globalOption key="CamelJacksonEnableTypeConverter" value="true"/&gt;
  &lt;globalOption key="CamelJacksonTypeConverterToPojo" value="true"/&gt;
&lt;/globalOptions&gt;</pre> </div> </div> </div> <div class="sect2"> <h3 id="_main_class_2"><a class="anchor" href="#_main_class_2"></a>Main class</h3> <div class="paragraph"> <p>The <code>Main</code> class from <code>camel-core</code>, <code>camel-spring</code> and <code>camel-cdi</code> has been modified to only support a single <code>CamelContext</code> which was really its intention, but there was some old crufty code for multiple Camels. The method <code>getCamelContextMap</code> has been removed, and there is just a <code>getCamelContext</code> method now.</p> </div> </div> <div class="sect2"> <h3 id="_pojo_annotations"><a class="anchor" href="#_pojo_annotations"></a>POJO annotations</h3> <div class="paragraph"> <p>The <code>ref</code> attribute on <code>@Consume</code>, <code>@Produce</code> and <code>@EndpointInject</code> has been removed. Instead use the ref component in the <code>uri</code> attribute, eg <code>uri = "ref:myName"</code>.</p> </div> <div class="paragraph"> <p>The uri attribute has been deprecated, instead use value, which allows a shorthand style, from using <code>@Consume(uri = "jms:cheese")</code> to <code>@Consume("jms:cheese")</code>.</p> </div> </div> <div class="sect2"> <h3 id="_routes_with_multiple_inputs"><a class="anchor" href="#_routes_with_multiple_inputs"></a>Routes with multiple inputs</h3> <div class="paragraph"> <p>In Camel 2.x you could have 2 or more inputs to Camel routes, however this was not supported in all use-cases in Camel, and this functionality is seldom in use. This has also been deprecated in Camel 2.x. In Camel 3 we have removed the remaining code for specifying multiple inputs to routes, and its now only possible to specify exactly only 1 input to a route.</p> </div> </div> <div class="sect2"> <h3 id="_crypto_component"><a class="anchor" href="#_crypto_component"></a>Crypto Component</h3> <div class="paragraph"> <p>The default signature algorithm has changed for the Crypto (JCE) Component - it is now SHA256withRSA (before it was SHA1WithDSA).</p> </div> </div> <div class="sect2"> <h3 id="_crypto_dataformat"><a class="anchor" href="#_crypto_dataformat"></a>Crypto DataFormat</h3> <div class="paragraph"> <p>The default encryption algorithm has changed for the Crypto (JCE) DataFormat - it is now required to set a value for it (meaning that the default is null). Before the default value was "DES/CBC/PKCS5Padding".</p> </div> </div> <div class="sect2"> <h3 id="_json_dataformat"><a class="anchor" href="#_json_dataformat"></a>JSon DataFormat</h3> <div class="paragraph"> <p>The default JSon library with the JSon dataformat has changed from <code>XStream</code> to <code>Jackson</code>.</p> </div> </div> <div class="sect2"> <h3 id="_shiro_component"><a class="anchor" href="#_shiro_component"></a>Shiro Component</h3> <div class="paragraph"> <p>The default encryption key for the Shiro component has been removed, so now it is mandatory to supply the key/passphrase.</p> </div> </div> <div class="sect2"> <h3 id="_xml_security_component"><a class="anchor" href="#_xml_security_component"></a>XML Security Component</h3> <div class="paragraph"> <p>The default signature algorithm has changed for the XML Security Component - it is now RSA-SHA256 (before it was RSA-SHA1).</p> </div> </div> <div class="sect2"> <h3 id="_xml_security_dataformat"><a class="anchor" href="#_xml_security_dataformat"></a>XML Security DataFormat</h3> <div class="paragraph"> <p>The default encryption key for the XML Security DataFormat has been removed, so it is now mandatory to supply the key String/bytes if you are using symmetric encryption. This means that some of the methods are removed that used the XMLSecurityDataFormat without specifying a key.</p> </div> <div class="paragraph"> <p>In addition, the default symmetric encryption algorithm has changed from Triple DES to AES-256 in GCM mode.</p> </div> </div> <div class="sect2"> <h3 id="_zip_and_gzip_dataformat"><a class="anchor" href="#_zip_and_gzip_dataformat"></a>Zip and GZip DataFormat</h3> <div class="paragraph"> <p>The zip and gzip dataformat has been renamed to zipdeflater and gzipdeflater as they are for deflating using the zip/gzip compression; and not for working with zip/gzip files. Instead use camel-zipfile dataformat. Also these dataformats has been moved out of <code>camel-core</code> into <code>camel-zip-deflater</code> JAR. The XML and Java DSL has also been modified so you should migrate there too to use their new names. And if you use these data formats you need to add the <code>camel-zip-deflater</code> as dependency as they are no longer included as transitive dependency with <code>camel-core</code>.</p> </div> </div> <div class="sect2"> <h3 id="_simple_language"><a class="anchor" href="#_simple_language"></a>Simple language</h3> <div class="paragraph"> <p>The functionality to change the simple language tokens for start/end functions has been removed. The default tokens with <code>${xxx}</code> and <code>$simple{xxx}</code> is now hardcoded (optimized). The functionality to change these tokens was never really in use and would only confuse Camel users if a new syntax are in use.</p> </div> </div> <div class="sect2"> <h3 id="_moved_apis"><a class="anchor" href="#_moved_apis"></a>Moved APIs</h3> <div class="paragraph"> <p>The following API changes may affect your existing Camel applications, which needs to be migrated.</p> </div> <div class="sect3"> <h4 id="_camelcontext"><a class="anchor" href="#_camelcontext"></a>CamelContext</h4> <div class="paragraph"> <p>The methods on <code>CamelContext</code> that are related to catalog has been moved into a new <code>CatalogCamelContext</code> interface, which you can access by adapting:</p> </div> <div class="literalblock"> <div class="content"> <pre>CatalogCamelContext ccc = context.adapt(CatalogCamelContext.class);</pre> </div> </div> <div class="paragraph"> <p>The <code>loadRouteDefinitions</code> and <code>loadRestDefinitions</code> on <code>ModelCamelContext</code> has been changed to <code>addRouteDefinitions</code> and <code>addRestDefinitions</code> to be aligned with the other methods. You can find loader methods on the <code>ModelHelper</code> utility class.</p> </div> </div> <div class="sect3"> <h4 id="_modelcamelcontext"><a class="anchor" href="#_modelcamelcontext"></a>ModelCamelContext</h4> <div class="paragraph"> <p>If you need to access the routes model (such as <code>addRouteDefinitions</code>, etc), then you need to adapt form CamelContext as shown:</p> </div> <div class="literalblock"> <div class="content"> <pre>ModelCamelContext mcc = camelContext.adapt(ModelCamelContext.class);</pre> </div> </div> </div> <div class="sect3"> <h4 id="_extended_camelcontext"><a class="anchor" href="#_extended_camelcontext"></a>Extended CamelContext</h4> <div class="paragraph"> <p>The APIs on <code>CamelContext</code> has been reduced a bit to focus on relevant API for Camel end users. The advanced use-cases and for SPI and component developers, then some of the APIs from <code>CamelContext</code> has been moved to <code>ExtendedCamelContext</code> which you can access via adapt:</p> </div> <div class="literalblock"> <div class="content"> <pre>ExtendedCamelContext ecc = context.adapt(ExtendedCamelContext.class);</pre> </div> </div> </div> </div> <div class="sect2"> <h3 id="_checked_vs_unchecked_exceptions"><a class="anchor" href="#_checked_vs_unchecked_exceptions"></a>Checked vs unchecked exceptions</h3> <div class="paragraph"> <p>Most of the Camel exception classes has been migrated to be unchecked (eg extends <code>RuntimeException</code>).</p> </div> <div class="paragraph"> <p>Also the lifecycle of the <code>start</code>, <code>stop</code> and <code>suspend</code>, <code>resume</code> methods on <code>Service</code> and <code>SuspendableService</code> has been changed to not throw checked exceptions.</p> </div> <div class="sect3"> <h4 id="_generic_information"><a class="anchor" href="#_generic_information"></a>Generic Information</h4> <div class="paragraph"> <p>The class <code>SimpleRegistry</code> is moved from <code>org.apache.camel.impl</code> to <code>org.apache.camel.support</code>. Also you should favour using the <code>org.apache.camel.support.DefaultRegistry</code> instead. Also you should use the <code>bind</code> operation instead of <code>put</code> to add entries to the <code>SimpleRegistry</code> or <code>DefaultRegistry</code>.</p> </div> <div class="paragraph"> <p>The class <code>CompositeRegistry</code> and <code>PropertyPlaceholderDelegateRegistry</code> has been deleted. Instead use <code>DefaultRegistry</code>.</p> </div> <div class="paragraph"> <p>The classes from <code>org.apache.camel.impl</code> that was intended to support Camel developers building custom components has been moved out of <code>camel-core</code> into <code>camel-support</code> into the <code>org.apache.camel.support</code> package. If you have built custom Camel components that may have used some of these APIs you would then need to migrate. A large part of classes from the <code>org.apache.camel.impl</code> package have been moved to the <code>org.apache.camel.impl.engine</code> package in <code>camel-base</code>.</p> </div> <div class="paragraph"> <p>All the classes in <code>org.apache.camel.util.component</code> has been moved from the camel-core JAR to the package <code>org.apache.camel.support.component</code> in the <code>camel-support</code> JAR.</p> </div> <div class="paragraph"> <p>The method <code>xslt</code> has been removed from <code>org.apache.camel.builder.AggregationStrategies</code>. Instead use the <code>XsltAggregationStrategy</code> from <code>camel-xslt</code> JAR directly.</p> </div> <div class="paragraph"> <p>The getter/setter for <code>bindingMode</code> on <code>RestEndpoint</code> has been changed to use type <code>org.apache.camel.spi.RestConfiguration.RestBindingMode</code> from <code>camel-api</code> JAR. Instead of using this type class you can also call the setter method with string type instead.</p> </div> <div class="paragraph"> <p>The <code>activemq-camel</code> component has been moved from ActiveMQ into Camel and it is now called <code>camel-activemq</code>, the package has been changed accordingly to <code>org.apache.camel.component.activemq</code></p> </div> <div class="paragraph"> <p>The method <code>includeRoutes</code> on <code>RouteBuilder</code> has been removed. This functionality was not fully in use and was deprecated in Camel 2.x.</p> </div> <div class="paragraph"> <p>The exception <code>PredicateValidationException</code> has been moved from package <code>org.apache.camel.processor.validation</code> to <code>org.apache.camel.support.processor.validation.PredicateValidationException</code>.</p> </div> <div class="paragraph"> <p>The class <code>org.apache.camel.util.toolbox.AggregationStrategies</code> has been moved to <code>org.apache.camel.builder.AggregationStrategies</code>.</p> </div> <div class="paragraph"> <p>The class <code>org.apache.camel.processor.aggregate.AggregationStrategy</code> has been moved to <code>org.apache.camel.AggregationStrategy</code>.</p> </div> <div class="paragraph"> <p>The class <code>org.apache.camel.processor.loadbalancer.SimpleLoadBalancerSupport</code> has been removed, instead use <code>org.apache.camel.processor.loadbalancer.LoadBalancerSupport</code>.</p> </div> <div class="paragraph"> <p>The class <code>org.apache.camel.management.JmxSystemPropertyKeys</code> has been moved to <code>org.apache.camel.api.management.JmxSystemPropertyKeys</code>.</p> </div> <div class="paragraph"> <p>The class <code>org.apache.camel.builder.xml.XPathBuilder</code> has been moved to <code>org.apache.camel.language.xpath.XPathBuilder</code> and in the <code>camel-xpath</code> JAR.</p> </div> <div class="paragraph"> <p>The annotation <code>org.apache.camel.language.XPath</code> has been moved to <code>org.apache.camel.language.xpath.XPath</code> and in the <code>camel-xpath</code> JAR.</p> </div> <div class="paragraph"> <p>The exception <code>org.apache.camel.builder.xml.InvalidXPathExpression</code> has been renamed to <code>org.apache.camel.language.xpath.InvalidXPathException</code> and in the <code>camel-xpath</code> JAR.</p> </div> <div class="paragraph"> <p>The annotation <code>org.apache.camel.language.Bean</code> has been moved to <code>org.apache.camel.language.bean.Bean</code> and in the <code>camel-bean</code> JAR.</p> </div> <div class="paragraph"> <p>The annotation <code>org.apache.camel.language.Simple</code> has been moved to <code>org.apache.camel.language.simple.Simple</code>.</p> </div> <div class="paragraph"> <p>The annotation <code>org.apache.camel.Constant</code> has been removed, use <code>@Simple</code> instead.</p> </div> <div class="paragraph"> <p>The annotation <code>org.apache.camel.language.SpEL</code> has been moved to <code>org.apache.camel.language.spel.SpEL</code> and in the <code>camel-spring</code> JAR.</p> </div> <div class="paragraph"> <p>The annotation <code>org.apache.camel.InvokeOnHeader</code> and <code>org.apache.camel.InvokeOnHeaders</code> has been moved to the <code>org.apache.camel.spi</code> package.</p> </div> <div class="paragraph"> <p>The class <code>OutputStreamBuilder</code> has been moved from package <code>org.apache.camel.converter.stream</code> to <code>org.apache.camel.support.builder</code> package.</p> </div> <div class="paragraph"> <p>Rename various APIs in camel-core to fix the typo <code>chiper</code> to <code>cipher</code>.</p> </div> <div class="paragraph"> <p>The classes <code>ReloadStrategySupport</code> and <code>FileWatcherReloadStrategy</code> has been removed.</p> </div> <div class="paragraph"> <p>The <code>MessageHistoryFactory</code> interface has some options to filter and copy the message and a slight change in its API.</p> </div> <div class="paragraph"> <p>Removed <code>TypeConverterAware</code> as you should instead use <code>Exchange</code> as parameter to the type converter method.</p> </div> <div class="paragraph"> <p>The <code>Component</code> and <code>DataFormat</code> interfaces now extend <code>Service</code> as components and data formats should also have service contract to manage their lifecycle. The default base classes already implements these interfaces.</p> </div> <div class="paragraph"> <p>The class <code>FactoryFinder</code> has changed its API to use <code>Optional</code> as return types instead of throwing checked <code>FactoryNotFoundException</code> or <code>ClassNotFoundException</code> etc.</p> </div> <div class="paragraph"> <p>The option <code>resolvePropertyPlaceholders</code> on all the components has been removed, as property placeholders is already supported via Camel Main, Camel Spring Boot and other means.</p> </div> </div> </div> <div class="sect2"> <h3 id="_camel_test"><a class="anchor" href="#_camel_test"></a>camel-test</h3> <div class="paragraph"> <p>If you are using camel-test and override the <code>createRegistry</code> method, for example to register beans from the <code>JndiRegisty</code> class, then this is no longer necessary, and instead you should just use the <code>bind</code> method from the <code>Registry</code> API which you can call directly from <code>CamelContext</code>, such as:</p> </div> <div class="literalblock"> <div class="content"> <pre>context.getRegistry().bind("myId", myBean);</pre> </div> </div> </div> <div class="sect2"> <h3 id="_controlling_routes"><a class="anchor" href="#_controlling_routes"></a>Controlling routes</h3> <div class="paragraph"> <p>The <code>startRoute</code>, <code>stopRoute</code>, <code>suspendRoute</code>, <code>resumeRoute</code>, <code>getRouteStatus</code>, and other related methods on <code>CamelContext</code> has been moved to the <code>RouteController</code> as shown below:</p> </div> <div class="literalblock"> <div class="content"> <pre>context.getRouteController().startRoute("myRoute");</pre> </div> </div> </div> <div class="sect2"> <h3 id="_jmx_events"><a class="anchor" href="#_jmx_events"></a>JMX events</h3> <div class="paragraph"> <p>All the events from package <code>org.apache.camel.management.event</code> has been moved to the class <code>org.apache.camel.spi.CamelEvent</code> as sub-classes, for example the event for CamelContext started would be <code>CamelEvent.CamelContextStartedEvent</code>.</p> </div> </div> <div class="sect2"> <h3 id="_advicewith"><a class="anchor" href="#_advicewith"></a>AdviceWith</h3> <div class="paragraph"> <p>Testing using <code>adviceWith</code> currently needs to be changed from:</p> </div> <div class="literalblock"> <div class="content"> <pre>context.getRouteDefinition("start").adviceWith(camelContext, new AdviceWithRouteBuilder() {
  ...
}</pre> </div> </div> <div class="paragraph"> <p>to using style:</p> </div> <div class="literalblock"> <div class="content"> <pre>ModelCamelContext mcc = camelContext.adapt(ModelCamelContext.class);
RouteReifier.adviceWith(mcc.getRouteDefinition("start"), mcc, new AdviceWithRouteBuilder() {
  ...
}</pre> </div> </div> <div class="paragraph"> <p>However its even easier using lambda style with <code>AdviceWithRouteBuilder</code> directly:</p> </div> <div class="literalblock"> <div class="content"> <pre>AdviceWithRouteBuilder.adviceWith(context, "myRoute", a -&gt; {
  a.replaceFromWith("direct:start");
}</pre> </div> </div> </div> <div class="sect2"> <h3 id="_generic_classes"><a class="anchor" href="#_generic_classes"></a>Generic Classes</h3> <div class="paragraph"> <p>The class <code>JNDIContext</code> has been moved from <code>org.apache.camel.util.jndi.JNDIContext</code> in the camel-core JAR to <code>org.apache.camel.support.jndi.JNDIContext</code> and moved to the <code>camel-support</code> JAR.</p> </div> </div> <div class="sect2"> <h3 id="_eips"><a class="anchor" href="#_eips"></a>EIPs</h3> <div class="paragraph"> <p>The <code>circuitBreaker</code> load-balancer EIP was deprecated in Camel 2.x, and has been removed. Instead use Hystrix EIP as the load-balancer.</p> </div> <div class="paragraph"> <p>The class <code>ThreadPoolRejectedPolicy</code> has been moved from <code>org.apache.camel.ThreadPoolRejectedPolicy</code> to <code>org.apache.camel.util.concurrent.ThreadPoolRejectedPolicy</code>.</p> </div> </div> <div class="sect2"> <h3 id="_languages"><a class="anchor" href="#_languages"></a>Languages</h3> <div class="paragraph"> <p>The simple language <code>property</code> function was deprecated in Camel 2.x and has been removed. Use <code>exchangeProperty</code> as function name.</p> </div> <div class="paragraph"> <p>The terser language has been renamed from terser to hl7terser.</p> </div> </div> <div class="sect2"> <h3 id="_jsse"><a class="anchor" href="#_jsse"></a>JSSE</h3> <div class="paragraph"> <p>The classes from <code>org.apache.camel.util.jsse</code> has been moved to <code>org.apache.camel.support.jsse</code>.</p> </div> </div> <div class="sect2"> <h3 id="_helpers_and_support"><a class="anchor" href="#_helpers_and_support"></a>Helpers and support</h3> <div class="paragraph"> <p>The class <code>AsyncProcessorHelper</code> has been moved from <code>org.apache.camel.util.AsyncProcessorHelper</code> in the camel-core JAR to <code>org.apache.camel.support.AsyncProcessorHelper</code> and moved to the <code>camel-support</code> JAR.</p> </div> <div class="paragraph"> <p>The class <code>AsyncProcessorConverterHelper</code> has been moved from <code>org.apache.camel.util.AsyncProcessorConverterHelper</code> in the camel-core JAR to <code>org.apache.camel.support.AsyncProcessorConverterHelper</code> and moved to the <code>camel-support</code> JAR.</p> </div> <div class="paragraph"> <p>The class <code>CamelContextHelper</code> has been moved from <code>org.apache.camel.util.CamelContextHelper</code> in the camel-core JAR to <code>org.apache.camel.support.CamelContextHelper</code> and moved to the <code>camel-support</code> JAR.</p> </div> <div class="paragraph"> <p>The class <code>EndpointHelper</code> has been moved from <code>org.apache.camel.util.EndpointHelper</code> in the camel-core JAR to <code>org.apache.camel.support.EndpointHelper</code> and moved to the <code>camel-support</code> JAR.</p> </div> <div class="paragraph"> <p>The class <code>EventHelper</code> has been moved from <code>org.apache.camel.util.EventHelper</code> in the camel-core JAR to <code>org.apache.camel.support.EventHelper</code> and moved to the <code>camel-support</code> JAR.</p> </div> <div class="paragraph"> <p>The class <code>ExchangeHelper</code> has been moved from <code>org.apache.camel.util.ExchangeHelper</code> in the camel-core JAR to <code>org.apache.camel.support.ExchangeHelper</code> and moved to the <code>camel-support</code> JAR.</p> </div> <div class="paragraph"> <p>The class <code>GZIPHelper</code> has been moved from <code>org.apache.camel.util.GZIPHelper</code> in the camel-core JAR to <code>org.apache.camel.support.GZIPHelper</code> and moved to the <code>camel-support</code> JAR.</p> </div> <div class="paragraph"> <p>The class <code>JsonSchemaHelper</code> has been moved from <code>org.apache.camel.util.JsonSchemaHelper</code> in the camel-core JAR to <code>org.apache.camel.support.JsonSchemaHelper</code> and moved to the <code>camel-support</code> JAR.</p> </div> <div class="paragraph"> <p>The class <code>MessageHelper</code> has been moved from <code>org.apache.camel.util.MessageHelper</code> in the camel-core JAR to <code>org.apache.camel.support.MessageHelper</code> and moved to the <code>camel-support</code> JAR.</p> </div> <div class="paragraph"> <p>The class <code>ObjectHelper</code> has been moved from <code>org.apache.camel.util.ObjectHelper</code> in the camel-core JAR and splitted into <code>org.apache.camel.support.ObjectHelper</code> and moved to the <code>camel-support</code> JAR and into <code>org.apache.camel.util.ObjectHelper</code> and moved to the <code>camel-util</code> JAR. This has been done to isolate the methods using <code>camel-api</code> JAR: those method are in the <code>camel-support</code> JAR, the other in the <code>camel-util</code> JAR.</p> </div> <div class="paragraph"> <p>The class <code>PlatformHelper</code> has been moved from <code>org.apache.camel.util.PlatformHelper</code> in the camel-core JAR to <code>org.apache.camel.support.PlatformHelper</code> and moved to the <code>camel-support</code> JAR.</p> </div> <div class="paragraph"> <p>The class <code>PredicateAssertHelper</code> has been moved from <code>org.apache.camel.util.PredicateAssertHelper</code> in the camel-core JAR to <code>org.apache.camel.support.PredicateAssertHelper</code> and moved to the <code>camel-support</code> JAR.</p> </div> <div class="paragraph"> <p>The class <code>ResolverHelper</code> has been moved from <code>org.apache.camel.util.ResolverHelper</code> in the camel-core JAR to <code>org.apache.camel.support.ResolverHelper</code> and moved to the <code>camel-support</code> JAR.</p> </div> <div class="paragraph"> <p>The class <code>ResourceHelper</code> has been moved from <code>org.apache.camel.util.ResourceHelper</code> in the camel-core JAR to <code>org.apache.camel.support.ResourceHelper</code> and moved to the <code>camel-support</code> JAR.</p> </div> <div class="paragraph"> <p>The class <code>RestProducerFactoryHelper</code> has been moved from <code>org.apache.camel.spi.RestProducerFactoryHelper</code> in the camel-core JAR to <code>org.apache.camel.support.RestProducerFactoryHelper</code> and moved to the <code>camel-support</code> JAR.</p> </div> <div class="paragraph"> <p>The class <code>ServiceHelper</code> has been moved from <code>org.apache.camel.util.ServiceHelper</code> in the camel-core JAR to <code>org.apache.camel.support.service.ServiceHelper</code> and moved to the <code>camel-api</code> JAR.</p> </div> <div class="paragraph"> <p>The class <code>UnitOfWorkHelper</code> has been moved from <code>org.apache.camel.util.UnitOfWorkHelper</code> in the camel-core JAR to <code>org.apache.camel.support.UnitOfWorkHelper</code> and moved to the <code>camel-support</code> JAR.</p> </div> </div> <div class="sect2"> <h3 id="_idempotent_repositories"><a class="anchor" href="#_idempotent_repositories"></a>Idempotent Repositories</h3> <div class="paragraph"> <p>The class <code>FileIdempotentRepository</code> has been moved from <code>org.apache.camel.processor.idempotent.FileIdempotentRepository</code> in the camel-core JAR to <code>org.apache.camel.support.processor.idempotent.FileIdempotentRepository</code> and moved to the <code>camel-support</code> JAR.</p> </div> <div class="paragraph"> <p>The class <code>MemoryIdempotentRepository</code> has been moved from <code>org.apache.camel.processor.idempotent.MemoryIdempotentRepository</code> in the camel-core JAR to <code>org.apache.camel.support.processor.idempotent.MemoryIdempotentRepository</code> and moved to the <code>camel-support</code> JAR.</p> </div> </div> <div class="sect2"> <h3 id="_route_policies"><a class="anchor" href="#_route_policies"></a>Route Policies</h3> <div class="paragraph"> <p>The class <code>org.apache.camel.impl.RoutePolicySupport</code> has been moved to <code>org.apache.camel.support.RoutePolicySupport</code>. The return type from <code>startConsumer</code> and <code>stopConsumer</code> has been changed from <code>boolean</code> to <code>void</code> as they always returned <code>true</code> before.</p> </div> <div class="paragraph"> <p>The class <code>org.apache.camel.impl.ThrottlingInflightRoutePolicy</code> has been moved to <code>org.apache.camel.throttling.ThrottlingInflightRoutePolicy</code></p> </div> </div> <div class="sect2"> <h3 id="_aggregation"><a class="anchor" href="#_aggregation"></a>Aggregation</h3> <div class="paragraph"> <p>The class <code>XsltAggregationStrategy</code> has been moved from <code>org.apache.camel.builder.XsltAggregationStrategy</code> in the camel-core JAR to <code>org.apache.camel.component.xslt.XsltAggregationStrategy</code> and moved to the <code>camel-xslt</code> JAR.</p> </div> <div class="paragraph"> <p>When using the option <code>groupedExchange</code> on the aggregator EIP then the output of the aggregation is now longer also stored in the exchange property <code>Exchange.GROUPED_EXCHANGE</code>. This behaviour was already deprecated from Camel 2.13 onwards.</p> </div> </div> <div class="sect2"> <h3 id="_fallback_type_converters"><a class="anchor" href="#_fallback_type_converters"></a>Fallback type converters</h3> <div class="paragraph"> <p>The <code>@FallbackConverter</code> annotation has been removed, and you should use <code>@Converter(fallback = true)</code> instead. Also you can set <code>@Converter(generateLoader = true)</code> on the converter class to allow Camel to generate source code for loading type converters in a faster way.</p> </div> </div> <div class="sect2"> <h3 id="_removed_jmx_apis_for_explaining_eips_components_etc"><a class="anchor" href="#_removed_jmx_apis_for_explaining_eips_components_etc"></a>Removed JMX APIs for explaining EIPs, components, etc.</h3> <div class="paragraph"> <p>The APIs that could find, and explain EIPs, components, endpoints etc has been removed. These APIs have little value for production runtimes, and you can obtain this kind of information via the <code>camel-catalog</code>. Also the related Camel Karaf commands that used these APIs has been removed.</p> </div> </div> <div class="sect2"> <h3 id="_other_changes"><a class="anchor" href="#_other_changes"></a>Other changes</h3> <div class="paragraph"> <p>The default for use breadcrumbs has been changed from <code>true</code> to <code>false</code>.</p> </div> <div class="paragraph"> <p>The <code>ProducerTemplate</code> and <code>ConsumerTemplate</code> now fails when being used, if <code>CamelContext</code> has not been started first.</p> </div> </div> <div class="sect2"> <h3 id="_xml_dsl_migration"><a class="anchor" href="#_xml_dsl_migration"></a>XML DSL Migration</h3> <div class="paragraph"> <p>The XML DSL has been changed slightly.</p> </div> <div class="paragraph"> <p>The custom load balancer EIP has changed from <code>&lt;custom&gt;</code> to <code>&lt;customLoadBalancer&gt;</code></p> </div> <div class="paragraph"> <p>The XMLSecurity data format has renamed the attribute <code>keyOrTrustStoreParametersId</code> to <code>keyOrTrustStoreParametersRef</code> in the <code>&lt;secureXML&gt;</code> tag.</p> </div> <div class="paragraph"> <p>The <code>&lt;zipFile&gt;</code> data format has been renamed to <code>&lt;zipfile&gt;</code>.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="_migrating_camel_maven_plugins"><a class="anchor" href="#_migrating_camel_maven_plugins"></a>Migrating Camel Maven Plugins</h2> <div class="sectionbody"> <div class="paragraph"> <p>The <code>camel-maven-plugin</code> has been split up into two maven plugins:</p> </div> <div class="ulist"> <ul> <li> <p>camel-maven-plugin</p> </li> <li> <p>camel-report-maven-plugin</p> </li> </ul> </div> <div class="paragraph"> <p>The former has the <code>run</code> goal, which is intended for quickly running Camel applications standalone.</p> </div> <div class="paragraph"> <p>The <code>camel-report-maven-plugin</code> has the <code>validate</code> and <code>route-coverage</code> goals which is used for generating reports of your Camel projects such as validating Camel endpoint URIs and route coverage reports, etc.</p> </div> </div> </div> <div class="sect1"> <h2 id="_known_issues"><a class="anchor" href="#_known_issues"></a>Known Issues</h2> <div class="sectionbody"> <div class="paragraph"> <p>There is an issue with MDC logging and correctly transferring the Camel breadcrumb id&#8217;s under certain situations with routing over asynchronous endpoints, due to the internal routing engine refactorings. This change also affects the <code>camel-zipkin</code> component, which may not correctly transfer the span id&#8217;s when using MDC logging as well.</p> </div> </div> </div> </article> </main> </div> <footer> <div class="footer"> <figure class="logo"> <img src="../../_/img/logo-d.svg" class="logo-small mt-60" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <dl> <dt>Overview</dt> <dd><a href="../../blog/">Blog</a></dd> <dd><a href="../../components/latest/">Components</a></dd> <dd><a href="../../download/">Download</a></dd> <dd><a href="../../manual/latest/getting-started.html">Getting started</a></dd> <dd><a href="../../manual/latest/faq.html">FAQ</a></dd> </dl> <dl> <dt>Community</dt> <dd><a href="../../community/support/">Support</a></dd> <dd><a href="../../manual/latest/contributing.html">Contributing</a></dd> <dd><a href="../../community/user-stories/">User stories</a></dd> <dd><a href="../../community/articles/">Articles</a></dd> <dd><a href="../../community/books/">Books</a></dd> <dd><a href="../../community/team/">Team</a></dd> </dl> <dl> <dt>About</dt> <dd><a href="../../acknowledgments/">Acknowledgments</a> </dd><dd><a target="_blank" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p> &copy; 2004-2020 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> </div> </footer> <script src="../../_/js/site-f4f4dbc142.js"></script> <script async src="../../_/js/vendor/highlight-54157f17f1.js"></script> <script async src="../../_/js/vendor/svg4everybody-195d47ce7d.js"></script> <script type="application/ld+json"> {
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "Apache Camel",
  "url": "https://camel.apache.org",
  "sameAs": [
     "https://twitter.com/ApacheCamel"
  ],
  "logo": "../../_/img/logo-d.svg",
  "description": "Apache Camel  is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL."
} </script> <script type="application/ld+json"> { 
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Apache Camel",
        "item": "https://camel.apache.org"
        },
        {
        "@type": "ListItem",
        "position": 2,
        "name": "User manual",
        "item": "https://camel.apache.org/manual/latest/index.html"
        },
        {
        "@type": "ListItem",
        "position": 3,
        "name": "Camel 2.x to 3.0 Migration Guide","item": "https://camel.apache.org/manual/latest/camel-3-migration-guide.html"}
        ]
    } </script> </body> </html> 