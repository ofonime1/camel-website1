<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Apache Camel 3.x Upgrade Guide - Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/manual/latest/camel-3x-upgrade-guide.html"> <meta name="generator" content="Antora 2.1.0"> <link rel="stylesheet" href="../../_/css/site-b8bf3d878c.css"> <meta name="application-name" content="Apache Camel"> <link rel="manifest" href="../../site.webmanifest"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../favicon-128.png" sizes="128x128"> </head> <body class="article"> <header class="header"> <nav class="navbar"> <div class="navbar-brand"> <a class="nav-logo" href="../.."><span>Apache Camel</span></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item" href="../../blog/">Blog</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Projects</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../projects/camel-k/">Camel K</a> <a class="navbar-item" href="../../projects/camel-quarkus/">Camel Quarkus</a> <a class="navbar-item" href="../../projects/camel-kafka-connector/">Camel Kafka Connector</a> <a class="navbar-item" href="../../camel-spring-boot/latest/">Camel Spring Boot</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Documentation</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../manual/latest/getting-started.html">Getting started</a> <a class="navbar-item" href="../../manual/latest/">User manual</a> <a class="navbar-item" href="../../components/latest/">Component reference</a> <a class="navbar-item" href="../../camel-k/latest/">Camel K</a> <a class="navbar-item" href="../../camel-quarkus/latest/">Camel Quarkus</a> <a class="navbar-item" href="../../camel-kafka-connector/latest/">Camel Kafka Connector</a> <a class="navbar-item" href="../../manual/latest/enterprise-integration-patterns.html">Enterprise Integration Patterns</a> <a class="navbar-item" href="../../manual/latest/camel-3-migration-guide.html">Camel 2.x to 3.0 Migration Guide</a> <a class="navbar-item" href="../../manual/latest/camel-3x-upgrade-guide.html">Camel 3.x Upgrade Guide</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Community</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../community/support/">Support</a> <a class="navbar-item" href="../../manual/latest/contributing.html">Contributing</a> <a class="navbar-item" href="../../community/user-stories/">User stories</a> <a class="navbar-item" href="../../community/articles/">Articles</a> <a class="navbar-item" href="../../community/books/">Books</a> <a class="navbar-item" href="../../community/team/">Team</a> </div> </div> <a class="navbar-item" href="../../download/">Download</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">About</a> <div class="navbar-dropdown"> <a class="navbar-item" href="https://www.apache.org/events/current-event.html">Apache events</a> <a class="navbar-item" href="https://www.apache.org/licenses/">License</a> <a class="navbar-item" href="../../security/">Security</a> <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a> <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a> </div> </div> </div> </div> <div class="navbar-fill"></div> <div class="navbar-search results-hidden"> <input id="search" class="search" placeholder="Search" autocomplete="off"> <div id="search_results"></div> </div> <div class="navbar-tools"> <a href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#github"/></svg></a> <a href="https://gitter.im/apache/apache-camel" title="Chat on Gitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#gitter"/></svg></a> <a href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#twitter"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <div class="body"> <div class="nav-container" data-component="manual" data-version="latest"> <aside class="nav"> <div class="panels"> <div class="nav-panel-menu is-active" data-panel="menu"> <nav class="nav-menu"> <h3 class="title"><a href="index.html">User manual</a></h3> <ul class="nav-list"> <li class="nav-item" data-depth="0"> <ul class="nav-list"> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="getting-started.html">Getting started</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="book-getting-started.html">Getting Started with Apache Camel</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="what-are-the-dependencies.html">What are the dependencies?</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="architecture.html">Architecture</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="async.html">Async</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="asynchronous-routing-engine.html">Asynchronous Routing Engine</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="backlogdebugger.html">Backlog debugger</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="bam.html">Business Activity Monitoring</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="batch-consumer.html">Batch Consumer</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="browsable-endpoint.html">BrowsableEndpoint</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="camel-core.html">Core</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="camelcontext.html">Context</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="endpoint.html">Endpoints</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="cep.html">Complex Event Processing</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="component.html">Component</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="debugger.html">Debugger</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="delay-interceptor.html">Delay interceptor</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="dependency-injection.html">Dependency Injection</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="dozer-type-conversion.html">Dozer Type Conversion</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="bean-integration.html">Bean Integration</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="bean-binding.html">Bean Binding</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="parameter-binding-annotations.html">Parameter Binding Annotations</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="pojo-producing.html">POJO Producing</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="pojo-consuming.html">POJO Consuming</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="error-handler.html">Error Handler</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="exchange.html">Message Exchange</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="exchange-pattern.html">Exchange Pattern</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="using-exchange-pattern-annotations.html">Using Exchange pattern annotations</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="expression.html">Expressions</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="content-enricher.html">Content Enrichment</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="injector.html">Injector</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="intercept.html">Intercept</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="inversion-of-control-with-smart-defaults.html">Inversion Of Control With Smart Defaults</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="jmx.html">JMX</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="lifecycle.html">Camel Lifecycle</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="oncompletion.html">OnCompletion</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="predicate.html">Predicates</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="registry.html">Registry</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="route-builder.html">RouteBuilder</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="routes.html">Routes</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="transformer.html">Transformer</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="validator.html">Validator</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="spring-remoting.html">Spring Remoting</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="hiding-middleware.html">Hiding Middleware</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="health-check.html">Health Checks</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <span class="nav-text">Domain Specific Languages</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="dsl.html">Camel Domain Specific Language</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="java-dsl.html">Java DSL</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="spring.html">Spring support</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="using-osgi-blueprint-with-camel.html">Using OSGi blueprint with Camel</a> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <span class="nav-text">Supported expression languages</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="properties-component.html">Properties Component</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <a class="nav-link" href="enterprise-integration-patterns.html">Enterprise Integration Patterns</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="aggregate-eip.html">Aggregate EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="batch-config-eip.html">Batch-config EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="bean-eip.html">Bean EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="choice-eip.html">Choice EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="circuitBreaker-eip.html">CircuitBreaker EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="claimCheck-eip.html">Claim Check EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="content-based-router-eip.html">Content Based Router</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="content-filter-eip.html">Content Filter</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="convertBodyTo-eip.html">Convert Body To EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="customLoadBalancer-eip.html">Custom Load Balancer EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="delay-eip.html">Delay EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="dynamic-router.html">Dynamic Router</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="dynamicRouter-eip.html">Dynamic Router EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="enrich-eip.html">Enrich EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="eventDrivenConsumer-eip.html">Event Driven Consumer</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="failover-eip.html">Failover EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="filter-eip.html">Filter EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="from-eip.html">From EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="hystrix-eip.html">Hystrix EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="hystrixConfiguration-eip.html">Hystrix Configuration EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="idempotentConsumer-eip.html">Idempotent Consumer EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="inOnly-eip.html">In Only EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="inOut-eip.html">In Out EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="loadBalance-eip.html">Load Balance EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="log-eip.html">Log EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="loop-eip.html">Loop EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="marshal-eip.html">Marshal EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="multicast-eip.html">Multicast EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="onFallback-eip.html">On Fallback EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="otherwise-eip.html">Otherwise EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="pipeline-eip.html">Pipeline EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="pollEnrich-eip.html">Poll Enrich EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="process-eip.html">Process EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="random-eip.html">Random EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="recipientList-eip.html">Recipient List EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="removeHeader-eip.html">Remove Header EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="removeHeaders-eip.html">Remove Headers EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="removeProperties-eip.html">Remove Properties EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="removeProperty-eip.html">Remove Property EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="requestReply-eip.html">Request Reply</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="resequence-eip.html">Resequence EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="resilience4j-eip.html">Resilience4j EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="resilience4jConfiguration-eip.html">Resilience4j Configuration EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="rollback-eip.html">Rollback EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="roundRobin-eip.html">Round Robin EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="routingSlip-eip.html">Routing Slip EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="saga-eip.html">Saga EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="sample-eip.html">Sample EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="script-eip.html">Script EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="serviceCall-eip.html">Service Call EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="setBody-eip.html">Set Body EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="setHeader-eip.html">Set Header EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="setOutHeader-eip.html">Set Out Header EIP (deprecated)</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="setProperty-eip.html">Set Property EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="sort-eip.html">Sort EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="split-eip.html">Split EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="step-eip.html">Step EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="sticky-eip.html">Sticky EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="stop-eip.html">Stop EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="stream-config-eip.html">Stream-config EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="threads-eip.html">Threads EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="throttle-eip.html">Throttle EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="to-eip.html">To EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="toD-eip.html">To D EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="topic-eip.html">Topic EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="transform-eip.html">Transform EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="unmarshal-eip.html">Unmarshal EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="validate-eip.html">Validate EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="weighted-eip.html">Weighted EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="when-eip.html">When EIP</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="wireTap-eip.html">Wire Tap EIP</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle"></button> <span class="nav-text">Frequently asked questions</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/can-i-get-commercial-support.html">Can I get commercial support?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/does-camel-work-on-ibms-jdk.html">Does Camel work on IBM&#8217;s JDK?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="support.html">How can I get help?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-i-get-the-source-code.html">How can I get the source code?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-compare-to-mule.html">How does Camel compare to Mule?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-compare-to-servicemix.html">How does Camel compare to ServiceMix?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-compare-to-servicemix-eip.html">How does Camel compare to ServiceMix EIP?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-compare-to-synapse.html">How does Camel compare to Synapse?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-work.html">How does Camel work?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-work-with-activemq.html">How does Camel work with ActiveMQ?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-work-with-servicemix.html">How does Camel work with ServiceMix?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-the-camel-api-compare-to.html">How does the Camel API compare to?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-the-website-work.html">How does the website work?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-become-a-committer.html">How do I become a committer?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-compile-the-code.html">How do I compile the code?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-edit-the-website.html">How do I edit the website?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-run-camel-using-java-webstart.html">How do I run Camel using Java WebStart?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/if-i-use-servicemix-when-should-i-use-camel.html">If I use ServiceMix when should I use Camel?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/is-camel-an-esb.html">Is Camel an ESB?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/is-camel-ioc-friendly.html">Is Camel IoC friendly?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/running-camel-standalone.html">Running Camel standalone</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-are-the-dependencies.html">What are the dependencies?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-is-a-router.html">What is a router?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-is-camel.html">What is Camel?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-is-the-license.html">What is the license?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-jars-do-i-need.html">What jars do I need?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="languages.html">What languages are supported?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-platforms-are-supported.html">What platforms are supported?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-the-name-camel.html">Why the name Camel?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/classloader-issue-of-servicemix-camel-component.html">Classloader issue of servicemix-camel component</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-specify-which-method-to-use-when-using-beans-in-routes.html">How do I specify which method to use when using beans in routes?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-i-create-a-custom-component-or-endpoint.html">How can I create a custom component or endpoint?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-i-get-the-remote-connection-ip-address-from-the-camel-cxf-consumer-.html">How can I get the remote connection IP address from the camel-cxf consumer ?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-i-stop-a-route-from-a-route.html">How can I stop a route from a route?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-webservice-clients-see-remote-faults-with-stacktraces-when-using-camel-cxf.html">How can webservice clients see remote faults with stacktraces when using camel-cxf?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-look-up-beans-and-endpoints.html">How does Camel look up beans and endpoints?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="configuring-camel.html">How do I add a component?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-change-the-logging.html">How do I change the logging?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-configure-endpoints.html">How do I configure endpoints?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-configure-password-options-on-camel-endpoints-without-the-value-being-encoded.html">How do I configure password options on Camel endpoints without the value being encoded?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-configure-the-default-maximum-cache-size-for-producercache-or-producertemplate.html">How do I configure the default maximum cache size for ProducerCache or ProducerTemplate?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-configure-the-maximum-endpoint-cache-size-for-camelcontext.html">How do I configure the maximum endpoint cache size for CamelContext?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-debug-my-route.html">How do I debug my route?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-disable-jmx.html">How do I disable JMX?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-enable-streams-when-debug-logging-messages-in-camel.html">How do I enable streams when debug logging messages in Camel?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-handle-failures-when-consuming-for-example-from-a-ftp-server.html">How do I handle failures when consuming for example from a FTP server?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-import-rests-from-other-xml-files.html">How do I import rests from other XML files?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-import-routes-from-other-xml-files.html">How do I import routes from other XML files?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-let-jetty-match-wildcards.html">How do I let Jetty match wildcards?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-name-my-routes.html">How do I name my routes?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-restart-camelcontext.html">How do I restart CamelContext?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-retrieve-the-thrown-exception-during-processing-an-exchange.html">How do I retrieve the thrown Exception during processing an Exchange?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-retry-failed-messages-forever.html">How do I retry failed messages forever?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-retry-processing-a-message-from-a-certain-point-back-or-an-entire-route.html">How do I retry processing a message from a certain point back or an entire route?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-reuse-the-contexttestsupport-class-in-my-unit-tests.html">How do I reuse the ContextTestSupport class in my unit tests?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-run-activemq-and-camel-in-jboss.html">How do I run ActiveMQ and Camel in JBoss?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-set-the-max-chars-when-debug-logging-messages-in-camel.html">How do I set the max chars when debug logging messages in Camel?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-specify-time-period-in-a-human-friendly-syntax.html">How do I specify time period in a human friendly syntax?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-a-big-uber-jar.html">How do I use a big (uber) JAR?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-camel-inside-servicemix.html">How do I use Camel inside ServiceMix?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-spring-property-placeholder-with-camel-xml.html">How do I use Spring Property Placeholder with Camel XML?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-uris-with-parameters-in-xml.html">How do I use URIs with parameters in XML?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-write-a-custom-processor-which-sends-multiple-messages.html">How do I write a custom Processor which sends multiple messages?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-should-i-invoke-my-pojos-or-spring-services.html">How should I invoke my POJOs or Spring Services?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-should-i-package-applications-using-camel-and-activemq.html">How should I package applications using Camel and ActiveMQ?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-avoid-importing-bunch-of-cxf-packages-when-start-up-the-camel-cxf-endpoint-from-osgi-platform-.html">How to avoid importing bunch of cxf packages when start up the camel-cxf endpoint from OSGi platform?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-avoid-sending-some-or-all-message-headers.html">How to avoid sending some or all message headers?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-define-a-static-camel-converter-method-in-scala.html">How to define a static Camel converter method in Scala?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-remove-the-http-protocol-headers-in-the-camel-message.html">How to remove the http protocol headers in the camel message?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-send-the-same-message-to-multiple-endpoints.html">How to send the same message to multiple endpoints?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-switch-the-cxf-consumer-between-http-and-https-without-touching-the-spring-configuration.html">How to switch the CXF consumer between HTTP and HTTPS without touching the Spring configuration?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-use-a-dynamic-uri-in-to.html">How to use a dynamic URI in to()?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/is-there-an-ide.html">Is there an IDE?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/should-i-deploy-camel-inside-the-activemq-broker-or-in-another-application.html">Should I deploy Camel inside the ActiveMQ broker or in another application?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/using-camel-core-testsjar.html">Using camel-core-tests.jar</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/using-getin-or-getout-methods-on-exchange.html">Using getIn or getOut methods on Exchange</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-cant-i-use-sign-in-my-password.html">Why can&#8217;t I use + sign in my password?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-can-i-not-use-when-or-otherwise-in-a-java-camel-route.html">Why can I not use when or otherwise in a Java Camel route?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-ftp-component-not-download-any-files.html">Why does FTP component not download any files?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-my-file-consumer-not-pick-up-the-file-and-how-do-i-let-the-file-consumer-use-the-camel-error-handler.html">Why does my file consumer not pick up the file, and how do I let the file consumer use the Camel error handler?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-useoriginalmessage-with-error-handler-not-work-as-expected.html">Why does useOriginalMessage with error handler not work as expected?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-do-my-message-lose-its-headers-during-routing.html">Why do my message lose its headers during routing?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-is-my-message-body-empty.html">Why is my message body empty?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-is-my-processor-not-showing-up-in-jconsole.html">Why is my processor not showing up in JConsole?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-is-the-exception-null-when-i-use-onexception.html">Why is the exception null when I use onException?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-use-multiple-camelcontext.html">Why use multiple CamelContext?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-enable-debug-logging.html">How do I enable debug logging?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-java-14-logging.html">How do I use Java 1.4 logging?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-log4j.html">How do I use log4j?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-invoke-camel-routes-from-jbi.html">How do I invoke Camel routes from JBI?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-make-my-jms-endpoint-transactional.html">How Do I Make My JMS Endpoint Transactional?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-set-the-mep-when-interacting-with-jbi.html">How do I set the MEP when interacting with JBI?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-the-direct-event-seda-and-vm-endpoints-compare.html">How do the direct, event, seda and vm endpoints compare?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-the-timer-and-quartz-endpoints-compare.html">How do the Timer and Quartz endpoints compare?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-my-jms-route-only-consume-one-message-at-once.html">Why does my JMS route only consume one message at once?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/exception-beandefinitionstoreexception.html">Exception - BeanDefinitionStoreException</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/exception-javaxnamingnoinitialcontextexception.html">Exception - javax.naming.NoInitialContextException</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/exception-orgapachecamelnosuchendpointexception.html">Exception - org.apache.camel.NoSuchEndpointException</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/exception-orgxmlsaxsaxparseexception.html">Exception - org.xml.sax.SAXParseException</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/memory-leak-when-adding-and-removing-routes-at-runtime.html">Memory leak when adding and removing routes at runtime</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-do-camel-throw-so-many-noclassdeffoundexception-on-startup.html">Why do Camel throw so many NoClassDefFoundException on startup?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-camel-use-too-many-threads-with-producertemplate.html">Why does Camel use too many threads with ProducerTemplate?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-maven-not-download-dependencies.html">Why does maven not download dependencies?</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="camel-3-migration-guide.html">Camel 2.x to 3.0 Migration Guide</a> </li> <li class="nav-item is-current-page" data-depth="1"> <a class="nav-link" href="camel-3x-upgrade-guide.html">Camel 3.x Upgrade Guide</a> </li> </ul> </li> </ul> </nav> </div> <div class="nav-panel-explore" data-panel="explore"> <div class="context"> <span class="title">User manual</span> <span class="version">latest</span> </div> <ul class="components"> <li class="component"> <span class="title">Apache Camel extensions for Quarkus</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-quarkus/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Apache Camel K</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-k/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Apache Camel Kafka Connector</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-kafka-connector/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Camel Spring Boot Starters</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-spring-boot/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Component reference</span> <ul class="versions"> <li class="version is-latest"> <a href="../../components/latest/index.html">latest</a> </li> <li class="version"> <a href="../../components/3.0.x/index.html">3.0.x</a> </li> <li class="version"> <a href="../../components/2.x/index.html">2.x</a> </li> </ul> </li> <li class="component is-current"> <span class="title">User manual</span> <ul class="versions"> <li class="version is-current is-latest"> <a href="index.html">latest</a> </li> </ul> </li> </ul> </div> </div> </aside> </div> <main role="main"> <div class="toolbar" role="navigation"> <button class="nav-toggle"></button> <a href="index.html" class="home-link"></a> <nav class="breadcrumbs" aria-label="breadcrumbs"> <ul> <li><a href="index.html">User manual</a></li> <li><a href="camel-3x-upgrade-guide.html">Camel 3.x Upgrade Guide</a></li> </ul> </nav> <div> <label id="toggle-width-label" for="toggle-width">Wide / Narrow</label> </div> <div class="edit-this-page"><a href="https://github.com/apache/camel/edit/master/docs/user-manual/modules/ROOT/pages/camel-3x-upgrade-guide.adoc">Edit this Page</a></div> </div> <input type="checkbox" id="toggle-width"> <article class="doc"> <h1 class="page">Apache Camel 3.x Upgrade Guide</h1> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>This document is intended for helping you upgrade your Apache Camel application from Camel 3.x to 3.y.</p> </div> <div class="admonitionblock important"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> <td class="content"> If you are migrating from Camel 2.x then use the <a href="camel-3-migration-guide.html" class="page">Camel 2.x to 3.0 Migration Guide</a>. </td> </tr> </table></div> </div> <div class="paragraph"> <p>For example if you are upgrading Camel 3.0 to 3.2, then you should follow the guides from both 3.0 to 3.1 and 3.1 to 3.2.</p> </div> </div> </div> <div class="sect1"> <h2 id="_upgrading_camel_3_0_to_3_1"><a class="anchor" href="#_upgrading_camel_3_0_to_3_1"></a>Upgrading Camel 3.0 to 3.1</h2> <div class="sectionbody"> <div class="sect2"> <h3 id="_camel_ahc_camel_netty_http_camel_undertow"><a class="anchor" href="#_camel_ahc_camel_netty_http_camel_undertow"></a>camel-ahc, camel-netty-http, camel-undertow</h3> <div class="paragraph"> <p>These Camel components now no longer have dependency on Javax Servlet.</p> </div> </div> <div class="sect2"> <h3 id="_camel_undertow"><a class="anchor" href="#_camel_undertow"></a>camel-undertow</h3> <div class="paragraph"> <p>The exception class <code>HttpOperationFailedException</code> is now from package <code>org.apache.camel.http.base</code> instead of <code>org.apache.camel.http.common</code>. The Camel undertow producer throws this exception.</p> </div> </div> <div class="sect2"> <h3 id="_came_bean"><a class="anchor" href="#_came_bean"></a>came-bean</h3> <div class="paragraph"> <p>The bean component has been changed to behave as singleton scoped by default. This means that the bean is created or looked up once and reused.</p> </div> <div class="paragraph"> <p>The option <code>cache</code> has been deprecated in favour of the new <code>scope</code> option that by default is <code>Singleton</code>. You can set this to <code>Prototype</code> to use the old behaviour.</p> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> <div class="paragraph"> <p>Setting this to Prototype will let Camel create/lookup a new bean instance, per use; which acts as prototype scoped. However beware that if you lookup the bean, then the registry that holds the bean, would return a bean accordingly to its configuration, which can be singleton or prototype scoped. For example if you use Spring, or CDI, which has their own settings for setting bean scopes.</p> </div> </td> </tr> </table></div> </div> </div> <div class="sect2"> <h3 id="_camel_etcd"><a class="anchor" href="#_camel_etcd"></a>camel-etcd</h3> <div class="paragraph"> <p>The <code>camel-etcd</code> component has changed its endpoint syntax from <code>etcd:action/path</code> to <code>etcd-keys:path</code>, <code>etcd-stats:path</code>, or <code>etcd-watch:path</code>.</p> </div> <div class="paragraph"> <p>For example before</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">etcd:stats/leader</code></pre> </div> </div> <div class="paragraph"> <p>Should be changed to</p> </div> <div class="listingblock"> <div class="content"> <pre>etcd-stats:leader</pre> </div> </div> <div class="paragraph"> <p>This change was needed as the 3 actions could not share the same component/endpoint and had to be separated.</p> </div> </div> <div class="sect2"> <h3 id="_camel_ftp"><a class="anchor" href="#_camel_ftp"></a>camel-ftp</h3> <div class="literalblock"> <div class="content"> <pre>The stepwise functionality (stepwise=true) is not supported for stream download (treamDownload=true).</pre> </div> </div> </div> <div class="sect2"> <h3 id="_camel_irc"><a class="anchor" href="#_camel_irc"></a>camel-irc</h3> <div class="paragraph"> <p>The <code>camel-irc</code> component has changed its endpoint syntax and removed option #room as a part of the url path. Allowed syntax is:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">irc:nick@host[:port]?[options]</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_camel_milo"><a class="anchor" href="#_camel_milo"></a>camel-milo</h3> <div class="paragraph"> <p>The <code>camel-milo</code> client component has changed its endpoint syntax from <code>milo-client:tcp</code> to <code>milo-client:opc.tcp</code>. For example before</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">milo-client:tcp://foo:bar@localhost:1234</code></pre> </div> </div> <div class="paragraph"> <p>Should be changed to</p> </div> <div class="listingblock"> <div class="content"> <pre>milo-client:opc.tcp://foo:bar@localhost:1234</pre> </div> </div> <div class="paragraph"> <p>The <code>camel-milo</code> server component requires Java 9 at runtime. Property <code>strictEndpointUrlsEnabled</code> is no longer supported. Properties`hostName` and <code>serverName</code> are replaced by <code>path</code>. To successfully use certificates for secured communication, JCE Jurisdiction Policy File Default has to be <strong>Unlimited</strong> (which is by default since Java 9+).</p> </div> </div> <div class="sect2"> <h3 id="_camel_nats"><a class="anchor" href="#_camel_nats"></a>camel-nats</h3> <div class="paragraph"> <p>The <code>camel-nats</code> component has changed its endpoint syntax from <code>nats:servers</code> to <code>nats:topic</code>. For example before</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">nats:myserver:4222?topic=myTopic</code></pre> </div> </div> <div class="paragraph"> <p>Should be changed to</p> </div> <div class="listingblock"> <div class="content"> <pre>nats:myTopic?servers=myserver:4222</pre> </div> </div> <div class="paragraph"> <p>This change is motivated by allowing to configure servers on component level, and also for Spring Boot auto-configuration etc.</p> </div> </div> <div class="sect2"> <h3 id="_camel_nsq"><a class="anchor" href="#_camel_nsq"></a>camel-nsq</h3> <div class="paragraph"> <p>The <code>camel-nsq</code> component has changed its endpoint syntax from <code>nsq:servers</code> to <code>nsq:topic</code>. For example before</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">nsq:myserver:4161/myTopic</code></pre> </div> </div> <div class="paragraph"> <p>Should be changed to</p> </div> <div class="listingblock"> <div class="content"> <pre>nsq:myTopic?servers=myserver:4161</pre> </div> </div> <div class="paragraph"> <p>This change is motivated by allowing to configure servers on component level, and also for Spring Boot auto-configuration etc.</p> </div> </div> <div class="sect2"> <h3 id="_camel_ipfs"><a class="anchor" href="#_camel_ipfs"></a>camel-ipfs</h3> <div class="paragraph"> <p>The <code>camel-ipfs</code> component has changed its endpoint syntax from <code>nsq:host:port/command</code> to <code>ipfs:command</code>. The host and port is now configured on the component level instead.</p> </div> <div class="paragraph"> <p>For example before</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">ipfs:127.0.0.1:5001/add</code></pre> </div> </div> <div class="paragraph"> <p>Should be changed to</p> </div> <div class="listingblock"> <div class="content"> <pre>ipfs:add</pre> </div> </div> </div> <div class="sect2"> <h3 id="_camel_xmlsecurity"><a class="anchor" href="#_camel_xmlsecurity"></a>camel-xmlsecurity</h3> <div class="paragraph"> <p>The <code>camel-xmlsecurity</code> component has changed its endpoint syntax from <code>xmlsecurity:command/name</code> to <code>xmlsecurity-sign:name</code>, <code>xmlsecurity-verify:name</code>.</p> </div> <div class="paragraph"> <p>For example before</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">xmlsecurity:verify/foo</code></pre> </div> </div> <div class="paragraph"> <p>Should be changed to</p> </div> <div class="listingblock"> <div class="content"> <pre>xmlsecurity-verify:foo</pre> </div> </div> <div class="paragraph"> <p>This change was needed as the 2 commands could not share the same component/endpoint and had to be separated.</p> </div> </div> <div class="sect2"> <h3 id="_spi_annotations"><a class="anchor" href="#_spi_annotations"></a>spi-annotations</h3> <div class="paragraph"> <p>The <code>spi-annotations</code> JAR is mandatory but was mistakenly defined as optional scope. The content of this JAR is now embedded directly into <code>camel-api</code> JAR so end users does not have to include or depend on <code>spi-annotations</code> JAR anymore.</p> </div> </div> <div class="sect2"> <h3 id="_camel_core_engine_and_camel_jaxp"><a class="anchor" href="#_camel_core_engine_and_camel_jaxp"></a>camel-core-engine and camel-jaxp</h3> <div class="paragraph"> <p>XML and JAXB has been moved out of camel-base and camel-core-engine.</p> </div> <div class="paragraph"> <p>The module camel-jaxp has been renamed to camel-xml-jaxp.</p> </div> <div class="paragraph"> <p>The camel-xml-jaxp JAR has XML parsers and type converters. The camel-xml-jaxb has support for loading XML DSL routes using JAXB. An alternative is to use the new camel-xml-io for loading XML routes which is more light-weight and faster than JAXB.</p> </div> </div> <div class="sect2"> <h3 id="_jaxb_is_now_optional"><a class="anchor" href="#_jaxb_is_now_optional"></a>JAXB is now optional</h3> <div class="paragraph"> <p>JAXB is now optional in Camel and only needed when using XML routes with the <code>camel-xml-jaxb</code> JAR for loading and parsing the routes with JAXB. There is an alternative implementation with <code>camel-xml-io</code> (see above).</p> </div> <div class="paragraph"> <p>This means that <code>jaxb-core</code> and <code>jaxb-impl</code> JARs no longer are needed on the classpath and as such has been removed as dependency in the various Camel <code>pom.xml</code> files.</p> </div> <div class="paragraph"> <p>There are a number of components that uses JAXB such as <code>camel-spring</code>, <code>camel-blueprint</code>, <code>camel-cdi</code> for their support of using XML for beans and Camel XML routes. And a few components such as <code>camel-soap</code> etc.</p> </div> <div class="paragraph"> <p>But at general then Camel is now lighter in classpath dependency by not requiring to have JAXB present.</p> </div> </div> <div class="sect2"> <h3 id="_package_scanning_typeconverter"><a class="anchor" href="#_package_scanning_typeconverter"></a>Package scanning @TypeConverter</h3> <div class="paragraph"> <p>Camel has now been configured to not package scan for custom <code>@Converter</code> classes on startup. Type converters are now loaded and registered in faster way via source code generated loader classes by having <code>@Converter(loader = true)</code> specified. If you have custom converters and have not migrated to use source code generated loaders, you can enable package scanning by setting</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">camelContext.setLoadTypeConverters(true);</code></pre> </div> </div> <div class="paragraph"> <p>And in XML:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext loadTypeConverters="true"&gt;
...
&lt;/camelContext&gt;</code></pre> </div> </div> <div class="paragraph"> <p>And in Spring Boot <code>application.properties</code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">camel.loadTypeConverters=true</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_graceful_shutdown_timeout"><a class="anchor" href="#_graceful_shutdown_timeout"></a>Graceful Shutdown Timeout</h3> <div class="paragraph"> <p>When shutting down Camel, then the default timeout has changed from 300 seconds (5 minutes) to 45 seconds. The 45 seconds was chosen as 30 seconds is a common timeout to use for remote protocols, so we wanted to give Camel a bit more time, and hence added 15 seconds so the default is 45 seconds.</p> </div> </div> <div class="sect2"> <h3 id="_message_history"><a class="anchor" href="#_message_history"></a>Message History</h3> <div class="paragraph"> <p>The message history is now default disabled (due to optimize core for lower footprint out of the box). See the <a href="message-history.html" class="page">Message History</a> documentation for how to enabled message history.</p> </div> </div> <div class="sect2"> <h3 id="_inflight_repository"><a class="anchor" href="#_inflight_repository"></a>Inflight Repository</h3> <div class="paragraph"> <p>The inflight repository now does no longer allow browsing each individual exchange (due to optimize core for lower footprint out of the box). To enable browsing then you can turn this on via:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    context.getInflightRepository().setInflightBrowseEnabled(true);</code></pre> </div> </div> <div class="paragraph"> <p>And in XML DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext inflightRepositoryBrowseEnabled="true"&gt;

&lt;/camelContext&gt;</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_component_extension_verifier"><a class="anchor" href="#_component_extension_verifier"></a>Component Extension Verifier</h3> <div class="paragraph"> <p>When using component verifier (<code>org.apache.camel.component.extension.ComponentVerifierExtension</code>) then you would know need to add <code>camel-core-catalog</code> to the classpath to make this useable. If the JAR is missing, there will be an exception stating that <code>RuntimeCamelCatalog</code> is not found and that this JAR should be added.</p> </div> </div> <div class="sect2"> <h3 id="_managedruntimecatalog"><a class="anchor" href="#_managedruntimecatalog"></a>ManagedRuntimeCatalog</h3> <div class="paragraph"> <p>The <code>ManagedRuntimeCatalog</code> JMX MBean is removed and no longer available.</p> </div> </div> <div class="sect2"> <h3 id="_spring_boot_jmx"><a class="anchor" href="#_spring_boot_jmx"></a>Spring Boot JMX</h3> <div class="paragraph"> <p>The <code>camel-management</code> dependency of <code>camel-spring-boot</code> was removed as Spring Boot 2.2+ disables JMX by default.</p> </div> <div class="paragraph"> <p>To continue using JMX with Camel Spring Boot add the following dependency:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-management&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_custom_components"><a class="anchor" href="#_custom_components"></a>Custom components</h3> <div class="paragraph"> <p>Camel now uses Camel Package Maven Plugin instead of <code>camel-apt</code> APT compiler to generate component meta data.</p> </div> <div class="paragraph"> <p>Custom components should then change in the pom.xml from:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;apt&lt;/artifactId&gt;
  &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;</code></pre> </div> </div> <div class="paragraph"> <p>To the following:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
        &lt;artifactId&gt;camel-package-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;${camel-version}&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;id&gt;generate&lt;/id&gt;
            &lt;goals&gt;
              &lt;goal&gt;generate-component&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;phase&gt;process-classes&lt;/phase&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
        &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;initialize&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;add-source&lt;/goal&gt;
              &lt;goal&gt;add-resource&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
              &lt;sources&gt;
                &lt;source&gt;src/generated/java&lt;/source&gt;
              &lt;/sources&gt;
              &lt;resources&gt;
                &lt;resource&gt;
                  &lt;directory&gt;src/generated/resources&lt;/directory&gt;
                &lt;/resource&gt;
              &lt;/resources&gt;
            &lt;/configuration&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_api_changes"><a class="anchor" href="#_api_changes"></a>API changes</h3> <div class="sect3"> <h4 id="_log_changed_to_private_static_log"><a class="anchor" href="#_log_changed_to_private_static_log"></a>log changed to private static LOG</h4> <div class="paragraph"> <p>The <code>ServiceSupport</code> class has changed its logging from instance to static, which means any inherited class that uses <code>log</code> would need to change the code to compile. This may happen in custom Camel components.</p> </div> <div class="paragraph"> <p>Before you may have:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    log.debug("Sending message to foobar service: {}", messageId);</code></pre> </div> </div> <div class="paragraph"> <p>You then need to migrate the logging to also be static:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    private static final Logger LOG = LoggerFactory.getLogger(FooBarProducer.class);

    LOG.debug("Sending message to foobar service: {}", messageId);</code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_exchange"><a class="anchor" href="#_exchange"></a>Exchange</h4> <div class="paragraph"> <p>The <code>Exchange</code> API has been modified slightly as part of an optimization effort. The returned value of <code>getCreated</code> is changed from <code>java.util.Date</code> to <code>long</code> which is the time millis. The <code>Exchange.CREATED_TIMESTAMP</code> is no longer stored as exchange property, but you should use the <code>getCreated</code> method on <code>Exchange</code>. The returned value of <code>isExternalRedelivered</code> is changed from <code>Boolean</code> to <code>boolean</code>.</p> </div> <div class="paragraph"> <p>Some of the advanced and API for component developers on <code>Exchange</code> has been moved to an extended interface <code>ExtendedExchange</code>. The following methods has been moved:</p> </div> <div class="ulist"> <ul> <li> <p>setFromEndpoint</p> </li> <li> <p>setFromRouteId</p> </li> <li> <p>setUnitOfWork</p> </li> <li> <p>addOnCompletion</p> </li> <li> <p>containsOnCompletion</p> </li> <li> <p>handoverCompletions</p> </li> </ul> </div> <div class="paragraph"> <p>You can use these methods by adapting to the extended exchange as shown below:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">exchange.adapt(ExtendedExchange.class).addOnCompletion(...);</code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_message"><a class="anchor" href="#_message"></a>Message</h4> <div class="paragraph"> <p>The message ID will now default to use the same id as Exchange ID as messages are associated with the exchange and using different IDs does not offer much value. Another reason is to optimize for performance to avoid generating new IDs. A few Camel components do provide their own message IDs such as the JMS components.</p> </div> </div> <div class="sect3"> <h4 id="_unitofwork"><a class="anchor" href="#_unitofwork"></a>UnitOfWork</h4> <div class="paragraph"> <p>For advanced Camel users whom implement custom <code>UnitOfWork</code> should implement the new `isBeforeAfterProcess()' method and return true of false, whether Camel should invoke the before and after processor methods.</p> </div> <div class="paragraph"> <p>The method <code>getId</code> has been removed.</p> </div> </div> <div class="sect3"> <h4 id="_cookies"><a class="anchor" href="#_cookies"></a>Cookies</h4> <div class="paragraph"> <p>Cookies from <code>camel-http-common</code> has been moved into a new <code>camel-http-base</code> JAR. The package <code>org.apache.camel.http.common.cookie</code> is renamed to <code>org.apache.camel.http.base.cookie</code>.</p> </div> </div> <div class="sect3"> <h4 id="_exchange_route_stop"><a class="anchor" href="#_exchange_route_stop"></a>Exchange.ROUTE_STOP</h4> <div class="paragraph"> <p>To signal an <code>Exchange</code> to stop continue routing has changed from setting the exchange property <code>Exchange.ROUTE_STOP</code> to true. Instead you should now use the <code>setRouteStop</code> method on the <code>Exchange</code> API.</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    exchange.setProperty(Exchange.ROUTE_STOP, Boolean.TRUE);</code></pre> </div> </div> <div class="paragraph"> <p>Should now be:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    exchange.setRouteStop(true);</code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_exchange_rollback_only_and_exchange_rollback_only_last"><a class="anchor" href="#_exchange_rollback_only_and_exchange_rollback_only_last"></a>Exchange.ROLLBACK_ONLY and Exchange.ROLLBACK_ONLY_LAST</h4> <div class="paragraph"> <p>To signal an <code>Exchange</code> to rollback a transaction has changed from setting the exchange property <code>Exchange.ROLLBACK_ONLY</code> to true. Instead you should now use the <code>setRollbackOnly</code> method on the <code>Exchange</code> API (the same for rollback only last).</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    exchange.setProperty(Exchange.ROLLBACK_ONLY, Boolean.TRUE);</code></pre> </div> </div> <div class="paragraph"> <p>Should now be:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    exchange.setRollbackOnly(true);</code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_modelhelper_removed"><a class="anchor" href="#_modelhelper_removed"></a>ModelHelper removed</h4> <div class="paragraph"> <p>The class <code>org.apache.camel.model.ModelHelper</code> has been removed. Instead you can use its functionality from <code>ExtendedCamelContext</code> by the <code>getModelToXMLDumper</code> and <code>getXMLRoutesDefinitionLoader</code> methods which has APIs similar to <code>ModelHelper</code>.</p> </div> </div> <div class="sect3"> <h4 id="_jsonschemahelper_removed"><a class="anchor" href="#_jsonschemahelper_removed"></a>JsonSchemaHelper removed</h4> <div class="paragraph"> <p>The class <code>org.apache.camel.tooling.util.JSonSchemaHelper</code> has been removed. Instead you can use utils coming from camel-util-json and the class <code>org.apache.camel.tooling.util.PackageHelper</code></p> </div> </div> <div class="sect3"> <h4 id="_camel_xml_jaxp"><a class="anchor" href="#_camel_xml_jaxp"></a>camel-xml-jaxp</h4> <div class="paragraph"> <p>The class <code>org.apache.camel.processor.validation.PredicateValidatingProcessor</code> has moved from <code>camel-xml-jaxp</code> JAR to <code>camel-support</code> JAR and renamed to <code>org.apache.camel.support.processor.PredicateValidatingProcessor</code>.</p> </div> </div> <div class="sect3"> <h4 id="_java_dsl"><a class="anchor" href="#_java_dsl"></a>Java DSL</h4> <div class="paragraph"> <p>The Java DSL has been revisited and the following methods have been removed:</p> </div> <div class="ulist"> <ul> <li> <p>ExpressionClause::body(Supplier&lt;Object&gt;)</p> </li> <li> <p>MulticastDefinition::onPrepare(Supplier&lt;Processor&gt;)</p> </li> <li> <p>ProcessorDefinition::process(Supplier&lt;Processor&gt;)</p> </li> <li> <p>ProcessorDefinition::setBody(Supplier&lt;Result&gt;)</p> </li> <li> <p>RecipientListDefinition::onPrepare(Supplier&lt;Processor&gt;)</p> </li> <li> <p>SplitDefinition::onPrepare(Supplier&lt;Processor&gt;)</p> </li> <li> <p>WireTapDefinition::newExchange(Supplier&lt;Processor&gt;)</p> </li> <li> <p>WireTapDefinition::onPrepare(Supplier&lt;Processor&gt;)</p> </li> </ul> </div> <div class="paragraph"> <p>This change is motivated by the need to remove method ambiguity for untyped languages such as Groovy and JavaScript, for more info see <a href="https://issues.apache.org/jira/browse/CAMEL-14300" class="bare">https://issues.apache.org/jira/browse/CAMEL-14300</a></p> </div> </div> <div class="sect3"> <h4 id="_camelcontext"><a class="anchor" href="#_camelcontext"></a>CamelContext</h4> <div class="paragraph"> <p>Some unused methods have been removed from <code>CamelContext</code> which were not part of the public API. The following methods have been removed:</p> </div> <div class="ulist"> <ul> <li> <p>getProducerServicePool</p> </li> <li> <p>setProducerServicePool</p> </li> <li> <p>getPollingConsumerServicePool</p> </li> <li> <p>setPollingConsumerServicePool</p> </li> </ul> </div> </div> <div class="sect3"> <h4 id="_internal_api_changes"><a class="anchor" href="#_internal_api_changes"></a>Internal API changes</h4> <div class="paragraph"> <p>Remove the method <code>getProcessors</code> from <code>Pipeline</code> as you should use the <code>next</code> method instead to access a read-only view of the processors.</p> </div> </div> <div class="sect3"> <h4 id="_experimental"><a class="anchor" href="#_experimental"></a>@Experimental</h4> <div class="paragraph"> <p>The <code>@Experimental</code> annotation is moved from <code>meta-annotations</code> JAR to <code>camel-api</code> and moved from package <code>org.apache.camel.meta</code> to <code>org.apache.camel</code>. And the meta-annotations has been removed.</p> </div> </div> <div class="sect3"> <h4 id="_property_placeholders"><a class="anchor" href="#_property_placeholders"></a>Property Placeholders</h4> <div class="paragraph"> <p>The support for out-of-band property placeholders has been removed. This means that XML that were using the <code><a href="http://camel.apache.org/schema/placeholder" class="bare">http://camel.apache.org/schema/placeholder</a></code> namespace and that the java builders using the <code>.placeholder(key, value).</code> have to be modified.</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    from("direct:start")
        .multicast()
        .placeholder("stopOnException", "stop")
        .to("mock:a")</code></pre> </div> </div> <div class="paragraph"> <p>should be rewritten as:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    from("direct:start")
        .multicast()
        .stopOnException("{{stop}}")
        .to("mock:a")</code></pre> </div> </div> <div class="paragraph"> <p>and</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">   &lt;route&gt;
        &lt;from uri="direct:start"/&gt;
        &lt;multicast prop:stopOnException="stop"&gt;
            &lt;to uri="mock:a"/&gt;
        &lt;/multicast&gt;
    &lt;/route&gt;</code></pre> </div> </div> <div class="paragraph"> <p>should be rewritten as:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">   &lt;route&gt;
        &lt;from uri="direct:start"/&gt;
        &lt;multicast stopOnException="{{stop}}"&gt;
            &lt;to uri="mock:a"/&gt;
        &lt;/multicast&gt;
    &lt;/route&gt;</code></pre> </div> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="_upgrading_camel_3_1_to_3_2"><a class="anchor" href="#_upgrading_camel_3_1_to_3_2"></a>Upgrading Camel 3.1 to 3.2</h2> <div class="sectionbody"> <div class="sect2"> <h3 id="_eips_with_cachesize_option"><a class="anchor" href="#_eips_with_cachesize_option"></a>EIPs with cacheSize option</h3> <div class="paragraph"> <p>The <code>cacheSize</code> option on EIPs has been improved to reduce memory usage when the cache is disabled by setting the value to -1. One of the optimizations is that new endpoints will not be added to the endpoint registry, but discarded after use. This avoids storing additional endpoints in the cache (memory) as the cache should be disabled (cacheSize=-1).</p> </div> <div class="paragraph"> <p>See more details in the documentation for the <code>cacheSize</code> option on the EIPs.</p> </div> </div> <div class="sect2"> <h3 id="_configuring_components_via_java_setters"><a class="anchor" href="#_configuring_components_via_java_setters"></a>Configuring components via Java setters</h3> <div class="paragraph"> <p>Configuring Camel components from plain Java code has changed in some components where they were using delegate setters for a nested configuration class. These delegates has been removed, to ensure configuration is more consistent and aligned with how endpoints is configured as well, and by using source code generated configurer classes.</p> </div> <div class="paragraph"> <p>The following Camel components has been affected and changed on the component level:</p> </div> <div class="ulist"> <ul> <li> <p>camel-aws</p> </li> <li> <p>camel-aws2</p> </li> <li> <p>camel-consul</p> </li> <li> <p>camel-etcd</p> </li> <li> <p>camel-infinispan</p> </li> <li> <p>camel-kafka</p> </li> <li> <p>camel-servicenow</p> </li> <li> <p>camel-ssh</p> </li> <li> <p>camel-stomp</p> </li> <li> <p>camel-xmlsecurity</p> </li> <li> <p>camel-yammer</p> </li> </ul> </div> <div class="paragraph"> <p>This only affects if you are configuring these components using Java code or XML <code>&lt;bean&gt;</code> style.</p> </div> <div class="paragraph"> <p>For example</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KafkaComponent kafka = new KafkaComponent();
kafka.setBrokers("mybroker1:1234,mybroker2:1234");</code></pre> </div> </div> <div class="paragraph"> <p>Should now be:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KafkaComponent kafka = new KafkaComponent();
kafka.getConfiguration().setBrokers("mybroker1:1234,mybroker2:1234");</code></pre> </div> </div> <div class="paragraph"> <p>And in XML:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;bean id="kafka" class="org.apache.camel.component.kafka.KafkaComponent"&gt;
  &lt;property name="brokers" value="mybroker1:1234,mybroker2:1234"/&gt;
&lt;/bean&gt;</code></pre> </div> </div> <div class="paragraph"> <p>Should now be:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;bean id="kafka" class="org.apache.camel.component.kafka.KafkaComponent"&gt;
  &lt;property name="configuration"&gt;
    &lt;property name="brokers" value="mybroker1:1234,mybroker2:1234"/&gt;
  &lt;/property&gt;
&lt;/bean&gt;</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_configuring_components_via_spring_boot_auto_configuration"><a class="anchor" href="#_configuring_components_via_spring_boot_auto_configuration"></a>Configuring components via Spring Boot auto configuration</h3> <div class="paragraph"> <p>Configuring Camel spring boot components has changed its option keys to be flattened and have the <code>.configuration</code> prefix removed now.</p> </div> <div class="paragraph"> <p>Before in application.properties</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">camel.component.kafka.configuration.brokers=mybroker1:1234,mybroker2:1234</code></pre> </div> </div> <div class="paragraph"> <p>Should now be</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">camel.component.kafka.brokers=mybroker1:1234,mybroker2:1234</code></pre> </div> </div> <div class="paragraph"> <p>This applies to all the Camel spring boot <em>starter</em> JARs where basically <code>.configuration</code> should be removed.</p> </div> </div> <div class="sect2"> <h3 id="_configuring_camel_activemq_camel_amqp_and_camel_stomp_via_spring_boot_auto_configuration"><a class="anchor" href="#_configuring_camel_activemq_camel_amqp_and_camel_stomp_via_spring_boot_auto_configuration"></a>Configuring camel-activemq, camel-amqp and camel-stomp via Spring Boot auto configuration</h3> <div class="paragraph"> <p>When configuring these components from spring boot auto-configuration then the URL for the broker was named <code>broker-u-r-l</code> in the spring boot auto configuration support. This has been renamed to <code>broker-url</code> and a few other options too.</p> </div> <div class="paragraph"> <p>Before:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">camel.component.activemq.broker-u-r-l=tcp://localhost:61616</code></pre> </div> </div> <div class="paragraph"> <p>After:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">camel.component.activemq.broker-url=tcp://localhost:61616</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_google_pubnub"><a class="anchor" href="#_google_pubnub"></a>google-pubnub</h3> <div class="paragraph"> <p>The google-pubnub component has been improved to use a new Java library and become faster.</p> </div> <div class="paragraph"> <p>Support for Apache Karaf has been removed.</p> </div> </div> <div class="sect2"> <h3 id="_api_changes_2"><a class="anchor" href="#_api_changes_2"></a>API changes</h3> <div class="sect3"> <h4 id="_defaultcomponent"><a class="anchor" href="#_defaultcomponent"></a>DefaultComponent</h4> <div class="paragraph"> <p>The deprecated method <code>preProcessUri</code> has been removed.</p> </div> </div> </div> </div> </div> </article> </main> </div> <footer> <div class="footer"> <figure class="logo"> <img src="../../_/img/logo-d.svg" class="logo-small mt-60" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <dl> <dt>Overview</dt> <dd><a href="../../blog/">Blog</a></dd> <dd><a href="../../components/latest/">Components</a></dd> <dd><a href="../../download/">Download</a></dd> <dd><a href="../../manual/latest/getting-started.html">Getting started</a></dd> <dd><a href="../../manual/latest/faq.html">FAQ</a></dd> </dl> <dl> <dt>Community</dt> <dd><a href="../../community/support/">Support</a></dd> <dd><a href="../../manual/latest/contributing.html">Contributing</a></dd> <dd><a href="../../community/user-stories/">User stories</a></dd> <dd><a href="../../community/articles/">Articles</a></dd> <dd><a href="../../community/books/">Books</a></dd> <dd><a href="../../community/team/">Team</a></dd> </dl> <dl> <dt>About</dt> <dd><a href="../../acknowledgments/">Acknowledgments</a> </dd><dd><a target="_blank" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p> &copy; 2004-2020 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> </div> </footer> <script src="../../_/js/vendor/alogliasearch-bc4f637dc4.js"></script> <script src="../../_/js/site-f4f4dbc142.js"></script> <script async src="../../_/js/vendor/highlight-54157f17f1.js"></script> <script async src="../../_/js/vendor/svg4everybody-195d47ce7d.js"></script> <script type="application/ld+json"> {
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "Apache Camel",
  "url": "https://camel.apache.org",
  "sameAs": [
     "https://twitter.com/ApacheCamel"
  ],
  "logo": "../../_/img/logo-d.svg",
  "description": "Apache Camel  is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL."
} </script> <script type="application/ld+json"> { 
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Apache Camel",
        "item": "https://camel.apache.org"
        },
        {
        "@type": "ListItem",
        "position": 2,
        "name": "User manual",
        "item": "https://camel.apache.org/manual/latest/index.html"
        },
        {
        "@type": "ListItem",
        "position": 3,
        "name": "Camel 3.x Upgrade Guide","item": "https://camel.apache.org/manual/latest/camel-3x-upgrade-guide.html"}
        ]
    } </script> </body> </html> 