<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Try it out locally - Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/camel-kafka-connector/latest/try-it-out-locally.html"> <meta name="generator" content="Antora 2.1.0"> <link rel="stylesheet" href="../../_/css/site-20d780888e.css"> <meta name="application-name" content="Apache Camel"> <link rel="manifest" href="../../site.webmanifest"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../favicon-128.png" sizes="128x128"> </head> <body class="article"> <header class="header"> <nav class="navbar"> <div class="navbar-brand"> <a class="nav-logo" href="../.."><span>Apache Camel</span></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item" href="../../blog/">Blog</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Projects</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../projects/camel-k/">Camel K</a> <a class="navbar-item" href="../../projects/camel-quarkus/">Camel Quarkus</a> <a class="navbar-item" href="../../projects/camel-kafka-connector/">Camel Kafka Connector</a> <a class="navbar-item" href="../../camel-spring-boot/latest/">Camel Spring Boot</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Documentation</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../manual/latest/getting-started.html">Getting started</a> <a class="navbar-item" href="../../manual/latest/">User manual</a> <a class="navbar-item" href="../../components/latest/">Component reference</a> <a class="navbar-item" href="https://www.javadoc.io/doc/org.apache.camel/camel-api/latest/index.html">API Documentation</a> <a class="navbar-item" href="../../camel-k/latest/">Camel K</a> <a class="navbar-item" href="../../camel-quarkus/latest/">Camel Quarkus</a> <a class="navbar-item" href="../../camel-kafka-connector/latest/">Camel Kafka Connector</a> <a class="navbar-item" href="../../manual/latest/enterprise-integration-patterns.html">Enterprise Integration Patterns</a> <a class="navbar-item" href="../../manual/latest/camel-3-migration-guide.html">Camel 2.x to 3.0 Migration Guide</a> <a class="navbar-item" href="../../manual/latest/camel-3x-upgrade-guide.html">Camel 3.x Upgrade Guide</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Community</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../community/support/">Support</a> <a class="navbar-item" href="../../manual/latest/contributing.html">Contributing</a> <a class="navbar-item" href="../../community/user-stories/">User stories</a> <a class="navbar-item" href="../../community/articles/">Articles</a> <a class="navbar-item" href="../../community/books/">Books</a> <a class="navbar-item" href="../../community/team/">Team</a> </div> </div> <a class="navbar-item" href="../../download/">Download</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">About</a> <div class="navbar-dropdown"> <a class="navbar-item" href="https://www.apache.org/events/current-event.html">Apache events</a> <a class="navbar-item" href="https://www.apache.org/licenses/">License</a> <a class="navbar-item" href="../../security/">Security</a> <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a> <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a> </div> </div> </div> </div> <div class="navbar-fill"></div> <div class="navbar-search results-hidden"> <input id="search" class="search" placeholder="Search" autocomplete="off"> <div id="search_results"></div> </div> <div class="navbar-tools"> <a href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#github"/></svg></a> <a href="https://gitter.im/apache/apache-camel" title="Chat on Gitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#gitter"/></svg></a> <a href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#twitter"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <div class="body"> <div class="nav-container" data-component="camel-kafka-connector" data-version="latest"> <aside class="nav"> <div class="panels"> <div class="nav-panel-menu is-active" data-panel="menu"> <nav class="nav-menu"> <h3 class="title"><a href="index.html">Apache Camel Kafka Connector</a></h3> <ul class="nav-list"> <li class="nav-item" data-depth="0"> <ul class="nav-list"> <li class="nav-item" data-depth="1"> <a class="nav-link" href="index.html">About</a> </li> <li class="nav-item is-current-page" data-depth="1"> <a class="nav-link" href="try-it-out-locally.html">Try it out locally</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="try-it-out-on-openshift-with-strimzi.html">Try it out on OpenShift with Strimzi</a> </li> </ul> </li> </ul> </nav> </div> <div class="nav-panel-explore" data-panel="explore"> <div class="context"> <span class="title">Apache Camel Kafka Connector</span> <span class="version">latest</span> </div> <ul class="components"> <li class="component"> <span class="title">Apache Camel extensions for Quarkus</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-quarkus/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Apache Camel K</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-k/latest/index.html">latest</a> </li> </ul> </li> <li class="component is-current"> <span class="title">Apache Camel Kafka Connector</span> <ul class="versions"> <li class="version is-current is-latest"> <a href="index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Camel Spring Boot Starters</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-spring-boot/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Component reference</span> <ul class="versions"> <li class="version is-latest"> <a href="../../components/latest/index.html">latest</a> </li> <li class="version"> <a href="../../components/3.0.x/index.html">3.0.x</a> </li> <li class="version"> <a href="../../components/2.x/index.html">2.x</a> </li> </ul> </li> <li class="component"> <span class="title">User manual</span> <ul class="versions"> <li class="version is-latest"> <a href="../../manual/latest/index.html">latest</a> </li> </ul> </li> </ul> </div> </div> </aside> </div> <main role="main"> <div class="toolbar" role="navigation"> <button class="nav-toggle"></button> <a href="../../manual/latest/index.html" class="home-link"></a> <nav class="breadcrumbs" aria-label="breadcrumbs"> <ul> <li><a href="index.html">Apache Camel Kafka Connector</a></li> <li><a href="try-it-out-locally.html">Try it out locally</a></li> </ul> </nav> <div> <label id="toggle-width-label" for="toggle-width">Wide / Narrow</label> </div> <div class="edit-this-page"><a href="https://github.com/apache/camel-kafka-connector/edit/master/docs/modules/ROOT/pages/try-it-out-locally.adoc">Edit this Page</a></div> </div> <input type="checkbox" id="toggle-width"> <article class="doc"> <h1 class="page">Try it out locally</h1> <div class="sect1"> <h2 id="_run_kafka"><a class="anchor" href="#_run_kafka"></a>Run Kafka</h2> <div class="sectionbody"> <div class="paragraph"> <p>First, get a locally running kafka instance by following Apache Kafka <a href="https://kafka.apache.org/quickstart">quickstart guide</a>. This usually boils down to:</p> </div> <div class="listingblock"> <div class="title">Set KAFKA_HOME</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">export KAFKA_HOME=&lt;your kafka install dir&gt;</code></pre> </div> </div> <div class="listingblock"> <div class="title">Start Zookeeper cluster</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/zookeeper-server-start.sh $KAFKA_HOME/config/zookeeper.properties</code></pre> </div> </div> <div class="listingblock"> <div class="title">Start Kafka broker</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/kafka-server-start.sh $KAFKA_HOME/config/server.properties</code></pre> </div> </div> <div class="listingblock"> <div class="title">Create "mytopic" topic</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/kafka-topics.sh --create \
  --zookeeper localhost:2181 \
  --replication-factor 1 \
  --partitions 1 \
  --topic mytopic</code></pre> </div> </div> <div class="paragraph"> <p>Next, run Camel kafka connectors source and/or syncs:</p> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> <div class="paragraph"> <p>In order to run more than one instance of a standalone kafka connect on the same machine you neet to duplicate <code>$KAFKA_HOME/config/connect-standalone.properties</code> file changing the http port used for each instance:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cp $KAFKA_HOME/config/connect-standalone.properties $KAFKA_HOME/config/connect-standalone2.properties

echo rest.port=&lt;your unused port number&gt; &gt;&gt; $KAFKA_HOME/config/connect-standalone2.properties</code></pre> </div> </div> </td> </tr> </table></div> </div> <div class="paragraph"> <p>You can use these Kafka utilities to listen or produce from a Kafka topic:</p> </div> <div class="listingblock"> <div class="title">Run an Kafka Consumer</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic mytopic --from-beginning</code></pre> </div> </div> <div class="listingblock"> <div class="title">Run an interactive CLI kafka producer</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/kafka-console-producer.sh --broker-list localhost:9092 --topic mytopic</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_try_some_examples"><a class="anchor" href="#_try_some_examples"></a>Try some examples</h2> <div class="sectionbody"> <div class="paragraph"> <p>For the following examples you need to fetch the <code>camel-kafka-connector</code> project and <a href="https://github.com/apache/camel-kafka-connector/blob/master/README.adoc#build-the-project">build</a> it locally by running <code>./mvnw package</code> from the root of the project. Look into the <code>config</code> and <code>examples</code> directories for the configuration files (<code>*.properties</code>) of the examples showcased here.</p> </div> <div class="paragraph"> <p>First you need to set the <code>CLASSPATH</code> environment variable to include the <code>jar</code> files from the <code>core/target/camel-kafka-connector-[version]-package/share/java/</code> directory. On UNIX systems this can be done by running:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">export CLASSPATH="$(find core/target/ -type f -name '*.jar'| grep '\-package' | tr '\n' ':')"</code></pre> </div> </div> <div class="sect2"> <h3 id="_simple_logger_sink"><a class="anchor" href="#_simple_logger_sink"></a>Simple logger (sink)</h3> <div class="paragraph"> <p>This is an example of a <em>sink</em> that logs messages consumed from <code>mytopic</code>.</p> </div> <div class="listingblock"> <div class="title">Run the default sink, just a camel logger:</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/connect-standalone.sh $KAFKA_HOME/config/connect-standalone.properties config/CamelSinkConnector.properties</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_timer_source"><a class="anchor" href="#_timer_source"></a>Timer (source)</h3> <div class="paragraph"> <p>This is an example of a <em>source</em> that produces a message every second to <code>mytopic</code>.</p> </div> <div class="listingblock"> <div class="title">Run the default source, just a camel timer:</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/connect-standalone.sh $KAFKA_HOME/config/connect-standalone.properties config/CamelSourceConnector.properties</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_aws_kinesis_source"><a class="anchor" href="#_aws_kinesis_source"></a>AWS Kinesis (source)</h3> <div class="paragraph"> <p>This example consumes from AWS Kinesis data stream and transfers the payload to <code>mytopic</code> topic in Kafka.</p> </div> <div class="paragraph"> <p>Adjust properties in <code>examples/CamelAWSKinesisSourceConnector.properties</code> for your environment, you need to configure access key, secret key and region by setting <code>camel.component.aws-kinesis.configuration.access-key=youraccesskey</code>, <code>camel.component.aws-kinesis.configuration.secret-key=yoursecretkey</code> and <code>camel.component.aws-kinesis.configuration.region=yourregion</code>.</p> </div> <div class="listingblock"> <div class="title">Run the AWS Kinesis source:</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/connect-standalone.sh $KAFKA_HOME/config/connect-standalone.properties examples/CamelAWSKinesisSourceConnector.properties</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_aws_sqs_sink"><a class="anchor" href="#_aws_sqs_sink"></a>AWS SQS (sink)</h3> <div class="paragraph"> <p>This example consumes from Kafka topic <code>mytopic</code> and transfers the payload to AWS SQS.</p> </div> <div class="paragraph"> <p>Adjust properties in <code>examples/CamelAWSSQSSinkConnector.properties</code> for your environment, you need to configure access key, secret key and region by setting <code>camel.component.aws-sqs.configuration.access-key=youraccesskey</code>, <code>camel.component.aws-sqs.configuration.secret-key=yoursecretkey</code> and <code>camel.component.aws-sqs.configuration.region=yourregion</code></p> </div> <div class="listingblock"> <div class="title">Run the AWS SQS sink:</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/connect-standalone.sh $KAFKA_HOME/config/connect-standalone.properties examples/CamelAWSSQSSinkConnector.properties</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_aws_sqs_source"><a class="anchor" href="#_aws_sqs_source"></a>AWS SQS (source)</h3> <div class="paragraph"> <p>This example consumes from AWS SQS queue <code>mysqs</code> and transfers the payload to <code>mytopic</code> topic in Kafka.</p> </div> <div class="paragraph"> <p>Adjust properties in <code>examples/CamelAWSSQSSourceConnector.properties</code> for your environment, you need to configure access key, secret key and region by setting <code>camel.component.aws-sqs.configuration.access-key=youraccesskey</code>, <code>camel.component.aws-sqs.configuration.secret-key=yoursecretkey</code> and <code>camel.component.aws-sqs.configuration.region=yourregion</code></p> </div> <div class="listingblock"> <div class="title">Run the AWS SQS source:</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/connect-standalone.sh $KAFKA_HOME/config/connect-standalone.properties examples/CamelAWSSQSSourceConnector.properties</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_aws_sns_sink"><a class="anchor" href="#_aws_sns_sink"></a>AWS SNS (sink)</h3> <div class="paragraph"> <p>This example consumes from <code>mytopic</code> Kafka topic and transfers the payload to AWS SNS <code>topic</code> topic.</p> </div> <div class="paragraph"> <p>Adjust properties in <code>examples/CamelAWSSNSSinkConnector.properties</code> for your environment, you need to configure access key, secret key and region by setting <code>camel.component.aws-sns.configuration.access-key=youraccesskey</code>, <code>camel.component.aws-sns.configuration.secret-key=yoursecretkey</code> and <code>camel.component.aws-sns.configuration.region=yourregion</code></p> </div> <div class="listingblock"> <div class="title">Run the AWS SNS sink:</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/connect-standalone.sh $KAFKA_HOME/config/connect-standalone.properties examples/CamelAWSSNSSinkConnector.properties</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_aws_s3_source"><a class="anchor" href="#_aws_s3_source"></a>AWS S3 (source)</h3> <div class="paragraph"> <p>This example fetches objects from AWS S3 in the <code>camel-kafka-connector</code> bucket and transfers the payload to <code>mytopic</code> Kafka topic. This example shows how to implement a custom converter converting from bytes received from S3 to Kafka&#8217;s <code>SchemaAndValue</code>.</p> </div> <div class="paragraph"> <p>Adjust properties in <code>examples/CamelAWSS3SourceConnector.properties</code> for your environment, you need to configure access key, secret key and region by adding <code>camel.component.aws-s3.configuration.access-key=youraccesskey</code>, <code>camel.component.aws-s3.configuration.secret-key=yoursecretkey</code> and <code>camel.component.aws-s3.configuration.region=yourregion</code></p> </div> <div class="listingblock"> <div class="title">Run the AWS S3 source:</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/connect-standalone.sh $KAFKA_HOME/config/connect-standalone.properties examples/CamelAWSS3SourceConnector.properties</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_apache_cassandra"><a class="anchor" href="#_apache_cassandra"></a>Apache Cassandra</h3> <div class="paragraph"> <p>This examples require a running Cassandra instance, for simplicity the steps below show how to start Cassandra using Docker. First you&#8217;ll need to run a Cassandra instance:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker run --name master_node --env MAX_HEAP_SIZE='800M' -dt oscerd/cassandra</code></pre> </div> </div> <div class="paragraph"> <p>Next, check and make sure Cassandra is running:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker exec -ti master_node /opt/cassandra/bin/nodetool status
Datacenter: datacenter1
=======================
Status=Up/Down
|/ State=Normal/Leaving/Joining/Moving
--  Address     Load       Tokens       Owns (effective)  Host ID                               Rack
UN  172.17.0.2  251.32 KiB  256          100.0%            5126aaad-f143-43e9-920a-0f9540a93967  rack1</code></pre> </div> </div> <div class="paragraph"> <p>To populate the database using to the <code>cqlsh</code> tool, you&#8217;ll need a local installation of Cassandra. Download and extract the Apache Cassandra distribution to a directory. We reference the Cassandra installation directory with <code>LOCAL_CASSANDRA_HOME</code>. Here we use version 3.11.4 to connect to the Cassandra instance we started using Docker.</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">&lt;LOCAL_CASSANDRA_HOME&gt;/bin/cqlsh $(docker inspect --format='{{ .NetworkSettings.IPAddress }}' master_node)</code></pre> </div> </div> <div class="paragraph"> <p>Next, execute the following script to create keyspace <code>test</code>, the table <code>users</code> and insert one row into it.</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">create keyspace test with replication = {'class':'SimpleStrategy', 'replication_factor':3};
use test;
create table users ( id int primary key, name text );
insert into users (id,name) values (1, 'oscerd');
quit;</code></pre> </div> </div> <div class="paragraph"> <p>In the configuration <code>.properties</code> file we use below the IP address of the Cassandra master node needs to be configured, replace the value <code>172.17.0.2</code> in the <code>camel.source.url</code> or <code>localhost</code> in <code>camel.sink.url</code> configuration property with the IP of the master node obtained from Docker. Each example uses a different <code>.properties</code> file shown in the command line to run the example.</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker inspect --format='{{ .NetworkSettings.IPAddress }}' master_node</code></pre> </div> </div> <div class="sect3"> <h4 id="_apache_cassandra_source"><a class="anchor" href="#_apache_cassandra_source"></a>Apache Cassandra (source)</h4> <div class="paragraph"> <p>This example polls Cassandra via CSQL (<code>select * from users</code>) in the <code>test</code> keyspace and transfers the result to the <code>mytopic</code> Kafka topic.</p> </div> <div class="listingblock"> <div class="title">Run the Cassandra CQL source:</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/connect-standalone.sh $KAFKA_HOME/config/connect-standalone.properties examples/CamelCassandraQLSourceConnector.properties</code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_apache_cassandra_sink"><a class="anchor" href="#_apache_cassandra_sink"></a>Apache Cassandra (sink)</h4> <div class="paragraph"> <p>This example adds data to the <code>users</code> table in Cassandra from the data consumed from the <code>mytopic</code> Kafka topic. Notice how the <code>name</code> column is populated from the Kafka message using CQL comand <code>insert into users&#8230;&#8203;</code>.</p> </div> <div class="listingblock"> <div class="title">Run the Cassandra CQL sink:</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/connect-standalone.sh $KAFKA_HOME/config/connect-standalone.properties examples/CamelCassandraQLSinkConnector.properties</code></pre> </div> </div> </div> </div> <div class="sect2"> <h3 id="_elasticsearch_sink"><a class="anchor" href="#_elasticsearch_sink"></a>Elasticsearch (sink)</h3> <div class="paragraph"> <p>This example passes data from <code>mytopic</code> Kafka topic to <code>sampleIndexName</code> index in Elasticsearch. Adjust properties in <code>examples/CamelElasticSearchSinkConnector.properties</code> to reflect your environment, for example change the <code>hostAddresses</code> to a valid Elasticsearch instance hostname and port.</p> </div> <div class="paragraph"> <p>For the index operation, it might be necessary to provide or implement a <code>transformer</code>. A sample configuration would be similar to the one below:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">transforms=ElasticSearchTransformer</code></pre> </div> </div> <div class="paragraph"> <p>This is the sample Transformer used in the integration test code that transforms Kafka&#8217;s ConnectRecord to a Map:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">transforms.ElasticSearchTransformer.type=org.apache.camel.kafkaconnector.sink.elasticsearch.transforms.ConnectRecordValueToMapTransformer</code></pre> </div> </div> <div class="paragraph"> <p>This is a configuration for the sample transformer that defines the key used in the map:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">transforms.ElasticSearchTransformer.key=MyKey</code></pre> </div> </div> <div class="paragraph"> <p>When the configuration is ready run the sink with:</p> </div> <div class="listingblock"> <div class="title">Run the Elasticsearch sink:</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/connect-standalone.sh $KAFKA_HOME/config/connect-standalone.properties examples/CamelElasticSearchSinkConnector.properties</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_file_sink"><a class="anchor" href="#_file_sink"></a>File (sink)</h3> <div class="paragraph"> <p>This example appends data from <code>mytopic</code> Kafka topic to a file in <code>/tmp/kafkaconnect.txt</code>.</p> </div> <div class="listingblock"> <div class="title">Run the file sink:</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/connect-standalone.sh $KAFKA_HOME/config/connect-standalone.properties examples/CamelFileSinkConnector.properties</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_http_sink"><a class="anchor" href="#_http_sink"></a>HTTP (sink)</h3> <div class="paragraph"> <p>This example sends data from <code>mytopic</code> Kafka topic to a HTTP service. Adjust properties in <code>examples/CamelHttpSinkConnector.properties</code> for your environment, for example configuring the <code>camel.sink.url</code>.</p> </div> <div class="listingblock"> <div class="title">Run the http sink:</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/connect-standalone.sh $KAFKA_HOME/config/connect-standalone.properties examples/CamelHttpSinkConnector.properties</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_jms_source"><a class="anchor" href="#_jms_source"></a>JMS (source)</h3> <div class="paragraph"> <p>This example receives messages from a JMS queue named <code>myqueue</code> and transfers them to <code>mytopic</code> Kafka topic. In this example ActiveMQ is used and it&#8217;s configured to connect to the broker running on <code>localhost:61616</code>. Adjust properties in <code>examples/CamelJmsSourceConnector.properties</code> for your environment, for example configuring username and password by setting <code>camel.component.sjms2.connection-factory.userName=yourusername</code> and <code>camel.component.sjms2.connection-factory.password=yourpassword</code> or change the <code>camel.component.sjms2.connection-factory</code> and <code>camel.component.sjms2.connection-factory.brokerURL</code> to reflect your JMS implementation and URL.</p> </div> <div class="listingblock"> <div class="title">Run the JMS source:</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/connect-standalone.sh $KAFKA_HOME/config/connect-standalone.properties examples/CamelJmsSourceConnector.properties</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_jms_sink"><a class="anchor" href="#_jms_sink"></a>JMS (sink)</h3> <div class="paragraph"> <p>This example receives messages from <code>mytopic</code> Kafka topic and transfers them to JMS queue named <code>myqueue</code>. In this example ActiveMQ is used and it&#8217;s configured to connect to the broker running on <code>localhost:61616</code>. You can adjust properties in <code>examples/CamelJmsSinkConnector.properties</code> for your environment, for example configure username and password by adding <code>camel.component.sjms2.connection-factory.userName=yourusername</code> and <code>camel.component.sjms2.connection-factory.password=yourpassword</code> or change the <code>camel.component.sjms2.connection-factory</code> and <code>camel.component.sjms2.connection-factory.brokerURL</code> to reflect your JMS implementation and URL.</p> </div> <div class="listingblock"> <div class="title">Run the JMS sink:</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/connect-standalone.sh $KAFKA_HOME/config/connect-standalone.properties examples/CamelJmsSinkConnector.properties</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_telegram_source"><a class="anchor" href="#_telegram_source"></a>Telegram (source)</h3> <div class="paragraph"> <p>This example transfers messages sent to Telegram bot to the <code>mytopic</code> Kafka topic. Adjust to set telegram bot token in <code>examples/CamelTelegramSourceConnector.properties</code> to reflect your bot&#8217;s token.</p> </div> <div class="listingblock"> <div class="title">Run the telegram source:</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$KAFKA_HOME/bin/connect-standalone.sh $KAFKA_HOME/config/connect-standalone.properties examples/CamelTelegramSourceConnector.properties</code></pre> </div> </div> </div> </div> </div> </article> </main> </div> <footer> <div class="footer"> <figure class="logo"> <img src="../../_/img/logo-d.svg" class="logo-small mt-60" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <dl> <dt>Overview</dt> <dd><a href="../../blog/">Blog</a></dd> <dd><a href="../../components/latest/">Components</a></dd> <dd><a href="../../download/">Download</a></dd> <dd><a href="../../manual/latest/getting-started.html">Getting started</a></dd> <dd><a href="../../manual/latest/faq.html">FAQ</a></dd> </dl> <dl> <dt>Community</dt> <dd><a href="../../community/support/">Support</a></dd> <dd><a href="../../manual/latest/contributing.html">Contributing</a></dd> <dd><a href="../../community/user-stories/">User stories</a></dd> <dd><a href="../../community/articles/">Articles</a></dd> <dd><a href="../../community/books/">Books</a></dd> <dd><a href="../../community/team/">Team</a></dd> </dl> <dl> <dt>About</dt> <dd><a href="../../acknowledgments/">Acknowledgments</a> </dd><dd><a target="_blank" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p> &copy; 2004-2020 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> </div> </footer> <script src="../../_/js/vendor/alogliasearch-bc4f637dc4.js"></script> <script src="../../_/js/site-f4f4dbc142.js"></script> <script async src="../../_/js/vendor/highlight-54157f17f1.js"></script> <script async src="../../_/js/vendor/svg4everybody-195d47ce7d.js"></script> <script type="application/ld+json"> {
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "Apache Camel",
  "url": "https://camel.apache.org",
  "sameAs": [
     "https://twitter.com/ApacheCamel"
  ],
  "logo": "../../_/img/logo-d.svg",
  "description": "Apache Camel â„¢ is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL."
} </script> <script type="application/ld+json"> { 
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Apache Camel",
        "item": "https://camel.apache.org"
        },
        {
        "@type": "ListItem",
        "position": 2,
        "name": "Apache Camel Kafka Connector",
        "item": "https://camel.apache.org/camel-kafka-connector/latest/index.html"
        },
        {
        "@type": "ListItem",
        "position": 3,
        "name": "Try it out locally","item": "https://camel.apache.org/camel-kafka-connector/latest/try-it-out-locally.html"}
        ]
    } </script> </body> </html> 