<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>AWS S3 Storage Service Component - Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/components/latest/aws-s3-component.html"> <meta name="generator" content="Antora 2.1.0"> <link rel="stylesheet" href="../../_/css/site-1c739ae396.css"> <meta name="application-name" content="Apache Camel"> <link rel="manifest" href="../../site.webmanifest"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../favicon-128.png" sizes="128x128"> </head> <body class="article"> <header class="header"> <nav class="navbar"> <div class="navbar-brand"> <a class="nav-logo" href="../.."><span>Apache Camel</span></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item" href="../../blog/">Blog</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Projects</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../projects/camel-k/">Camel K</a> <a class="navbar-item" href="../../projects/camel-quarkus/">Camel Quarkus</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Documentation</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../docs/getting-started/">Getting started</a> <a class="navbar-item" href="../../manual/latest/">User manual</a> <a class="navbar-item" href="../../components/latest/">Component reference</a> <a class="navbar-item" href="../../camel-k/latest/">Camel K</a> <a class="navbar-item" href="../../camel-quarkus/latest/">Camel Quarkus</a> <a class="navbar-item" href="../../manual/latest/enterprise-integration-patterns.html">Enterprise Integration Patterns</a> <a class="navbar-item" href="../../manual/latest/camel-3-migration-guide.html">Camel 3 Migration Guide</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Community</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../community/support/">Support</a> <a class="navbar-item" href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a> <a class="navbar-item" href="../../community/user-stories/">User stories</a> <a class="navbar-item" href="../../community/articles/">Articles</a> <a class="navbar-item" href="../../community/books/">Books</a> <a class="navbar-item" href="../../community/team/">Team</a> </div> </div> <a class="navbar-item" href="../../download/">Download</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">About</a> <div class="navbar-dropdown"> <a class="navbar-item" href="https://www.apache.org/events/current-event.html">Apache events</a> <a class="navbar-item" href="https://www.apache.org/licenses/">License</a> <a class="navbar-item" href="../../security/">Security</a> <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a> <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a> </div> </div> </div> </div> <div class="navbar-tools"> <a href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#github"/></svg></a> <a href="https://gitter.im/apache/apache-camel" title="Chat on Gitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#gitter"/></svg></a> <a href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#twitter"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <div class="body"> <div class="nav-container" data-component="components" data-version="latest"> <aside class="nav"> <div class="panels"> <div class="nav-panel-explore is-active" data-panel="explore"> <div class="context"> <span class="title">Component reference</span> <span class="version">latest</span> </div> <ul class="components"> <li class="component"> <span class="title">Apache Camel extensions for Quarkus</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-quarkus/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Apache Camel K</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-k/latest/index.html">latest</a> </li> </ul> </li> <li class="component is-current"> <span class="title">Component reference</span> <ul class="versions"> <li class="version is-current is-latest"> <a href="index.html">latest</a> </li> <li class="version"> <a href="../2.x/index.html">2.x</a> </li> </ul> </li> <li class="component"> <span class="title">User manual</span> <ul class="versions"> <li class="version is-latest"> <a href="../../manual/latest/index.html">latest</a> </li> </ul> </li> </ul> </div> </div> </aside> </div> <main role="main"> <div class="toolbar" role="navigation"> <button class="nav-toggle"></button> <a href="../../manual/latest/index.html" class="home-link"></a> <nav class="breadcrumbs" aria-label="breadcrumbs"> <ul> <li><a href="index.html">Component reference</a></li> <li><a href="aws-s3-component.html">AWS S3 Storage Service Component</a></li> </ul> </nav> <div class="page-versions"> <button class="version-menu-toggle" title="Show other versions of page" type="button">latest</button> <div class="version-menu"> <a class="version is-current" href="aws-s3-component.html">latest</a> <a class="version" href="../2.x/aws-s3-component.html">2.x</a> </div> </div> <div class="edit-this-page"><a href="https://github.com/apache/camel/edit/master/components/camel-aws-s3/src/main/docs/aws-s3-component.adoc">Edit this Page</a></div> </div> <article class="doc"> <h1 class="page">AWS S3 Storage Service Component</h1> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p><strong>Available as of Camel version 2.8</strong></p> </div> <div class="paragraph"> <p>The S3 component supports storing and retrieving objects from/to <a href="https://aws.amazon.com/s3">Amazon&#8217;s S3</a> service.</p> </div> <div class="paragraph"> <p>Prerequisites</p> </div> <div class="paragraph"> <p>You must have a valid Amazon Web Services developer account, and be signed up to use Amazon S3. More information is available at <a href="https://aws.amazon.com/s3">Amazon S3</a>.</p> </div> </div> </div> <div class="sect1"> <h2 id="_uri_format"><a class="anchor" href="#_uri_format"></a>URI Format</h2> <div class="sectionbody"> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">aws-s3://bucketNameOrArn[?options]</code></pre> </div> </div> <div class="paragraph"> <p>The bucket will be created if it don&#8217;t already exists.<br> You can append query options to the URI in the following format, ?options=value&amp;option2=value&amp;&#8230;&#8203;</p> </div> <div class="paragraph"> <p>For example in order to read file <code>hello.txt</code> from bucket <code>helloBucket</code>, use the following snippet:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("aws-s3://helloBucket?accessKey=yourAccessKey&amp;secretKey=yourSecretKey&amp;prefix=hello.txt")
  .to("file:/var/downloaded");</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_uri_options"><a class="anchor" href="#_uri_options"></a>URI Options</h2> <div class="sectionbody"> <div class="paragraph"> <p>The AWS S3 Storage Service component supports 5 options, which are listed below.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Description</th> <th class="tableblock halign-center valign-top">Default</th> <th class="tableblock halign-left valign-top">Type</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>configuration</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The AWS S3 default configuration</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">S3Configuration</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accessKey</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Amazon AWS Access Key</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>secretKey</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Amazon AWS Secret Key</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>region</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The region where the bucket is located. This option is used in the com.amazonaws.services.s3.model.CreateBucketRequest.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>basicPropertyBinding</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether the component should use basic property binding (Camel 2.x) or the newer property binding with additional capabilities</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> </tbody> </table></div> <div class="paragraph"> <p>The AWS S3 Storage Service endpoint is configured using URI syntax:</p> </div> <div class="listingblock"> <div class="content"> <pre>aws-s3://bucketNameOrArn</pre> </div> </div> <div class="paragraph"> <p>with the following path and query parameters:</p> </div> <div class="sect2"> <h3 id="_path_parameters_1_parameters"><a class="anchor" href="#_path_parameters_1_parameters"></a>Path Parameters (1 parameters):</h3> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Description</th> <th class="tableblock halign-center valign-top">Default</th> <th class="tableblock halign-left valign-top">Type</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bucketNameOrArn</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Required</strong> Bucket name or ARN</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> </tbody> </table></div> </div> <div class="sect2"> <h3 id="_query_parameters_56_parameters"><a class="anchor" href="#_query_parameters_56_parameters"></a>Query Parameters (56 parameters):</h3> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Description</th> <th class="tableblock halign-center valign-top">Default</th> <th class="tableblock halign-left valign-top">Type</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>amazonS3Client</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Reference to a com.amazonaws.services.s3.AmazonS3 in the registry.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">AmazonS3</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>autoCreateBucket</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Setting the autocreation of the bucket</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">true</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>pathStyleAccess</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether or not the S3 client should use path style access</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>policy</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The policy for this queue to set in the com.amazonaws.services.s3.AmazonS3#setBucketPolicy() method.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>proxyHost</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To define a proxy host when instantiating the SQS client</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>proxyPort</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Specify a proxy port to be used inside the client definition.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>region</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The region in which S3 client needs to work. When using this parameter, the configuration will expect the capitalized name of the region (for example AP_EAST_1) You&#8217;ll need to use the name Regions.EU_WEST_1.name()</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>useIAMCredentials</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Set whether the S3 client should expect to load credentials on an EC2 instance or to expect static credentials to be passed in.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>encryptionMaterials</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The encryption materials to use in case of Symmetric/Asymmetric client usage</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">EncryptionMaterials</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>useEncryption</strong> (common)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Define if encryption must be used or not</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bridgeErrorHandler</strong> (consumer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Allows for bridging the consumer to the Camel routing Error Handler, which mean any exceptions occurred while the consumer is trying to pickup incoming messages, or the likes, will now be processed as a message and handled by the routing Error Handler. By default the consumer will use the org.apache.camel.spi.ExceptionHandler to deal with exceptions, that will be logged at WARN or ERROR level and ignored.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>deleteAfterRead</strong> (consumer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Delete objects from S3 after they have been retrieved. The delete is only performed if the Exchange is committed. If a rollback occurs, the object is not deleted. If this option is false, then the same objects will be retrieve over and over again on the polls. Therefore you need to use the Idempotent Consumer EIP in the route to filter out duplicates. You can filter using the S3Constants#BUCKET_NAME and S3Constants#KEY headers, or only the S3Constants#KEY header.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">true</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>delimiter</strong> (consumer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The delimiter which is used in the com.amazonaws.services.s3.model.ListObjectsRequest to only consume objects we are interested in.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>fileName</strong> (consumer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To get the object from the bucket with the given file name</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>includeBody</strong> (consumer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">If it is true, the exchange body will be set to a stream to the contents of the file. If false, the headers will be set with the S3 object metadata, but the body will be null. This option is strongly related to autocloseBody option. In case of setting includeBody to true and autocloseBody to false, it will be up to the caller to close the S3Object stream. Setting autocloseBody to true, will close the S3Object stream automatically.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">true</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>maxConnections</strong> (consumer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Set the maxConnections parameter in the S3 client configuration</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">60</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>maxMessagesPerPoll</strong> (consumer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Gets the maximum number of messages as a limit to poll at each polling. Is default unlimited, but use 0 or negative number to disable it as unlimited.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">10</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>prefix</strong> (consumer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The prefix which is used in the com.amazonaws.services.s3.model.ListObjectsRequest to only consume objects we are interested in.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sendEmptyMessageWhenIdle</strong> (consumer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">If the polling consumer did not poll any files, you can enable this option to send an empty message (no body) instead.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>autocloseBody</strong> (consumer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">If this option is true and includeBody is true, then the S3Object.close() method will be called on exchange completion. This option is strongly related to includeBody option. In case of setting includeBody to true and autocloseBody to false, it will be up to the caller to close the S3Object stream. Setting autocloseBody to true, will close the S3Object stream automatically.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">true</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>exceptionHandler</strong> (consumer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To let the consumer use a custom ExceptionHandler. Notice if the option bridgeErrorHandler is enabled then this option is not in use. By default the consumer will deal with exceptions, that will be logged at WARN or ERROR level and ignored.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">ExceptionHandler</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>exchangePattern</strong> (consumer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the exchange pattern when the consumer creates an exchange.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">ExchangePattern</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>pollStrategy</strong> (consumer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A pluggable org.apache.camel.PollingConsumerPollingStrategy allowing you to provide your custom implementation to control error handling usually occurred during the poll operation before an Exchange have been created and being routed in Camel.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">PollingConsumerPollStrategy</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>deleteAfterWrite</strong> (producer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Delete file object after the S3 file has been uploaded</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>keyName</strong> (producer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Setting the key name for an element in the bucket through endpoint parameter</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>lazyStartProducer</strong> (producer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether the producer should be started lazy (on the first message). By starting lazy you can use this to allow CamelContext and routes to startup in situations where a producer may otherwise fail during starting and cause the route to fail being started. By deferring this startup to be lazy then the startup failure can be handled during routing messages via Camel&#8217;s routing error handlers. Beware that when the first message is processed then creating and starting the producer may take a little time and prolong the total processing time of the processing.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>multiPartUpload</strong> (producer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">If it is true, camel will upload the file with multi part format, the part size is decided by the option of partSize</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>operation</strong> (producer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The operation to do in case the user don&#8217;t want to do only an upload</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">S3Operations</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>partSize</strong> (producer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Setup the partSize which is used in multi part upload, the default size is 25M.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">26214400</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>serverSideEncryption</strong> (producer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the server-side encryption algorithm when encrypting the object using AWS-managed keys. For example use AES256.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>storageClass</strong> (producer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The storage class to set in the com.amazonaws.services.s3.model.PutObjectRequest request.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>awsKMSKeyId</strong> (producer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Define the id of KMS key to use in case KMS is enabled</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>useAwsKMS</strong> (producer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Define if KMS must be used or not</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>basicPropertyBinding</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether the endpoint should use basic property binding (Camel 2.x) or the newer property binding with additional capabilities</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>synchronous</strong> (advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets whether synchronous processing should be strictly used, or Camel is allowed to use asynchronous processing (if supported).</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accelerateModeEnabled</strong> ( advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Define if Accelerate Mode enabled is true or false</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>chunkedEncodingDisabled</strong> ( advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Define if disabled Chunked Encoding is true or false</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>dualstackEnabled</strong> ( advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Define if Dualstack enabled is true or false</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>forceGlobalBucketAccess Enabled</strong> ( advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Define if Force Global Bucket Access enabled is true or false</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>payloadSigningEnabled</strong> ( advanced)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Define if Payload Signing enabled is true or false</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>backoffErrorThreshold</strong> (scheduler)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The number of subsequent error polls (failed due some error) that should happen before the backoffMultipler should kick-in.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>backoffIdleThreshold</strong> (scheduler)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The number of subsequent idle polls that should happen before the backoffMultipler should kick-in.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>backoffMultiplier</strong> (scheduler)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To let the scheduled polling consumer backoff if there has been a number of subsequent idles/errors in a row. The multiplier is then the number of polls that will be skipped before the next actual attempt is happening again. When this option is in use then backoffIdleThreshold and/or backoffErrorThreshold must also be configured.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>delay</strong> (scheduler)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Milliseconds before the next poll. You can also specify time values using units, such as 60s (60 seconds), 5m30s (5 minutes and 30 seconds), and 1h (1 hour).</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">500</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>greedy</strong> (scheduler)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">If greedy is enabled, then the ScheduledPollConsumer will run immediately again, if the previous run polled 1 or more messages.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>initialDelay</strong> (scheduler)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Milliseconds before the first poll starts. You can also specify time values using units, such as 60s (60 seconds), 5m30s (5 minutes and 30 seconds), and 1h (1 hour).</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">1000</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>repeatCount</strong> (scheduler)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a maximum limit of number of fires. So if you set it to 1, the scheduler will only fire once. If you set it to 5, it will only fire five times. A value of zero or negative means fire forever.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">0</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>runLoggingLevel</strong> (scheduler)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The consumer logs a start/complete log line when it polls. This option allows you to configure the logging level for that.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">TRACE</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">LoggingLevel</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>scheduledExecutorService</strong> (scheduler)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Allows for configuring a custom/shared thread pool to use for the consumer. By default each consumer has its own single threaded thread pool.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">ScheduledExecutorService</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>scheduler</strong> (scheduler)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To use a cron scheduler from either camel-spring or camel-quartz component</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">none</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>schedulerProperties</strong> (scheduler)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To configure additional properties when using a custom scheduler or any of the Quartz, Spring based scheduler.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Map</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>startScheduler</strong> (scheduler)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether the scheduler should be auto started.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">true</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>timeUnit</strong> (scheduler)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Time unit for initialDelay and delay options.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">MILLISECONDS</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">TimeUnit</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>useFixedDelay</strong> (scheduler)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Controls if fixed delay or fixed rate is used. See ScheduledExecutorService in JDK for details.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">true</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accessKey</strong> (security)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Amazon AWS Access Key</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>secretKey</strong> (security)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Amazon AWS Secret Key</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> </tbody> </table></div> </div> </div> </div> <div class="sect1"> <h2 id="_spring_boot_auto_configuration"><a class="anchor" href="#_spring_boot_auto_configuration"></a>Spring Boot Auto-Configuration</h2> <div class="sectionbody"> <div class="paragraph"> <p>When using Spring Boot make sure to use the following Maven dependency to have support for auto configuration:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-aws-s3-starter&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
  &lt;!-- use the same version as your Camel core version --&gt;
&lt;/dependency&gt;</code></pre> </div> </div> <div class="paragraph"> <p>The component supports 38 options, which are listed below.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Description</th> <th class="tableblock halign-center valign-top">Default</th> <th class="tableblock halign-left valign-top">Type</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.access-key</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Amazon AWS Access Key</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.basic-property-binding</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether the component should use basic property binding (Camel 2.x) or the newer property binding with additional capabilities</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.accelerate-mode-enabled</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Define if Accelerate Mode enabled is true or false</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.access-key</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Amazon AWS Access Key</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.amazon-s3-client</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Reference to a <code>com.amazonaws.services.s3.AmazonS3</code> in the registry.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">AmazonS3</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.auto-create-bucket</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Setting the autocreation of the bucket</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">true</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.autoclose-body</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">If this option is true and includeBody is true, then the S3Object.close() method will be called on exchange completion. This option is strongly related to includeBody option. In case of setting includeBody to true and autocloseBody to false, it will be up to the caller to close the S3Object stream. Setting autocloseBody to true, will close the S3Object stream automatically.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">true</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.aws-k-m-s-key-id</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Define the id of KMS key to use in case KMS is enabled</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.bucket-name</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Name of the bucket. The bucket will be created if it doesn&#8217;t already exists.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.chunked-encoding-disabled</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Define if disabled Chunked Encoding is true or false</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.delete-after-read</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Delete objects from S3 after they have been retrieved. The delete is only performed if the Exchange is committed. If a rollback occurs, the object is not deleted. &lt;p/&gt; If this option is false, then the same objects will be retrieve over and over again on the polls. Therefore you need to use the Idempotent Consumer EIP in the route to filter out duplicates. You can filter using the {@link S3Constants#BUCKET_NAME} and {@link S3Constants#KEY} headers, or only the {@link S3Constants#KEY} header.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">true</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.delete-after-write</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Delete file object after the S3 file has been uploaded</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.delimiter</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The delimiter which is used in the com.amazonaws.services.s3.model.ListObjectsRequest to only consume objects we are interested in.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.dualstack-enabled</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Define if Dualstack enabled is true or false</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.encryption-materials</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The encryption materials to use in case of Symmetric/Asymmetric client usage</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">EncryptionMaterials</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.file-name</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To get the object from the bucket with the given file name</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.force-global-bucket-access-enabled</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Define if Force Global Bucket Access enabled is true or false</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.include-body</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">If it is true, the exchange body will be set to a stream to the contents of the file. If false, the headers will be set with the S3 object metadata, but the body will be null. This option is strongly related to autocloseBody option. In case of setting includeBody to true and autocloseBody to false, it will be up to the caller to close the S3Object stream. Setting autocloseBody to true, will close the S3Object stream automatically.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">true</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.key-name</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Setting the key name for an element in the bucket through endpoint parameter</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.multi-part-upload</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">If it is true, camel will upload the file with multi part format, the part size is decided by the option of <code>partSize</code></p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.operation</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The operation to do in case the user don&#8217;t want to do only an upload</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">S3Operations</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.part-size</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Setup the partSize which is used in multi part upload, the default size is 25M.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">26214400</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.path-style-access</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether or not the S3 client should use path style access</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.payload-signing-enabled</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Define if Payload Signing enabled is true or false</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.policy</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The policy for this queue to set in the <code>com.amazonaws.services.s3.AmazonS3#setBucketPolicy()</code> method.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.prefix</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The prefix which is used in the com.amazonaws.services.s3.model.ListObjectsRequest to only consume objects we are interested in.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.proxy-host</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To define a proxy host when instantiating the SQS client</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.proxy-port</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Specify a proxy port to be used inside the client definition.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.region</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The region in which S3 client needs to work. When using this parameter, the configuration will expect the capitalized name of the region (for example AP_EAST_1) You&#8217;ll need to use the name Regions.EU_WEST_1.name()</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.secret-key</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Amazon AWS Secret Key</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.server-side-encryption</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the server-side encryption algorithm when encrypting the object using AWS-managed keys. For example use &lt;tt&gt;AES256&lt;/tt&gt;.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.storage-class</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The storage class to set in the <code>com.amazonaws.services.s3.model.PutObjectRequest</code> request.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.use-aws-k-m-s</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Define if KMS must be used or not</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.use-encryption</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Define if encryption must be used or not</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.configuration.use-i-a-m-credentials</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Set whether the S3 client should expect to load credentials on an EC2 instance or to expect static credentials to be passed in.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.enabled</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether to enable auto configuration of the aws-s3 component. This is enabled by default.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.region</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The region where the bucket is located. This option is used in the com.amazonaws.services.s3.model.CreateBucketRequest.</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.component.aws-s3.secret-key</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Amazon AWS Secret Key</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> </tbody> </table></div> <div class="paragraph"> <p>Required S3 component options</p> </div> <div class="paragraph"> <p>You have to provide the amazonS3Client in the Registry or your accessKey and secretKey to access the <a href="https://aws.amazon.com/s3">Amazon&#8217;s S3</a>.</p> </div> </div> </div> <div class="sect1"> <h2 id="_batch_consumer"><a class="anchor" href="#_batch_consumer"></a>Batch Consumer</h2> <div class="sectionbody"> <div class="paragraph"> <p>This component implements the Batch Consumer.</p> </div> <div class="paragraph"> <p>This allows you for instance to know how many messages exists in this batch and for instance let the Aggregator aggregate this number of messages.</p> </div> </div> </div> <div class="sect1"> <h2 id="_usage"><a class="anchor" href="#_usage"></a>Usage</h2> <div class="sectionbody"> <div class="sect2"> <h3 id="_message_headers_evaluated_by_the_s3_producer"><a class="anchor" href="#_message_headers_evaluated_by_the_s3_producer"></a>Message headers evaluated by the S3 producer</h3> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Header</th> <th class="tableblock halign-left valign-top">Type</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3BucketName</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The bucket Name which this object will be stored or which will be used for the current operation</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3BucketDestinationName</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The bucket Destination Name which will be used for the current operation</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3ContentLength</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>Long</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The content length of this object.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3ContentType</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The content type of this object.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3ContentControl</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The content control of this object.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3ContentDisposition</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The content disposition of this object.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3ContentEncoding</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The content encoding of this object.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3ContentMD5</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The md5 checksum of this object.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3DestinationKey</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The Destination key which will be used for the current operation</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3Key</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The key under which this object will be stored or which will be used for the current operation</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3LastModified</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.util.Date</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The last modified timestamp of this object.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3Operation</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The operation to perform. Permitted values are copyObject, deleteObject, listBuckets, deleteBucket, downloadLink, listObjects</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3StorageClass</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The storage class of this object.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3CannedAcl</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The canned acl that will be applied to the object. see <code>com.amazonaws.services.s3.model.CannedAccessControlList</code> for allowed values.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3Acl</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>com.amazonaws.services.s3.model.AccessControlList</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A well constructed Amazon S3 Access Control List object. see <code>com.amazonaws.services.s3.model.AccessControlList</code> for more details</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3Headers</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map&lt;String,String&gt;</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Support to get or set custom objectMetadata headers.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3ServerSideEncryption</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the server-side encryption algorithm when encrypting the object using AWS-managed keys. For example use AES256.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3VersionId</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The version Id of the object to be stored or returned from the current operation</p></td> </tr> </tbody> </table></div> </div> <div class="sect2"> <h3 id="_message_headers_set_by_the_s3_producer"><a class="anchor" href="#_message_headers_set_by_the_s3_producer"></a>Message headers set by the S3 producer</h3> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Header</th> <th class="tableblock halign-left valign-top">Type</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3ETag</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The ETag value for the newly uploaded object.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3VersionId</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The <strong>optional</strong> version ID of the newly uploaded object.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3DownloadLinkExpiration</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The expiration (millis) of URL download link. The link will be stored into <strong>CamelAwsS3DownloadLink</strong> response header.</p></td> </tr> </tbody> </table></div> </div> <div class="sect2"> <h3 id="_message_headers_set_by_the_s3_consumer"><a class="anchor" href="#_message_headers_set_by_the_s3_consumer"></a>Message headers set by the S3 consumer</h3> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Header</th> <th class="tableblock halign-left valign-top">Type</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3Key</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The key under which this object is stored.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3BucketName</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The name of the bucket in which this object is contained.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3ETag</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The hex encoded 128-bit MD5 digest of the associated object according to RFC 1864. This data is used as an integrity check to verify that the data received by the caller is the same data that was sent by Amazon S3.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3LastModified</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>Date</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The value of the Last-Modified header, indicating the date and time at which Amazon S3 last recorded a modification to the associated object.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3VersionId</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The version ID of the associated Amazon S3 object if available. Version IDs are only assigned to objects when an object is uploaded to an Amazon S3 bucket that has object versioning enabled.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3ContentType</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The Content-Type HTTP header, which indicates the type of content stored in the associated object. The value of this header is a standard MIME type.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3ContentMD5</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The base64 encoded 128-bit MD5 digest of the associated object (content - not including headers) according to RFC 1864. This data is used as a message integrity check to verify that the data received by Amazon S3 is the same data that the caller sent.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3ContentLength</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>Long</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The Content-Length HTTP header indicating the size of the associated object in bytes.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3ContentEncoding</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The <strong>optional</strong> Content-Encoding HTTP header specifying what content encodings have been applied to the object and what decoding mechanisms must be applied in order to obtain the media-type referenced by the Content-Type field.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3ContentDisposition</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The <strong>optional</strong> Content-Disposition HTTP header, which specifies presentational information such as the recommended filename for the object to be saved as.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3ContentControl</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The <strong>optional</strong> Cache-Control HTTP header which allows the user to specify caching behavior along the HTTP request/reply chain.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>CamelAwsS3ServerSideEncryption</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The server-side encryption algorithm when encrypting the object using AWS-managed keys.</p></td> </tr> </tbody> </table></div> </div> <div class="sect2"> <h3 id="_s3_producer_operations"><a class="anchor" href="#_s3_producer_operations"></a>S3 Producer operations</h3> <div class="paragraph"> <p>Camel-AWS s3 component provides the following operation on the producer side:</p> </div> <div class="ulist"> <ul> <li> <p>copyObject</p> </li> <li> <p>deleteObject</p> </li> <li> <p>listBuckets</p> </li> <li> <p>deleteBucket</p> </li> <li> <p>downloadLink</p> </li> <li> <p>listObjects</p> </li> <li> <p>getObject (this will return an S3Object instance)</p> </li> </ul> </div> </div> <div class="sect2"> <h3 id="_advanced_amazons3_configuration"><a class="anchor" href="#_advanced_amazons3_configuration"></a>Advanced AmazonS3 configuration</h3> <div class="paragraph"> <p>If your Camel Application is running behind a firewall or if you need to have more control over the <code>AmazonS3</code> instance configuration, you can create your own instance:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">AWSCredentials awsCredentials = new BasicAWSCredentials("myAccessKey", "mySecretKey");

ClientConfiguration clientConfiguration = new ClientConfiguration();
clientConfiguration.setProxyHost("http://myProxyHost");
clientConfiguration.setProxyPort(8080);

AmazonS3 client = new AmazonS3Client(awsCredentials, clientConfiguration);

registry.bind("client", client);</code></pre> </div> </div> <div class="paragraph"> <p>and refer to it in your Camel aws-s3 component configuration:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("aws-s3://MyBucket?amazonS3Client=#client&amp;delay=5000&amp;maxMessagesPerPoll=5")
.to("mock:result");</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_use_kms_with_the_s3_component"><a class="anchor" href="#_use_kms_with_the_s3_component"></a>Use KMS with the S3 component</h3> <div class="paragraph"> <p>To use AWS KMS to encrypt/decrypt data by using AWS infrastructure you can use the options introduced in 2.21.x like in the following example</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("file:tmp/test?fileName=test.txt")
     .setHeader(S3Constants.KEY, constant("testFile"))
     .to("aws-s3://mybucket?amazonS3Client=#client&amp;useAwsKMS=true&amp;awsKMSKeyId=3f0637ad-296a-3dfe-a796-e60654fb128c");</code></pre> </div> </div> <div class="paragraph"> <p>In this way you&#8217;ll ask to S3, to use the KMS key 3f0637ad-296a-3dfe-a796-e60654fb128c, to encrypt the file test.txt. When you&#8217;ll ask to download this file, the decryption will be done directly before the download.</p> </div> </div> <div class="sect2"> <h3 id="_use_useiamcredentials_with_the_s3_component"><a class="anchor" href="#_use_useiamcredentials_with_the_s3_component"></a>Use "useIAMCredentials" with the s3 component</h3> <div class="paragraph"> <p>To use AWS IAM credentials, you must first verify that the EC2 in which you are launching the Camel application on has an IAM role associated with it containing the appropriate policies attached to run effectively. Keep in mind that this feature should only be set to "true" on remote instances. To clarify even further, you must still use static credentials locally since IAM is an AWS specific component, but AWS environments should now be easier to manage. After this is implemented and understood, you can set the query parameter "useIAMCredentials" to "true" for AWS environments! To effectively toggle this on and off based on local and remote environments, you can consider enabling this query parameter with system environment variables. For example, your code could set the "useIAMCredentials" query parameter to "true", when the system environment variable called "isRemote" is set to true (there are many other ways to do this and this should act as a simple example). Although it doesn&#8217;t take away the need for static credentials completely, using IAM credentials on AWS environments takes away the need to refresh on remote environments and adds a major security boost (IAM credentials are refreshed automatically every 6 hours and update when their policies are updated). This is the AWS recommended way to manage credentials and therefore should be used as often as possible.</p> </div> </div> <div class="sect2"> <h3 id="_s3_producer_operation_examples"><a class="anchor" href="#_s3_producer_operation_examples"></a>S3 Producer Operation examples</h3> <div class="ulist"> <ul> <li> <p>CopyObject: this operation copy an object from one bucket to a different one</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">  from("direct:start").process(new Processor() {

      @Override
      public void process(Exchange exchange) throws Exception {
          exchange.getIn().setHeader(S3Constants.BUCKET_DESTINATION_NAME, "camelDestinationBucket");
          exchange.getIn().setHeader(S3Constants.KEY, "camelKey");
          exchange.getIn().setHeader(S3Constants.DESTINATION_KEY, "camelDestinationKey");
      }
  })
  .to("aws-s3://mycamelbucket?amazonS3Client=#amazonS3Client&amp;operation=copyObject")
  .to("mock:result");</code></pre> </div> </div> <div class="paragraph"> <p>This operation will copy the object with the name expressed in the header camelDestinationKey to the camelDestinationBucket bucket, from the bucket mycamelbucket.</p> </div> <div class="ulist"> <ul> <li> <p>DeleteObject: this operation deletes an object from a bucket</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">  from("direct:start").process(new Processor() {

      @Override
      public void process(Exchange exchange) throws Exception {
          exchange.getIn().setHeader(S3Constants.KEY, "camelKey");
      }
  })
  .to("aws-s3://mycamelbucket?amazonS3Client=#amazonS3Client&amp;operation=deleteObject")
  .to("mock:result");</code></pre> </div> </div> <div class="paragraph"> <p>This operation will delete the object camelKey from the bucket mycamelbucket.</p> </div> <div class="ulist"> <ul> <li> <p>ListBuckets: this operation list the buckets for this account in this region</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">  from("direct:start")
  .to("aws-s3://mycamelbucket?amazonS3Client=#amazonS3Client&amp;operation=listBuckets")
  .to("mock:result");</code></pre> </div> </div> <div class="paragraph"> <p>This operation will list the buckets for this account</p> </div> <div class="ulist"> <ul> <li> <p>DeleteBucket: this operation delete the bucket specified as URI parameter or header</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">  from("direct:start")
  .to("aws-s3://mycamelbucket?amazonS3Client=#amazonS3Client&amp;operation=deleteBucket")
  .to("mock:result");</code></pre> </div> </div> <div class="paragraph"> <p>This operation will delete the bucket mycamelbucket</p> </div> <div class="ulist"> <ul> <li> <p>DownloadLink: this operation create a download link for the file specified in the key header</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">  from("direct:start").process(new Processor() {

      @Override
      public void process(Exchange exchange) throws Exception {
          exchange.getIn().setHeader(S3Constants.KEY, "camelKey");
      }
  })
  .to("aws-s3://mycamelbucket?amazonS3Client=#amazonS3Client&amp;operation=downloadLink")
  .to("mock:result");</code></pre> </div> </div> <div class="paragraph"> <p>This operation will create a downloadLink for the file camelKey in the bucket mycamelbucket</p> </div> <div class="ulist"> <ul> <li> <p>ListObjects: this operation list object in a specific bucket</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">  from("direct:start")
  .to("aws-s3://mycamelbucket?amazonS3Client=#amazonS3Client&amp;operation=listObjects")
  .to("mock:result");</code></pre> </div> </div> <div class="paragraph"> <p>This operation will list the objects in the mycamelbucket bucket</p> </div> <div class="ulist"> <ul> <li> <p>GetObject: this operation get a single object in a specific bucket</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">  from("direct:start").process(new Processor() {

      @Override
      public void process(Exchange exchange) throws Exception {
          exchange.getIn().setHeader(S3Constants.KEY, "camelKey");
      }
  })
  .to("aws-s3://mycamelbucket?amazonS3Client=#amazonS3Client&amp;operation=getObject")
  .to("mock:result");</code></pre> </div> </div> <div class="paragraph"> <p>This operation will return an S3Object instance related to the camelKey object in mycamelbucket bucket.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="_bucket_autocreation"><a class="anchor" href="#_bucket_autocreation"></a>Bucket Autocreation</h2> <div class="sectionbody"> <div class="paragraph"> <p>With the option <code>autoCreateBucket</code> users are able to avoid the autocreation of an S3 Bucket in case it doesn&#8217;t exist. The default for this option is <code>true</code>. If set to false any operation on a not-existent bucket in AWS won&#8217;t be successful and an error will be returned.</p> </div> </div> </div> <div class="sect1"> <h2 id="_automatic_detection_of_amazons3_client_in_registry"><a class="anchor" href="#_automatic_detection_of_amazons3_client_in_registry"></a>Automatic detection of AmazonS3 client in registry</h2> <div class="sectionbody"> <div class="paragraph"> <p>The component is capable of detecting the presence of an AmazonS3 bean into the registry. If it&#8217;s the only instance of that type it will be used as client and you won&#8217;t have to define it as uri parameter, like the example above. This may be really useful for smarter configuration of the endpoint.</p> </div> </div> </div> <div class="sect1"> <h2 id="_dependencies"><a class="anchor" href="#_dependencies"></a>Dependencies</h2> <div class="sectionbody"> <div class="paragraph"> <p>Maven users will need to add the following dependency to their pom.xml.</p> </div> <div class="paragraph"> <p><strong>pom.xml</strong></p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-aws-s3&lt;/artifactId&gt;
    &lt;version&gt;${camel-version}&lt;/version&gt;
&lt;/dependency&gt;</code></pre> </div> </div> <div class="paragraph"> <p>where <code>${camel-version}</code> must be replaced by the actual version of Camel.</p> </div> </div> </div> </article> </main> </div> <footer> <div class="footer"> <figure class="logo"> <img src="../../_/img/logo-d.svg" class="logo-small mt-60" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <dl> <dt>Overview</dt> <dd><a href="../../blog/">Blog</a></dd> <dd><a href="../../components/latest/">Components</a></dd> <dd><a href="../../download/">Download</a></dd> <dd><a href="../../docs/getting-started/">Getting started</a></dd> <dd><a href="../../manual/latest/faq.html">FAQ</a></dd> </dl> <dl> <dt>Community</dt> <dd><a href="../../community/support/">Support</a></dd> <dd><a href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a></dd> <dd><a href="../../community/user-stories/">User stories</a></dd> <dd><a href="../../community/articles/">Articles</a></dd> <dd><a href="../../community/books/">Books</a></dd> <dd><a href="../../community/team/">Team</a></dd> </dl> <dl> <dt>About</dt> <dd><a href="../../acknowledgments/">Acknowledgments</a> </dd><dd><a target="_blank" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p> &copy; 2004-2019 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> </div> </footer> <script src="../../_/js/site-f4f4dbc142.js"></script> <script async src="../../_/js/vendor/highlight-54157f17f1.js"></script> <script async src="../../_/js/vendor/svg4everybody-195d47ce7d.js"></script> <script type="application/ld+json"> {
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "Apache Camel",
  "url": "https://camel.apache.org",
  "sameAs": [
     "https://twitter.com/ApacheCamel"
  ],
  "logo": "../../_/img/logo-d.svg",
  "description": "Apache Camel  is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL."
} </script> <script type="application/ld+json"> { 
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Apache Camel",
        "item": "https://camel.apache.org"
        },
        {
        "@type": "ListItem",
        "position": 2,
        "name": "Component reference",
        "item": "https://camel.apache.org/components/latest/index.html"
        },
        {
        "@type": "ListItem",
        "position": 3,
        "name": "AWS S3 Storage Service Component","item": "https://camel.apache.org/components/latest/aws-s3-component.html"}
        ]
    } </script> </body> </html> 