<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>JsonPath Language - Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/components/latest/jsonpath-language.html"> <meta name="generator" content="Antora 2.1.0"> <link rel="stylesheet" href="../../_/css/site-1c739ae396.css"> <meta name="application-name" content="Apache Camel"> <link rel="manifest" href="../../site.webmanifest"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../favicon-128.png" sizes="128x128"> </head> <body class="article"> <header class="header"> <nav class="navbar"> <div class="navbar-brand"> <a class="nav-logo" href="../.."><span>Apache Camel</span></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item" href="../../blog/">Blog</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Projects</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../projects/camel-k/">Camel K</a> <a class="navbar-item" href="../../projects/camel-quarkus/">Camel Quarkus</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Documentation</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../docs/getting-started/">Getting started</a> <a class="navbar-item" href="../../manual/latest/">User manual</a> <a class="navbar-item" href="../../components/latest/">Component reference</a> <a class="navbar-item" href="../../camel-k/latest/">Camel K</a> <a class="navbar-item" href="../../camel-quarkus/latest/">Camel Quarkus</a> <a class="navbar-item" href="../../manual/latest/enterprise-integration-patterns.html">Enterprise Integration Patterns</a> <a class="navbar-item" href="../../manual/latest/camel-3-migration-guide.html">Camel 3 Migration Guide</a> </div> </div> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">Community</a> <div class="navbar-dropdown"> <a class="navbar-item" href="../../community/support/">Support</a> <a class="navbar-item" href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a> <a class="navbar-item" href="../../community/user-stories/">User stories</a> <a class="navbar-item" href="../../community/articles/">Articles</a> <a class="navbar-item" href="../../community/books/">Books</a> <a class="navbar-item" href="../../community/team/">Team</a> </div> </div> <a class="navbar-item" href="../../download/">Download</a> <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link" href="#">About</a> <div class="navbar-dropdown"> <a class="navbar-item" href="https://www.apache.org/events/current-event.html">Apache events</a> <a class="navbar-item" href="https://www.apache.org/licenses/">License</a> <a class="navbar-item" href="../../security/">Security</a> <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a> <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a> </div> </div> </div> </div> <div class="navbar-tools"> <a href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#github"/></svg></a> <a href="https://gitter.im/apache/apache-camel" title="Chat on Gitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#gitter"/></svg></a> <a href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon"><use xlink:href="../../_/img/brand-logos.svg#twitter"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <div class="body"> <div class="nav-container" data-component="components" data-version="latest"> <aside class="nav"> <div class="panels"> <div class="nav-panel-explore is-active" data-panel="explore"> <div class="context"> <span class="title">Component reference</span> <span class="version">latest</span> </div> <ul class="components"> <li class="component"> <span class="title">Apache Camel extensions for Quarkus</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-quarkus/latest/index.html">latest</a> </li> </ul> </li> <li class="component"> <span class="title">Apache Camel K</span> <ul class="versions"> <li class="version is-latest"> <a href="../../camel-k/latest/index.html">latest</a> </li> </ul> </li> <li class="component is-current"> <span class="title">Component reference</span> <ul class="versions"> <li class="version is-current is-latest"> <a href="index.html">latest</a> </li> <li class="version"> <a href="../2.x/index.html">2.x</a> </li> </ul> </li> <li class="component"> <span class="title">User manual</span> <ul class="versions"> <li class="version is-latest"> <a href="../../manual/latest/index.html">latest</a> </li> </ul> </li> </ul> </div> </div> </aside> </div> <main role="main"> <div class="toolbar" role="navigation"> <button class="nav-toggle"></button> <a href="../../manual/latest/index.html" class="home-link"></a> <nav class="breadcrumbs" aria-label="breadcrumbs"> <ul> <li><a href="index.html">Component reference</a></li> <li><a href="jsonpath-language.html">JsonPath Language</a></li> </ul> </nav> <div class="page-versions"> <button class="version-menu-toggle" title="Show other versions of page" type="button">latest</button> <div class="version-menu"> <a class="version is-current" href="jsonpath-language.html">latest</a> <a class="version" href="../2.x/jsonpath-language.html">2.x</a> </div> </div> <div class="edit-this-page"><a href="https://github.com/apache/camel/edit/master/components/camel-jsonpath/src/main/docs/jsonpath-language.adoc">Edit this Page</a></div> </div> <article class="doc"> <h1 class="page">JsonPath Language</h1> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p><strong>Available as of Camel version 2.13</strong></p> </div> <div class="paragraph"> <p>Camel supports <a href="https://code.google.com/p/json-path/">JSonPath</a> to allow using Expression or Predicate on json messages.</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("queue:books.new")
  .choice()
    .when().jsonpath("$.store.book[?(@.price &lt; 10)]")
      .to("jms:queue:book.cheap")
    .when().jsonpath("$.store.book[?(@.price &lt; 30)]")
      .to("jms:queue:book.average")
    .otherwise()
      .to("jms:queue:book.expensive")</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_jsonpath_options"><a class="anchor" href="#_jsonpath_options"></a>JSonPath Options</h2> <div class="sectionbody"> <div class="paragraph"> <p>The JsonPath language supports 7 options, which are listed below.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Default</th> <th class="tableblock halign-left valign-top">Java Type</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">resultType</p></td> <td class="tableblock halign-left valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the class name of the result type (type from output)</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">suppressExceptions</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether to suppress exceptions such as PathNotFoundException.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">allowSimple</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether to allow in inlined simple exceptions in the JsonPath expression</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">allowEasyPredicate</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether to allow using the easy predicate parser to pre-parse predicates.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">writeAsString</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether to write the output of each row/element as a JSON String value instead of a Map/POJO value.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">headerName</p></td> <td class="tableblock halign-left valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Name of header to use as input, instead of the message body</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">trim</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether to trim the value to remove leading and trailing whitespaces and line breaks</p></td> </tr> </tbody> </table></div> </div> </div> <div class="sect1"> <h2 id="_spring_boot_auto_configuration"><a class="anchor" href="#_spring_boot_auto_configuration"></a>Spring Boot Auto-Configuration</h2> <div class="sectionbody"> <div class="paragraph"> <p>When using Spring Boot make sure to use the following Maven dependency to have support for auto configuration:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-jsonpath-starter&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
  &lt;!-- use the same version as your Camel core version --&gt;
&lt;/dependency&gt;</code></pre> </div> </div> <div class="paragraph"> <p>The component supports 7 options, which are listed below.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Name</th> <th class="tableblock halign-left valign-top">Description</th> <th class="tableblock halign-center valign-top">Default</th> <th class="tableblock halign-left valign-top">Type</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.language.jsonpath.allow-easy-predicate</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether to allow using the easy predicate parser to pre-parse predicates.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">true</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.language.jsonpath.allow-simple</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether to allow in inlined simple exceptions in the JsonPath expression</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">true</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.language.jsonpath.enabled</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Enable jsonpath language</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">true</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.language.jsonpath.header-name</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Name of header to use as input, instead of the message body</p></td> <td class="tableblock halign-center valign-top"></td> <td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.language.jsonpath.suppress-exceptions</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether to suppress exceptions such as PathNotFoundException.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.language.jsonpath.trim</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether to trim the value to remove leading and trailing whitespaces and line breaks</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">true</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>camel.language.jsonpath.write-as-string</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Whether to write the output of each row/element as a JSON String value instead of a Map/POJO value.</p></td> <td class="tableblock halign-center valign-top"><p class="tableblock">false</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td> </tr> </tbody> </table></div> </div> </div> <div class="sect1"> <h2 id="_using_xml_configuration"><a class="anchor" href="#_using_xml_configuration"></a>Using XML configuration</h2> <div class="sectionbody"> <div class="paragraph"> <p>If you prefer to configure your routes in your Spring XML file then you can use <a href="#">JSonPath</a> expressions as follows</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext id="camel" xmlns="http://camel.apache.org/schema/spring"&gt;
  &lt;route&gt;
    &lt;from uri="direct:start"/&gt;
    &lt;choice&gt;
      &lt;when&gt;
        &lt;jsonpath&gt;$.store.book[?(@.price &amp;lt; 10)]&lt;/jsonpath&gt;
        &lt;to uri="mock:cheap"/&gt;
      &lt;/when&gt;
      &lt;when&gt;
        &lt;jsonpath&gt;$.store.book[?(@.price &amp;lt; 30)]&lt;/jsonpath&gt;
        &lt;to uri="mock:average"/&gt;
      &lt;/when&gt;
      &lt;otherwise&gt;
        &lt;to uri="mock:expensive"/&gt;
      &lt;/otherwise&gt;
    &lt;/choice&gt;
  &lt;/route&gt;
&lt;/camelContext&gt;</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_syntax"><a class="anchor" href="#_syntax"></a>Syntax</h2> <div class="sectionbody"> <div class="paragraph"> <p>See the <a href="https://code.google.com/p/json-path/">JSonPath</a> project page for further examples.</p> </div> </div> </div> <div class="sect1"> <h2 id="_easy_syntax"><a class="anchor" href="#_easy_syntax"></a>Easy Syntax</h2> <div class="sectionbody"> <div class="paragraph"> <p><strong>Available as of Camel 2.19</strong></p> </div> <div class="paragraph"> <p>When you just want to define a basic predicate using jsonpath syntax it can be a bit hard to remember the syntax. So for example to find out all the cheap books you have to do</p> </div> <div class="listingblock"> <div class="content"> <pre>$.store.book[?(@.price &lt; 20)]</pre> </div> </div> <div class="paragraph"> <p>However what if you could just write it as</p> </div> <div class="listingblock"> <div class="content"> <pre>store.book.price &lt; 20</pre> </div> </div> <div class="paragraph"> <p>And you can omit the path if you just want to look at nodes with a price key</p> </div> <div class="listingblock"> <div class="content"> <pre>price &lt; 20</pre> </div> </div> <div class="paragraph"> <p>To support this there is a <code>EasyPredicateParser</code> which kicks-in if you have define the predicate using a basic style. That means the predicate must not start with the <code>$</code> sign, and only include one operator.</p> </div> <div class="paragraph"> <p>The easy syntax is:</p> </div> <div class="listingblock"> <div class="content"> <pre>left OP right</pre> </div> </div> <div class="paragraph"> <p>You can use Camel simple language in the right operator, eg</p> </div> <div class="listingblock"> <div class="content"> <pre>store.book.price &lt; ${header.limit}</pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_supported_message_body_types"><a class="anchor" href="#_supported_message_body_types"></a>Supported message body types</h2> <div class="sectionbody"> <div class="paragraph"> <p>Camel JSonPath supports message body using the following types:</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Type</th> <th class="tableblock halign-left valign-top">Comment</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>File</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Reading from files</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Plain strings</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Message bodies as <code>java.util.Map</code> types</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>List</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Message bodies as <code>java.util.List</code> types</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>POJO</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Optional</strong> If Jackson is on the classpath, then camel-jsonpath is able to use Jackson to read the message body as POJO and convert to <code>java.util.Map</code> which is supported by JSonPath. For example you can add <code>camel-jackson</code> as dependency to include Jackson.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>InputStream</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">If none of the above types matches, then Camel will attempt to read the message body as an <code>java.io.InputStream</code>.</p></td> </tr> </tbody> </table></div> <div class="paragraph"> <p>If a message body is of unsupported type then an exception is thrown by default, however you can configure JSonPath to suppress exceptions (see below)</p> </div> </div> </div> <div class="sect1"> <h2 id="_suppress_exceptions"><a class="anchor" href="#_suppress_exceptions"></a>Suppress exceptions</h2> <div class="sectionbody"> <div class="paragraph"> <p><strong>Available as of Camel 2.16</strong></p> </div> <div class="paragraph"> <p>By default jsonpath will throw an exception if the json payload does not have a valid path accordingly to the configured jsonpath expression. In some use-cases you may want to ignore this in case the json payload contains optional data. Therefore you can set the option suppressExceptions to true to ignore this as shown:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:start")
    .choice()
        // use true to suppress exceptions
        .when().jsonpath("person.middlename", true)
            .to("mock:middle")
        .otherwise()
            .to("mock:other");</code></pre> </div> </div> <div class="paragraph"> <p>And in XML DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;route&gt;
  &lt;from uri="direct:start"/&gt;
  &lt;choice&gt;
    &lt;when&gt;
      &lt;jsonpath suppressExceptions="true"&gt;person.middlename&lt;/jsonpath&gt;
      &lt;to uri="mock:middle"/&gt;
    &lt;/when&gt;
    &lt;otherwise&gt;
      &lt;to uri="mock:other"/&gt;
    &lt;/otherwise&gt;
  &lt;/choice&gt;
&lt;/route&gt;</code></pre> </div> </div> <div class="paragraph"> <p>This option is also available on the <code>@JsonPath</code> annotation.</p> </div> </div> </div> <div class="sect1"> <h2 id="_inline_simple_exceptions"><a class="anchor" href="#_inline_simple_exceptions"></a>Inline Simple exceptions</h2> <div class="sectionbody"> <div class="paragraph"> <p><strong>Available as of Camel 2.18</strong></p> </div> <div class="paragraph"> <p>Its now possible to inlined Simple language expressions in the JSonPath expression using the simple syntax ${xxx}. An example is shown below:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:start")
  .choice()
    .when().jsonpath("$.store.book[?(@.price &lt; ${header.cheap})]")
      .to("mock:cheap")
    .when().jsonpath("$.store.book[?(@.price &lt; ${header.average})]")
      .to("mock:average")
    .otherwise()
      .to("mock:expensive");</code></pre> </div> </div> <div class="paragraph"> <p>And in XML DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;route&gt;
  &lt;from uri="direct:start"/&gt;
  &lt;choice&gt;
    &lt;when&gt;
      &lt;jsonpath&gt;$.store.book[?(@.price &lt; ${header.cheap})]&lt;/jsonpath&gt;
      &lt;to uri="mock:cheap"/&gt;
    &lt;/when&gt;
    &lt;when&gt;
      &lt;jsonpath&gt;$.store.book[?(@.price &lt; ${header.average})]&lt;/jsonpath&gt;
      &lt;to uri="mock:average"/&gt;
    &lt;/when&gt;
    &lt;otherwise&gt;
      &lt;to uri="mock:expensive"/&gt;
    &lt;/otherwise&gt;
  &lt;/choice&gt;
&lt;/route&gt;</code></pre> </div> </div> <div class="paragraph"> <p>You can turn off support for inlined simple expression by setting the option allowSimple to false as shown:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">.when().jsonpath("$.store.book[?(@.price &lt; 10)]", false, false)</code></pre> </div> </div> <div class="paragraph"> <p>And in XML DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;jsonpath allowSimple="false"&gt;$.store.book[?(@.price &lt; 10)]&lt;/jsonpath&gt;</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_jsonpath_injection"><a class="anchor" href="#_jsonpath_injection"></a>JSonPath injection</h2> <div class="sectionbody"> <div class="paragraph"> <p>You can use Bean Integration to invoke a method on a bean and use various languages such as JSonPath to extract a value from the message and bind it to a method parameter.</p> </div> <div class="paragraph"> <p>For example</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Foo {

    @Consume("activemq:queue:books.new")
    public void doSomething(@JsonPath("$.store.book[*].author") String author, @Body String json) {
      // process the inbound message here
    }
}</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_encoding_detection"><a class="anchor" href="#_encoding_detection"></a>Encoding Detection</h2> <div class="sectionbody"> <div class="paragraph"> <p>The encoding of the JSON document is detected automatically, if the document is encoded in unicode (UTF-8, UTF-16LE, UTF-16BE, UTF-32LE, UTF-32BE ) as specified in RFC-4627. If the encoding is a non-unicode encoding, you can either make sure that you enter the document in String format to the JSONPath component or you can specify the encoding in the header "<strong>CamelJsonPathJsonEncoding</strong>" (JsonpathConstants.HEADER_JSON_ENCODING).</p> </div> </div> </div> <div class="sect1"> <h2 id="_split_json_data_into_sub_rows_as_json"><a class="anchor" href="#_split_json_data_into_sub_rows_as_json"></a>Split JSon data into sub rows as JSon</h2> <div class="sectionbody"> <div class="paragraph"> <p>You can use jsonpath to split a JSon document, such as:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:start")
    .split().jsonpath("$.store.book[*]")
    .to("log:book");</code></pre> </div> </div> <div class="paragraph"> <p>Then each book is logged, however the message body is a <code>Map</code> instance. Sometimes you may want to output this as plain String JSon value instead, which can be done with the <code>writeAsString</code> option as shown:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:start")
    .split().jsonpathWriteAsString("$.store.book[*]")
    .to("log:book");</code></pre> </div> </div> <div class="paragraph"> <p>Then each book is logged as a String JSon value. For earlier versions of Camel you would need to use camel-jackson dataformat and marshal the message body to make it convert the message body from <code>Map</code> to a <code>String</code> type.</p> </div> </div> </div> <div class="sect1"> <h2 id="_using_header_as_input"><a class="anchor" href="#_using_header_as_input"></a>Using header as input</h2> <div class="sectionbody"> <div class="paragraph"> <p><strong>Available as of Camel 2.20</strong></p> </div> <div class="paragraph"> <p>By default jsonpath uses the message body as the input source. However you can also use a header as input by specifying the <code>headerName</code> option.</p> </div> <div class="paragraph"> <p>For example to count the number of books from a json document that was stored in a header named <code>books</code> you can do:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">from("direct:start")
    .setHeader("numberOfBooks")
        .jsonpath("$..store.book.length()", false, int.class, "books")
    .to("mock:result");</code></pre> </div> </div> <div class="paragraph"> <p>In the <code>jsonpath</code> expression above we specify the name of the header as <code>books</code> and we also told that we wanted the result to be converted as an integer by <code>int.class</code>.</p> </div> <div class="paragraph"> <p>The same example in XML DSL would be:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;route&gt;
  &lt;from uri="direct:start"/&gt;
  &lt;setHeader name="numberOfBooks"&gt;
    &lt;jsonpath headerName="books" resultType="int"&gt;$..store.book.length()&lt;/jsonpath&gt;
  &lt;/transform&gt;
  &lt;to uri="mock:result"/&gt;
&lt;/route&gt;</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_dependencies"><a class="anchor" href="#_dependencies"></a>Dependencies</h2> <div class="sectionbody"> <div class="paragraph"> <p>To use JSonPath in your camel routes you need to add the a dependency on <strong>camel-jsonpath</strong> which implements the JSonPath language.</p> </div> <div class="paragraph"> <p>If you use maven you could just add the following to your pom.xml, substituting the version number for the latest &amp; greatest release (see the download page for the latest versions).</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-jsonpath&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;</code></pre> </div> </div> </div> </div> </article> </main> </div> <footer> <div class="footer"> <figure class="logo"> <img src="../../_/img/logo-d.svg" class="logo-small mt-60" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <dl> <dt>Overview</dt> <dd><a href="../../blog/">Blog</a></dd> <dd><a href="../../components/latest/">Components</a></dd> <dd><a href="../../download/">Download</a></dd> <dd><a href="../../docs/getting-started/">Getting started</a></dd> <dd><a href="../../manual/latest/faq.html">FAQ</a></dd> </dl> <dl> <dt>Community</dt> <dd><a href="../../community/support/">Support</a></dd> <dd><a href="https://github.com/apache/camel/blob/master/CONTRIBUTING.md">Contributing</a></dd> <dd><a href="../../community/user-stories/">User stories</a></dd> <dd><a href="../../community/articles/">Articles</a></dd> <dd><a href="../../community/books/">Books</a></dd> <dd><a href="../../community/team/">Team</a></dd> </dl> <dl> <dt>About</dt> <dd><a href="../../acknowledgments/">Acknowledgments</a> </dd><dd><a target="_blank" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p> &copy; 2004-2019 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> </div> </footer> <script src="../../_/js/site-f4f4dbc142.js"></script> <script async src="../../_/js/vendor/highlight-54157f17f1.js"></script> <script async src="../../_/js/vendor/svg4everybody-195d47ce7d.js"></script> <script type="application/ld+json"> {
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "Apache Camel",
  "url": "https://camel.apache.org",
  "sameAs": [
     "https://twitter.com/ApacheCamel"
  ],
  "logo": "../../_/img/logo-d.svg",
  "description": "Apache Camel â„¢ is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL."
} </script> <script type="application/ld+json"> { 
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Apache Camel",
        "item": "https://camel.apache.org"
        },
        {
        "@type": "ListItem",
        "position": 2,
        "name": "Component reference",
        "item": "https://camel.apache.org/components/latest/index.html"
        },
        {
        "@type": "ListItem",
        "position": 3,
        "name": "JsonPath Language","item": "https://camel.apache.org/components/latest/jsonpath-language.html"}
        ]
    } </script> </body> </html> 